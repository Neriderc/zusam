{"version":3,"sources":["lazy/nlg.js"],"names":["nlg","list","bodyStyle","nlgStyles","document","body","clientWidth","clickFn","e","preventDefault","ctrlKey","window","open","currentTarget","getAttribute","show","stop","querySelectorAll","forEach","elm","removeEventListener","start","getElementById","createElement","id","innerHTML","append","setTimeout","find","push","addEventListener","keepBackground","side","url","media","dataset","src","href","test","setAttribute","classList","add","style","cssText","modalBackground","target","hide","close","keyPressClose","key","code","appendChild","spinner","i","querySelector","opacity","modal","mediaIsLoadedFn","outerHTML","originBtn","origin","w","tagName","videoWidth","width","ratio","videoHeight","height","Math","min","clientHeight","currentIndex","findIndex","nextElmt","prevElmt","next","nextFn","moveLeft","keyPressRight","prev","prevFn","moveRight","keyPressLeft","center","play","remove"],"mappings":"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","file":"nlg.ebbd5208.js","sourceRoot":"../src","sourcesContent":["// nano lightbox gallery\nlet nlg = {\n  list: [],\n  bodyStyle: \"\",\n  nlgStyles: `\n        .nlg-left {\n            left: -${document.body.clientWidth}px !important;\n        }\n        .nlg-right {\n            left: ${document.body.clientWidth * 2}px !important;\n        }\n    `,\n  clickFn: e => {\n    e.preventDefault();\n    if (e.ctrlKey) {\n      window.open(e.currentTarget.getAttribute(\"href\"), \"_blank\");\n    } else {\n      nlg.show(e.currentTarget);\n    }\n  },\n  stop: () => {\n    document\n      .querySelectorAll(\"[data-nlg]\")\n      .forEach(elm => elm.removeEventListener(\"click\", nlg.clickFn));\n    window.removeEventListener(\"routerStateChange\", nlg.stop);\n  },\n  start: () => {\n    nlg.stop();\n    nlg.list = [];\n    if (!document.getElementById(\"nlg-styles\")) {\n      let nlgStyles = document.createElement(\"style\");\n      nlgStyles.id = \"nlg-styles\";\n      nlgStyles.innerHTML = nlg.nlgStyles;\n      document.body.append(nlgStyles);\n    }\n    setTimeout(() => {\n      document.querySelectorAll(\"[data-nlg]\").forEach(elm => {\n        if (\n          !nlg.list.find(\n            e => e.getAttribute(\"href\") == elm.getAttribute(\"href\")\n          )\n        ) {\n          nlg.list.push(elm);\n          elm.addEventListener(\"click\", nlg.clickFn);\n        }\n      });\n    }, 100);\n    window.addEventListener(\"routerStateChange\", nlg.stop);\n  },\n  show: (e, keepBackground = false, side = null) => {\n    let url = e.dataset.src || e.src || e.href;\n    let media;\n    switch (true) {\n      case /\\.(webm|mp4)$/.test(url):\n        media = document.createElement(\"video\");\n        media.setAttribute(\"controls\", true);\n        break;\n      case /\\.(jpg|jpeg|png|bmp|webp|gif|svg)$/.test(url):\n      default:\n        media = document.createElement(\"img\");\n    }\n    media.classList.add(\"nlg-media\");\n    if (side) {\n      media.classList.add(`nlg-${  side}`);\n    }\n    nlg.bodyStyle = document.body.style.cssText;\n    document.body.style.cssText = \"overflow: hidden\";\n    if (!keepBackground) {\n      let modalBackground = document.createElement(\"div\");\n      modalBackground.id = \"nlg-modal-bg\";\n      modalBackground.addEventListener(\"click\", e => {\n        if (e.currentTarget != e.target) {\n          return;\n        }\n        nlg.hide();\n      });\n\n      let close = document.createElement(\"a\");\n      close.id = \"nlg-close\";\n      close.innerHTML = \"&times;\";\n      close.addEventListener(\"click\", nlg.hide);\n      nlg.keyPressClose = e =>\n        (e.key == \"Escape\" || e.code == \"Escape\") && nlg.hide();\n      window.addEventListener(\"keydown\", nlg.keyPressClose);\n      document.body.appendChild(close);\n      document.body.appendChild(modalBackground);\n    }\n    let spinner = document.createElement(\"div\");\n    spinner.classList.add(\"spinner\");\n    for (let i = 0; i < 5; i++) {\n      spinner.appendChild(document.createElement(\"div\"));\n    }\n    setTimeout(() => {\n      let spinner = document.querySelector(\"#nlg-modal-bg .spinner\");\n      if (spinner) {\n        spinner.style.opacity = 1;\n      }\n    }, 500);\n    if (document.getElementById(\"nlg-modal-bg\")) {\n      document.getElementById(\"nlg-modal-bg\").appendChild(spinner);\n    }\n    let modal = document.createElement(\"div\");\n    modal.id = \"nlg-modal\";\n    let mediaIsLoadedFn = () => {\n      if (!document.getElementById(\"nlg-modal-bg\")) {\n        nlg.hide();\n        return;\n      }\n      let spinner = document.querySelector(\"#nlg-modal-bg .spinner\");\n      if (spinner) {\n        spinner.outerHTML = \"\";\n      }\n      if (e.dataset[\"origin\"]) {\n        let originBtn = document.createElement(\"a\");\n        originBtn.id = \"nlg-origin\";\n        originBtn.href = e.dataset.origin;\n        originBtn.target = \"_blank\";\n        originBtn.innerHTML = `\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\">\n                    <path d=\"M224,295.6L116.8,402.9L153,439c15.1,15.1,4.4,41-17,41H24c-13.3,0-24-10.7-24-24V344c0-21.4,25.9-32.1,41-17l36.2,36.2 L184.5,256\"/>\n                    <path d=\"M224,216.4l107.3-107.3L295.1,73c-15.1-15.1-4.4-41,17-41h112c13.3,0,24,10.7,24,24v112c0,21.4-25.9,32.1-41,17l-36.2-36.2 L263.6,256\"/>\n                    </svg>\n                `;\n        document.body.appendChild(originBtn);\n      }\n      let w = media.tagName == \"VIDEO\" ? media.videoWidth : media.width;\n      let h = media.tagName == \"VIDEO\" ? media.videoHeight : media.height;\n      let ratio = w / h;\n      media.width = Math.min(document.body.clientWidth, w);\n      media.height = Math.min(document.body.clientHeight, media.width / ratio);\n      media.width = media.height * ratio;\n\n      let currentIndex = nlg.list.findIndex(\n        e => url === (e.dataset.src || e.src || e.href)\n      );\n      let nextElmt = nlg.list[currentIndex + 1];\n      let prevElmt = nlg.list[currentIndex - 1];\n      if (nextElmt) {\n        let next = document.createElement(\"a\");\n        next.classList.add(\"nlg-next\");\n        next.innerHTML = \"&#10095;\";\n        let nextFn = e => {\n          nlg.moveLeft();\n          setTimeout(() => {\n            nlg.hide(true);\n            nlg.show(nextElmt, true, \"right\");\n          }, 300);\n        };\n        next.addEventListener(\"click\", nextFn);\n        nlg.keyPressRight = e =>\n          (e.key == \"ArrowRight\" || e.code == \"ArrowRight\") && nextFn(e);\n        window.addEventListener(\"keydown\", nlg.keyPressRight);\n        modal.appendChild(next);\n      }\n      if (prevElmt) {\n        let prev = document.createElement(\"a\");\n        prev.innerHTML = \"&#10094;\";\n        prev.classList.add(\"nlg-prev\");\n        let prevFn = e => {\n          nlg.moveRight();\n          setTimeout(() => {\n            nlg.hide(true);\n            nlg.show(prevElmt, true, \"left\");\n          }, 300);\n        };\n        prev.addEventListener(\"click\", prevFn);\n        nlg.keyPressLeft = e =>\n          (e.key == \"ArrowLeft\" || e.code == \"ArrowLeft\") && prevFn(e);\n        window.addEventListener(\"keydown\", nlg.keyPressLeft);\n        modal.appendChild(prev);\n      }\n      modal.style.cssText = `opacity: 1;`;\n      setTimeout(nlg.center, 1);\n    };\n    media.addEventListener(\"load\", mediaIsLoadedFn);\n    media.addEventListener(\"loadeddata\", mediaIsLoadedFn);\n    modal.addEventListener(\"click\", e => {\n      if (e.currentTarget != e.target) {\n        return;\n      }\n      nlg.hide();\n    });\n    modal.appendChild(media);\n    document.body.appendChild(modal);\n    media.src = url;\n    if (media.tagName == \"VIDEO\") {\n      media.play();\n    }\n  },\n  hide: (keepBackground = false) => {\n    if (document.getElementById(\"nlg-modal\")) {\n      window.removeEventListener(\"keydown\", nlg.keyPressRight);\n      window.removeEventListener(\"keydown\", nlg.keyPressLeft);\n      document.body.style.cssText = nlg.bodyStyle;\n      document.getElementById(\"nlg-modal\").outerHTML = \"\";\n      if (document.getElementById(\"nlg-origin\")) {\n        document.getElementById(\"nlg-origin\").outerHTML = \"\";\n      }\n      if (keepBackground != true) {\n        (document.querySelector(\"#nlg-close\") || {}).outerHTML = \"\";\n        (document.getElementById(\"nlg-modal-bg\") || {}).outerHTML = \"\";\n        window.removeEventListener(\"keydown\", nlg.keyPressClose);\n      }\n    }\n  },\n  moveLeft: () =>\n    document.querySelector(\"#nlg-modal > .nlg-media\").classList.add(\"nlg-left\"),\n  moveRight: () =>\n    document\n      .querySelector(\"#nlg-modal > .nlg-media\")\n      .classList.add(\"nlg-right\"),\n  center: () => {\n    let media = document.querySelector(\"#nlg-modal > .nlg-media\");\n    media.classList.remove(\"nlg-right\");\n    media.classList.remove(\"nlg-left\");\n  }\n};\nexport default nlg;\n"]}