{"mappings":"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","sources":["src/lazy/nlg.js"],"sourcesContent":["// nano lightbox gallery\nlet nlg = {\n  list: [],\n  bodyStyle: \"\",\n  nlgStyles: `\n        .nlg-left {\n            left: -${document.body.clientWidth}px !important;\n        }\n        .nlg-right {\n            left: ${document.body.clientWidth * 2}px !important;\n        }\n    `,\n  clickFn: e => {\n    e.preventDefault();\n    if (e.ctrlKey) {\n      window.open(e.currentTarget.getAttribute(\"href\"), \"_blank\");\n    } else {\n      nlg.show(e.currentTarget);\n    }\n  },\n  stop: () => {\n    nlg.hide();\n    document\n      .querySelectorAll(\"[data-nlg]\")\n      .forEach(elm => elm.removeEventListener(\"click\", nlg.clickFn));\n    window.removeEventListener(\"routerStateChange\", nlg.stop);\n    window.removeEventListener(\"popstate\", nlg.stop);\n  },\n  start: () => {\n    nlg.stop();\n    nlg.list = [];\n    if (!document.getElementById(\"nlg-styles\")) {\n      let nlgStyles = document.createElement(\"style\");\n      nlgStyles.id = \"nlg-styles\";\n      nlgStyles.innerHTML = nlg.nlgStyles;\n      document.body.append(nlgStyles);\n    }\n    setTimeout(() => {\n      document.querySelectorAll(\"[data-nlg]\").forEach(elm => {\n        if (\n          !nlg.list.find(\n            e => e.getAttribute(\"href\") == elm.getAttribute(\"href\")\n          )\n        ) {\n          nlg.list.push(elm);\n          elm.addEventListener(\"click\", nlg.clickFn);\n        }\n      });\n    }, 100);\n    window.addEventListener(\"routerStateChange\", nlg.stop);\n    window.addEventListener(\"popstate\", nlg.stop);\n  },\n  show: (e, keepBackground = false, side = null) => {\n    let url = e.dataset.src || e.src || e.href;\n    let media;\n    switch (true) {\n      case /\\.(webm|mp4)$/.test(url):\n        media = document.createElement(\"video\");\n        media.setAttribute(\"controls\", true);\n        break;\n      case /\\.(pdf)$/.test(url):\n        media = document.createElement(\"iframe\");\n        break;\n      case /\\.(jpg|jpeg|png|bmp|webp|gif|svg)$/.test(url):\n      default:\n        // default displays also thumbnails that do not have an extension\n        // TODO: this is a dirty trick\n        media = document.createElement(\"img\");\n    }\n    media.classList.add(\"nlg-media\");\n    if (side) {\n      media.classList.add(`nlg-${  side}`);\n    }\n    nlg.bodyStyle = document.body.style.cssText;\n    document.body.style.cssText = \"overflow: hidden\";\n    if (!keepBackground) {\n      let modalBackground = document.createElement(\"div\");\n      modalBackground.id = \"nlg-modal-bg\";\n      modalBackground.addEventListener(\"click\", e => {\n        if (e.currentTarget != e.target) {\n          return;\n        }\n        nlg.hide();\n      });\n\n      let close = document.createElement(\"a\");\n      close.id = \"nlg-close\";\n      close.innerHTML = \"&times;\";\n      close.addEventListener(\"click\", nlg.hide);\n      nlg.keyPressClose = e =>\n        (e.key == \"Escape\" || e.code == \"Escape\") && nlg.hide();\n      window.addEventListener(\"keydown\", nlg.keyPressClose);\n      document.body.appendChild(close);\n      document.body.appendChild(modalBackground);\n    }\n    let spinner = document.createElement(\"div\");\n    spinner.classList.add(\"spinner\");\n    for (let i = 0; i < 5; i++) {\n      spinner.appendChild(document.createElement(\"div\"));\n    }\n    setTimeout(() => {\n      let spinner = document.querySelector(\"#nlg-modal-bg .spinner\");\n      if (spinner) {\n        spinner.style.opacity = 1;\n      }\n    }, 500);\n    if (document.getElementById(\"nlg-modal-bg\")) {\n      document.getElementById(\"nlg-modal-bg\").appendChild(spinner);\n    }\n    let modal = document.createElement(\"div\");\n    modal.id = \"nlg-modal\";\n    let mediaIsLoadedFn = () => {\n      if (!document.getElementById(\"nlg-modal-bg\")) {\n        nlg.hide();\n        return;\n      }\n      let spinner = document.querySelector(\"#nlg-modal-bg .spinner\");\n      if (spinner) {\n        spinner.outerHTML = \"\";\n      }\n      if (e.dataset[\"origin\"]) {\n        let downloadBtn = document.createElement(\"a\");\n        downloadBtn.id = \"nlg-download\";\n        downloadBtn.href = e.dataset.origin;\n        downloadBtn.target = \"_blank\";\n        downloadBtn.innerHTML = `&#8615;`;\n        downloadBtn.download = (new URL(e.dataset.origin)).pathname.split(\"/\").slice(-1);\n        document.body.appendChild(downloadBtn);\n      }\n      let w = media.tagName == \"VIDEO\" ? media.videoWidth : media.width;\n      let h = media.tagName == \"VIDEO\" ? media.videoHeight : media.height;\n      let ratio = media.tagName == \"IFRAME\" ? 9/16 : w / h;\n      media.width = Math.min(document.body.clientWidth, w);\n      media.height = Math.min(document.body.clientHeight, media.width / ratio);\n      media.width = media.height * ratio;\n      if (media.tagName == \"IFRAME\") {\n        media.height = document.body.clientHeight - 10;\n        media.width = Math.max(document.body.clientWidth - 200, document.body.clientWidth * .8);\n      }\n\n      let currentIndex = nlg.list.findIndex(\n        e => url === (e.dataset.src || e.src || e.href)\n      );\n      let nextElmt = nlg.list[currentIndex + 1];\n      let prevElmt = nlg.list[currentIndex - 1];\n      if (nextElmt) {\n        let next = document.createElement(\"a\");\n        next.classList.add(\"nlg-next\");\n        next.innerHTML = \"&#10095;\";\n        let nextFn = () => {\n          nlg.moveLeft();\n          setTimeout(() => {\n            nlg.hide(true);\n            nlg.show(nextElmt, true, \"right\");\n          }, 300);\n        };\n        next.addEventListener(\"click\", nextFn);\n        nlg.keyPressRight = e =>\n          (e.key == \"ArrowRight\" || e.code == \"ArrowRight\") && nextFn(e);\n        window.addEventListener(\"keydown\", nlg.keyPressRight);\n        modal.appendChild(next);\n      }\n      if (prevElmt) {\n        let prev = document.createElement(\"a\");\n        prev.innerHTML = \"&#10094;\";\n        prev.classList.add(\"nlg-prev\");\n        let prevFn = () => {\n          nlg.moveRight();\n          setTimeout(() => {\n            nlg.hide(true);\n            nlg.show(prevElmt, true, \"left\");\n          }, 300);\n        };\n        prev.addEventListener(\"click\", prevFn);\n        nlg.keyPressLeft = e =>\n          (e.key == \"ArrowLeft\" || e.code == \"ArrowLeft\") && prevFn(e);\n        window.addEventListener(\"keydown\", nlg.keyPressLeft);\n        modal.appendChild(prev);\n      }\n      modal.style.cssText = `opacity: 1;`;\n      setTimeout(nlg.center, 1);\n    };\n    media.addEventListener(\"load\", mediaIsLoadedFn);\n    media.addEventListener(\"loadeddata\", mediaIsLoadedFn);\n    modal.addEventListener(\"click\", e => {\n      if (e.currentTarget != e.target) {\n        return;\n      }\n      nlg.hide();\n    });\n    modal.appendChild(media);\n    document.body.appendChild(modal);\n    media.src = url;\n    if (media.tagName == \"VIDEO\") {\n      media.play();\n    }\n  },\n  hide: (keepBackground = false) => {\n    if (document.getElementById(\"nlg-modal\")) {\n      window.removeEventListener(\"keydown\", nlg.keyPressRight);\n      window.removeEventListener(\"keydown\", nlg.keyPressLeft);\n      document.body.style.cssText = nlg.bodyStyle;\n      document.getElementById(\"nlg-modal\").outerHTML = \"\";\n      if (document.getElementById(\"nlg-download\")) {\n        document.getElementById(\"nlg-download\").outerHTML = \"\";\n      }\n      if (keepBackground != true) {\n        (document.querySelector(\"#nlg-close\") || {}).outerHTML = \"\";\n        (document.getElementById(\"nlg-modal-bg\") || {}).outerHTML = \"\";\n        window.removeEventListener(\"keydown\", nlg.keyPressClose);\n      }\n    }\n  },\n  moveLeft: () =>\n    document.querySelector(\"#nlg-modal > .nlg-media\").classList.add(\"nlg-left\"),\n  moveRight: () =>\n    document\n      .querySelector(\"#nlg-modal > .nlg-media\")\n      .classList.add(\"nlg-right\"),\n  center: () => {\n    let media = document.querySelector(\"#nlg-modal > .nlg-media\");\n    media.classList.remove(\"nlg-right\");\n    media.classList.remove(\"nlg-left\");\n  }\n};\nexport default nlg;\n"],"names":["nlg","list","bodyStyle","nlgStyles","preventDefault","body","clientWidth","document","window","ctrlKey","removeEventListener","e","currentTarget","getAttribute","show","start","stop","forEach","elm","$317dc8b7bff1bfda$var$nlg","clickFn","setTimeout","querySelectorAll","id","addEventListener","find","push","keepBackground","side","createElement","url","e1","dataset","test","src","href","media","setAttribute","classList","modalBackground","target","style","cssText","close","keyPressClose","appendChild","innerHTML","spinner","hide","key","code","querySelector","getElementById","spinner1","modal","i","mediaIsLoadedFn","downloadBtn","download","URL","w","tagName","h","origin","ratio","Math","clientHeight","split","slice","height","width","max","currentIndex","findIndex","nextElmt","prevElmt","next","moveLeft","add","nextFn","keyPressRight","prev","prevFn","keyPressLeft","center","play","outerHTML","remove","moveRight"],"version":3,"file":"nlg.17bd5b64.js.map"}