{"mappings":"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","sources":["src/lazy/nlg.js"],"sourcesContent":["// nano lightbox gallery\nlet nlg = {\n  list: [],\n  bodyStyle: \"\",\n  nlgStyles: `\n        .nlg-left {\n            left: -${document.body.clientWidth}px !important;\n        }\n        .nlg-right {\n            left: ${document.body.clientWidth * 2}px !important;\n        }\n    `,\n  clickFn: e => {\n    e.preventDefault();\n    if (e.ctrlKey) {\n      window.open(e.currentTarget.getAttribute(\"href\"), \"_blank\");\n    } else {\n      nlg.show(e.currentTarget);\n    }\n  },\n  stop: () => {\n    nlg.hide();\n    document\n      .querySelectorAll(\"[data-nlg]\")\n      .forEach(elm => elm.removeEventListener(\"click\", nlg.clickFn));\n    window.removeEventListener(\"routerStateChange\", nlg.stop);\n    window.removeEventListener(\"popstate\", nlg.stop);\n  },\n  start: () => {\n    nlg.stop();\n    nlg.list = [];\n    if (!document.getElementById(\"nlg-styles\")) {\n      let nlgStyles = document.createElement(\"style\");\n      nlgStyles.id = \"nlg-styles\";\n      nlgStyles.innerHTML = nlg.nlgStyles;\n      document.body.append(nlgStyles);\n    }\n    setTimeout(() => {\n      document.querySelectorAll(\"[data-nlg]\").forEach(elm => {\n        if (\n          !nlg.list.find(\n            e => e.getAttribute(\"href\") == elm.getAttribute(\"href\")\n          )\n        ) {\n          nlg.list.push(elm);\n          elm.addEventListener(\"click\", nlg.clickFn);\n        }\n      });\n    }, 100);\n    window.addEventListener(\"routerStateChange\", nlg.stop);\n    window.addEventListener(\"popstate\", nlg.stop);\n  },\n  show: (e, keepBackground = false, side = null) => {\n    let url = e.dataset.src || e.src || e.href;\n    let media;\n    switch (true) {\n    case /\\.(webm|mp4)$/.test(url):\n      media = document.createElement(\"video\");\n      media.setAttribute(\"controls\", true);\n      break;\n    case /\\.(pdf)$/.test(url):\n      media = document.createElement(\"iframe\");\n      break;\n    case /\\.(jpg|jpeg|png|bmp|webp|gif|svg)$/.test(url):\n    default:\n      // default displays also thumbnails that do not have an extension\n      // TODO: this is a dirty trick\n      media = document.createElement(\"img\");\n    }\n    media.classList.add(\"nlg-media\");\n    if (side) {\n      media.classList.add(`nlg-${  side}`);\n    }\n    nlg.bodyStyle = document.body.style.cssText;\n    document.body.style.cssText = \"overflow: hidden\";\n    if (!keepBackground) {\n      let modalBackground = document.createElement(\"div\");\n      modalBackground.id = \"nlg-modal-bg\";\n      modalBackground.addEventListener(\"click\", e => {\n        if (e.currentTarget != e.target) {\n          return;\n        }\n        nlg.hide();\n      });\n\n      let close = document.createElement(\"a\");\n      close.id = \"nlg-close\";\n      close.innerHTML = \"&times;\";\n      close.addEventListener(\"click\", nlg.hide);\n      nlg.keyPressClose = e =>\n        (e.key == \"Escape\" || e.code == \"Escape\") && nlg.hide();\n      window.addEventListener(\"keydown\", nlg.keyPressClose);\n      document.body.appendChild(close);\n      document.body.appendChild(modalBackground);\n    }\n    let spinner = document.createElement(\"div\");\n    spinner.classList.add(\"spinner\");\n    for (let i = 0; i < 5; i++) {\n      spinner.appendChild(document.createElement(\"div\"));\n    }\n    setTimeout(() => {\n      let spinner = document.querySelector(\"#nlg-modal-bg .spinner\");\n      if (spinner) {\n        spinner.style.opacity = 1;\n      }\n    }, 500);\n    if (document.getElementById(\"nlg-modal-bg\")) {\n      document.getElementById(\"nlg-modal-bg\").appendChild(spinner);\n    }\n    let modal = document.createElement(\"div\");\n    modal.id = \"nlg-modal\";\n    let mediaIsLoadedFn = () => {\n      if (!document.getElementById(\"nlg-modal-bg\")) {\n        nlg.hide();\n        return;\n      }\n      let spinner = document.querySelector(\"#nlg-modal-bg .spinner\");\n      if (spinner) {\n        spinner.outerHTML = \"\";\n      }\n      if (e.dataset[\"origin\"]) {\n        let downloadBtn = document.createElement(\"a\");\n        downloadBtn.id = \"nlg-download\";\n        downloadBtn.href = e.dataset.origin;\n        downloadBtn.target = \"_blank\";\n        downloadBtn.innerHTML = \"&#8615;\";\n        downloadBtn.download = (new URL(e.dataset.origin)).pathname.split(\"/\").slice(-1);\n        document.body.appendChild(downloadBtn);\n      }\n      let w = media.tagName == \"VIDEO\" ? media.videoWidth : media.width;\n      let h = media.tagName == \"VIDEO\" ? media.videoHeight : media.height;\n      let ratio = media.tagName == \"IFRAME\" ? 9/16 : w / h;\n      media.width = Math.min(document.body.clientWidth, w);\n      media.height = Math.min(document.body.clientHeight, media.width / ratio);\n      media.width = media.height * ratio;\n      if (media.tagName == \"IFRAME\") {\n        media.height = document.body.clientHeight - 10;\n        media.width = Math.max(document.body.clientWidth - 200, document.body.clientWidth * .8);\n      }\n\n      let currentIndex = nlg.list.findIndex(\n        e => url === (e.dataset.src || e.src || e.href)\n      );\n      let nextElmt = nlg.list[currentIndex + 1];\n      let prevElmt = nlg.list[currentIndex - 1];\n      if (nextElmt) {\n        let next = document.createElement(\"a\");\n        next.classList.add(\"nlg-next\");\n        next.innerHTML = \"&#10095;\";\n        let nextFn = () => {\n          nlg.moveLeft();\n          setTimeout(() => {\n            nlg.hide(true);\n            nlg.show(nextElmt, true, \"right\");\n          }, 300);\n        };\n        next.addEventListener(\"click\", nextFn);\n        nlg.keyPressRight = e =>\n          (e.key == \"ArrowRight\" || e.code == \"ArrowRight\") && nextFn(e);\n        window.addEventListener(\"keydown\", nlg.keyPressRight);\n        modal.appendChild(next);\n      }\n      if (prevElmt) {\n        let prev = document.createElement(\"a\");\n        prev.innerHTML = \"&#10094;\";\n        prev.classList.add(\"nlg-prev\");\n        let prevFn = () => {\n          nlg.moveRight();\n          setTimeout(() => {\n            nlg.hide(true);\n            nlg.show(prevElmt, true, \"left\");\n          }, 300);\n        };\n        prev.addEventListener(\"click\", prevFn);\n        nlg.keyPressLeft = e =>\n          (e.key == \"ArrowLeft\" || e.code == \"ArrowLeft\") && prevFn(e);\n        window.addEventListener(\"keydown\", nlg.keyPressLeft);\n        modal.appendChild(prev);\n      }\n      modal.style.cssText = \"opacity: 1;\";\n      setTimeout(nlg.center, 1);\n    };\n    media.addEventListener(\"load\", mediaIsLoadedFn);\n    media.addEventListener(\"loadeddata\", mediaIsLoadedFn);\n    modal.addEventListener(\"click\", e => {\n      if (e.currentTarget != e.target) {\n        return;\n      }\n      nlg.hide();\n    });\n    modal.appendChild(media);\n    document.body.appendChild(modal);\n    media.src = url;\n    if (media.tagName == \"VIDEO\") {\n      media.play();\n    }\n  },\n  hide: (keepBackground = false) => {\n    if (document.getElementById(\"nlg-modal\")) {\n      window.removeEventListener(\"keydown\", nlg.keyPressRight);\n      window.removeEventListener(\"keydown\", nlg.keyPressLeft);\n      document.body.style.cssText = nlg.bodyStyle;\n      document.getElementById(\"nlg-modal\").outerHTML = \"\";\n      if (document.getElementById(\"nlg-download\")) {\n        document.getElementById(\"nlg-download\").outerHTML = \"\";\n      }\n      if (keepBackground != true) {\n        (document.querySelector(\"#nlg-close\") || {}).outerHTML = \"\";\n        (document.getElementById(\"nlg-modal-bg\") || {}).outerHTML = \"\";\n        window.removeEventListener(\"keydown\", nlg.keyPressClose);\n      }\n    }\n  },\n  moveLeft: () =>\n    document.querySelector(\"#nlg-modal > .nlg-media\").classList.add(\"nlg-left\"),\n  moveRight: () =>\n    document\n      .querySelector(\"#nlg-modal > .nlg-media\")\n      .classList.add(\"nlg-right\"),\n  center: () => {\n    let media = document.querySelector(\"#nlg-modal > .nlg-media\");\n    media.classList.remove(\"nlg-right\");\n    media.classList.remove(\"nlg-left\");\n  }\n};\nexport default nlg;\n"],"names":["nlg","list","bodyStyle","nlgStyles","document","body","clientWidth","clickFn","e","preventDefault","ctrlKey","window","open","currentTarget","getAttribute","show","stop","hide","querySelectorAll","forEach","elm","removeEventListener","start","getElementById","createElement","id","innerHTML","append","setTimeout","find","push","addEventListener","keepBackground","side","media","url","dataset","src","href","test","setAttribute","classList","add","style","cssText","modalBackground","target","close","keyPressClose","key","code","appendChild","spinner","i","querySelector","opacity","modal","mediaIsLoadedFn","outerHTML","downloadBtn","origin","download","URL","pathname","split","slice","w","tagName","videoWidth","width","h","videoHeight","height","ratio","Math","min","clientHeight","max","currentIndex","findIndex","nextElmt","prevElmt","next","nextFn","moveLeft","keyPressRight","prev","prevFn","moveRight","keyPressLeft","center","play","remove","$fe2a37fb9d1f94dc$export$2e2bcd8739ae039"],"version":3,"file":"nlg.41672c04.js.map"}