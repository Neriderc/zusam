{"mappings":"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","sources":["src/lazy/nlg.js"],"sourcesContent":["// nano lightbox gallery\nlet nlg = {\n  list: [],\n  bodyStyle: \"\",\n  nlgStyles: `\n        .nlg-left {\n            left: -${document.body.clientWidth}px !important;\n        }\n        .nlg-right {\n            left: ${document.body.clientWidth * 2}px !important;\n        }\n    `,\n  clickFn: e => {\n    e.preventDefault();\n    if (e.ctrlKey) {\n      window.open(e.currentTarget.getAttribute(\"href\"), \"_blank\");\n    } else {\n      nlg.show(e.currentTarget);\n    }\n  },\n  stop: () => {\n    nlg.hide();\n    document\n      .querySelectorAll(\"[data-nlg]\")\n      .forEach(elm => elm.removeEventListener(\"click\", nlg.clickFn));\n    window.removeEventListener(\"routerStateChange\", nlg.stop);\n    window.removeEventListener(\"popstate\", nlg.stop);\n  },\n  start: () => {\n    nlg.stop();\n    nlg.list = [];\n    if (!document.getElementById(\"nlg-styles\")) {\n      let nlgStyles = document.createElement(\"style\");\n      nlgStyles.id = \"nlg-styles\";\n      nlgStyles.innerHTML = nlg.nlgStyles;\n      document.body.append(nlgStyles);\n    }\n    setTimeout(() => {\n      document.querySelectorAll(\"[data-nlg]\").forEach(elm => {\n        if (\n          !nlg.list.find(\n            e => e.getAttribute(\"href\") == elm.getAttribute(\"href\")\n          )\n        ) {\n          nlg.list.push(elm);\n          elm.addEventListener(\"click\", nlg.clickFn);\n        }\n      });\n    }, 100);\n    window.addEventListener(\"routerStateChange\", nlg.stop);\n    window.addEventListener(\"popstate\", nlg.stop);\n  },\n  show: (e, keepBackground = false, side = null) => {\n    let url = e.dataset.src || e.src || e.href;\n    let media;\n    switch (true) {\n      case /\\.(webm|mp4)$/.test(url):\n        media = document.createElement(\"video\");\n        media.setAttribute(\"controls\", true);\n        break;\n      case /\\.(pdf)$/.test(url):\n        media = document.createElement(\"iframe\");\n        break;\n      case /\\.(jpg|jpeg|png|bmp|webp|gif|svg)$/.test(url):\n      default:\n        // default displays also thumbnails that do not have an extension\n        // TODO: this is a dirty trick\n        media = document.createElement(\"img\");\n    }\n    media.classList.add(\"nlg-media\");\n    if (side) {\n      media.classList.add(`nlg-${  side}`);\n    }\n    nlg.bodyStyle = document.body.style.cssText;\n    document.body.style.cssText = \"overflow: hidden\";\n    if (!keepBackground) {\n      let modalBackground = document.createElement(\"div\");\n      modalBackground.id = \"nlg-modal-bg\";\n      modalBackground.addEventListener(\"click\", e => {\n        if (e.currentTarget != e.target) {\n          return;\n        }\n        nlg.hide();\n      });\n\n      let close = document.createElement(\"a\");\n      close.id = \"nlg-close\";\n      close.innerHTML = \"&times;\";\n      close.addEventListener(\"click\", nlg.hide);\n      nlg.keyPressClose = e =>\n        (e.key == \"Escape\" || e.code == \"Escape\") && nlg.hide();\n      window.addEventListener(\"keydown\", nlg.keyPressClose);\n      document.body.appendChild(close);\n      document.body.appendChild(modalBackground);\n    }\n    let spinner = document.createElement(\"div\");\n    spinner.classList.add(\"spinner\");\n    for (let i = 0; i < 5; i++) {\n      spinner.appendChild(document.createElement(\"div\"));\n    }\n    setTimeout(() => {\n      let spinner = document.querySelector(\"#nlg-modal-bg .spinner\");\n      if (spinner) {\n        spinner.style.opacity = 1;\n      }\n    }, 500);\n    if (document.getElementById(\"nlg-modal-bg\")) {\n      document.getElementById(\"nlg-modal-bg\").appendChild(spinner);\n    }\n    let modal = document.createElement(\"div\");\n    modal.id = \"nlg-modal\";\n    let mediaIsLoadedFn = () => {\n      if (!document.getElementById(\"nlg-modal-bg\")) {\n        nlg.hide();\n        return;\n      }\n      let spinner = document.querySelector(\"#nlg-modal-bg .spinner\");\n      if (spinner) {\n        spinner.outerHTML = \"\";\n      }\n      if (e.dataset[\"origin\"]) {\n        let downloadBtn = document.createElement(\"a\");\n        downloadBtn.id = \"nlg-download\";\n        downloadBtn.href = e.dataset.origin;\n        downloadBtn.target = \"_blank\";\n        downloadBtn.innerHTML = `&#8615;`;\n        downloadBtn.download = (new URL(e.dataset.origin)).pathname.split(\"/\").slice(-1);\n        document.body.appendChild(downloadBtn);\n      }\n      let w = media.tagName == \"VIDEO\" ? media.videoWidth : media.width;\n      let h = media.tagName == \"VIDEO\" ? media.videoHeight : media.height;\n      let ratio = media.tagName == \"IFRAME\" ? 9/16 : w / h;\n      media.width = Math.min(document.body.clientWidth, w);\n      media.height = Math.min(document.body.clientHeight, media.width / ratio);\n      media.width = media.height * ratio;\n      if (media.tagName == \"IFRAME\") {\n        media.height = document.body.clientHeight - 10;\n        media.width = Math.max(document.body.clientWidth - 200, document.body.clientWidth * .8);\n      }\n\n      let currentIndex = nlg.list.findIndex(\n        e => url === (e.dataset.src || e.src || e.href)\n      );\n      let nextElmt = nlg.list[currentIndex + 1];\n      let prevElmt = nlg.list[currentIndex - 1];\n      if (nextElmt) {\n        let next = document.createElement(\"a\");\n        next.classList.add(\"nlg-next\");\n        next.innerHTML = \"&#10095;\";\n        let nextFn = () => {\n          nlg.moveLeft();\n          setTimeout(() => {\n            nlg.hide(true);\n            nlg.show(nextElmt, true, \"right\");\n          }, 300);\n        };\n        next.addEventListener(\"click\", nextFn);\n        nlg.keyPressRight = e =>\n          (e.key == \"ArrowRight\" || e.code == \"ArrowRight\") && nextFn(e);\n        window.addEventListener(\"keydown\", nlg.keyPressRight);\n        modal.appendChild(next);\n      }\n      if (prevElmt) {\n        let prev = document.createElement(\"a\");\n        prev.innerHTML = \"&#10094;\";\n        prev.classList.add(\"nlg-prev\");\n        let prevFn = () => {\n          nlg.moveRight();\n          setTimeout(() => {\n            nlg.hide(true);\n            nlg.show(prevElmt, true, \"left\");\n          }, 300);\n        };\n        prev.addEventListener(\"click\", prevFn);\n        nlg.keyPressLeft = e =>\n          (e.key == \"ArrowLeft\" || e.code == \"ArrowLeft\") && prevFn(e);\n        window.addEventListener(\"keydown\", nlg.keyPressLeft);\n        modal.appendChild(prev);\n      }\n      modal.style.cssText = `opacity: 1;`;\n      setTimeout(nlg.center, 1);\n    };\n    media.addEventListener(\"load\", mediaIsLoadedFn);\n    media.addEventListener(\"loadeddata\", mediaIsLoadedFn);\n    modal.addEventListener(\"click\", e => {\n      if (e.currentTarget != e.target) {\n        return;\n      }\n      nlg.hide();\n    });\n    modal.appendChild(media);\n    document.body.appendChild(modal);\n    media.src = url;\n    if (media.tagName == \"VIDEO\") {\n      media.play();\n    }\n  },\n  hide: (keepBackground = false) => {\n    if (document.getElementById(\"nlg-modal\")) {\n      window.removeEventListener(\"keydown\", nlg.keyPressRight);\n      window.removeEventListener(\"keydown\", nlg.keyPressLeft);\n      document.body.style.cssText = nlg.bodyStyle;\n      document.getElementById(\"nlg-modal\").outerHTML = \"\";\n      if (document.getElementById(\"nlg-download\")) {\n        document.getElementById(\"nlg-download\").outerHTML = \"\";\n      }\n      if (keepBackground != true) {\n        (document.querySelector(\"#nlg-close\") || {}).outerHTML = \"\";\n        (document.getElementById(\"nlg-modal-bg\") || {}).outerHTML = \"\";\n        window.removeEventListener(\"keydown\", nlg.keyPressClose);\n      }\n    }\n  },\n  moveLeft: () =>\n    document.querySelector(\"#nlg-modal > .nlg-media\").classList.add(\"nlg-left\"),\n  moveRight: () =>\n    document\n      .querySelector(\"#nlg-modal > .nlg-media\")\n      .classList.add(\"nlg-right\"),\n  center: () => {\n    let media = document.querySelector(\"#nlg-modal > .nlg-media\");\n    media.classList.remove(\"nlg-right\");\n    media.classList.remove(\"nlg-left\");\n  }\n};\nexport default nlg;\n"],"names":["nlg","list","bodyStyle","nlgStyles","preventDefault","body","clientWidth","document","window","ctrlKey","removeEventListener","e","currentTarget","getAttribute","show","start","stop","forEach","elm","$fe2a37fb9d1f94dc$var$nlg","clickFn","setTimeout","querySelectorAll","id","addEventListener","find","push","keepBackground","side","createElement","url","dataset","test","src","href","media","setAttribute","classList","modalBackground","target","style","cssText","close","keyPressClose","appendChild","innerHTML","spinner","hide","key","code","querySelector","getElementById","modal","i","mediaIsLoadedFn","downloadBtn","download","URL","w","tagName","h","origin","ratio","Math","clientHeight","width","slice","height","max","currentIndex","findIndex","nextElmt","prevElmt","next","moveLeft","add","nextFn","keyPressRight","prev","prevFn","keyPressLeft","center","play","outerHTML","remove","moveRight"],"version":3,"file":"nlg.41672c04.js.map"}