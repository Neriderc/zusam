{"version":3,"sources":["../src/options.js","../src/constants.js","../src/create-element.js","../src/component.js","../src/render.js","../src/create-context.js","../src/util.js","../src/diff/children.js","../src/diff/props.js","../src/diff/index.js","../src/clone-element.js","../src/diff/catch-error.js","../src/index.js","../src/PureComponent.js","../src/memo.js","../src/forwardRef.js","../src/Children.js","../src/suspense.js","../src/suspense-list.js","../src/portals.js","../src/events.js","core/alert.js","core/me.js","core/lang.js","core/router.js","core/util.js","core/http.js","core/cache.js","core/index.js","components/fa-icon.component.js","components/search.component.js","components/groups-dropdown-navbar.component.js","components/notification.component.js","components/notifications-dropdown-navbar.component.js","components/navbar.component.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/bundle-loader.js","message/file-grid.component.js","message/message-head.component.js","message/message-footer.component.js","message/embeds/twitch-embed.component.js","message/embeds/bandcamp-embed.component.js","message/embeds/generic-embed.component.js","message/embed-block.component.js","message/message-body.component.js","message/writer.component.js","message/message-child.component.js","message/message-children.component.js","message/message-parent.component.js","message/message-preview.component.js","message/message-search-result.component.js","message/index.js","components/create-group.component.js","components/group-search.component.js","components/group-board.component.js","settings/user-settings.component.js","settings/group-settings.component.js","settings/settings.component.js","components/share.component.js","components/main-content.component.js","outside/login.component.js","outside/reset-password.component.js","outside/signup.component.js","outside/stop-notification-emails.component.js","outside/public.component.js","outside/index.js","app.js","../node_modules/parcel-bundler/src/builtins/loaders/browser/js-loader.js"],"names":["options","isValidElement","q","defer","prevDebounce","IS_HYDRATE","i","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","normalizedProps","arguments","length","push","defaultProps","createVNode","key","ref","vnode","_children","_parent","_depth","_dom","_lastDomChild","_component","constructor","createRef","Fragment","Component","context","getDomSibling","childIndex","indexOf","sibling","updateParentDomPointers","child","base","enqueueRender","c","_dirty","debounceRendering","process","p","component","commitQueue","newDom","oldDom","parentDom","sort","a","b","_vnode","pop","_parentDom","diff","_context","ownerSVGElement","commitRoot","diffChildren","newParentVNode","oldParentVNode","isSvg","excessDomChildren","isHydrating","j","oldVNode","sibDom","firstChildDom","refs","oldChildren","oldChildrenLength","toChildArray","childVNode","undefined","outer","appendChild","nextSibling","insertBefore","value","unmount","applyRef","callback","flattened","Array","isArray","diffProps","dom","newProps","oldProps","hydrate","setProperty","setStyle","style","test","name","oldValue","s","useCapture","nameLower","cssText","replace","toLowerCase","slice","addEventListener","eventProxy","_listeners","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","e","event","newVNode","tmp","isNew","oldState","snapshot","clearProcessingException","provider","cctx","newType","_diff","contextType","_id","_defaultValue","_processingException","_pendingError","prototype","render","doRender","sub","state","_renderCallbacks","_nextState","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","_force","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","_render","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","_catchError","root","_commit","some","cb","call","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","checked","current","parentVNode","skipRemove","r","componentWillUnmount","this","replaceNode","_root","cloneElement","createContext","defaultValue","ctx","Consumer","Provider","subs","_this","_props","old","splice","error","getDerivedStateFromError","setState","componentDidCatch","update","forceUpdate","Promise","then","bind","resolve","setTimeout","currentIndex","currentComponent","prevRaf","afterPaintEffects","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","getHookState","index","_hook","hooks","__hooks","_list","_pendingEffects","useState","initialState","useReducer","invokeOrReturn","reducer","init","hookState","_value","action","nextValue","useEffect","args","argsChanged","_args","useLayoutEffect","useRef","initialValue","useMemo","useImperativeHandle","createHandle","concat","factory","_factory","useCallback","useContext","useDebugValue","formatter","flushAfterPaintEffects","forEach","invokeCleanup","invokeEffect","hook","_cleanup","result","oldArgs","newArgs","arg","f","requestAnimationFrame","raf","done","clearTimeout","timeout","cancelAnimationFrame","window","filter","shallowDiffers","PureComponent","isPureReactComponent","memo","comparer","shouldUpdate","nextProps","updateRef","Memoed","isReactComponent","displayName","_forwarded","oldVNodeHook","forwardRef","fn","Forwarded","clone","mapFn","map","Children","count","only","Error","toArray","oldCatchError","detachedClone","Suspense","_suspensions","_detachOnNextRender","suspended","_suspended","lazy","loader","prom","Lazy","exports","default","SuspenseList","_next","_map","_childDidSuspend","promise","suspendingComponent","resolved","onResolved","onSuspensionComplete","_suspendedComponentWillUnmount","fallback","list","delete","revealOrder","size","delegated","get","unsuspend","wrappedUnsuspend","Map","reverse","set","ContextProvider","Portal","container","wrap","_container","_temp","_unmount","_wrap","_hasMounted","createPortal","CAMEL_PROPS","REACT_ELEMENT_TYPE","Symbol","for","parent","firstChild","preactRender","oldEventHook","setSafeDescriptor","proto","Object","defineProperty","configurable","v","persist","nativeEvent","classNameDescriptor","class","$$typeof","shouldSanitize","attrs","multiple","selected","className","enumerable","ondoubleclick","ondblclick","onbeforeinput","onchange","normalized","oninput","_patchedLifecycles","version","createFactory","element","preactCloneElement","apply","unmountComponentAtNode","findDOMNode","unstable_batchedUpdates","alert","remove","id","getElementById","outerHTML","add","text","alertStyle","countdown","alertNode","hash","classList","body","str","charCodeAt","me","http","notifications","loadNotifications","fetchDict","dispatchEvent","CustomEvent","matchNotification","notif","target","fromMessage","n","removeMatchingNotifications","_","all","lang","dict","possibleLang","getDefaultLang","querySelector","content","getCurrentLang","t","params","keys","getOwnPropertyNames","isNaN","match","rid","router","route","backUrl","backUrlPrompt","entityUrl","entityType","search","entity","isValidUrl","url","URL","getSubpath","baseURI","pathname","toApp","location","origin","removeSubpath","path","RegExp","getParam","param","searchParams","substring","res","split","find","getSegments","isOutside","includes","isEntity","navigate","cache","console","warn","util","getId","group","catch","history","replaceState","pushState","reset","href","apiKey","post","user","groups","sync","onClick","newTab","preventDefault","stopPropagation","closest","getAttribute","startsWith","targetUrl","host","ctrlKey","open","getElementsByClassName","urlRegExp","getUrl","txt","link","endsWith","humanFullDate","timestamp","d","Date","getTime","getTimezoneOffset","toISOString","humanTime","duration","Math","abs","round","now","floor","thumbnail","width","height","crop","defaultAvatar","sendFile","formData","loadFn","progressFn","errorFn","xhr","XMLHttpRequest","setRequestHeader","status","JSON","parse","response","statusText","upload","onprogress","loaded","total","send","err","nocache","h","fetch","method","headers","Headers","ok","json","contentType","request","put","fetchOptions","stringify","exception","message","reject","events","register","localStorage","removeItem","cacheDuration","persistant","storageBox","setItem","getItem","resetCache","clear","_alert","_cache","_http","_me","_router","_util","_lang","FaIcon","icon","family","Search","evt","searchTerms","normalize","group_id","encodeURIComponent","join","decodeURIComponent","GroupsDropdownNavbar","relatedTarget","currentTarget","toggle","Notification","getMiniatureSrc","setMiniatureOnError","getAction","getTarget","fromUser","avatar","src","getObject","fromGroup","author","createdAt","NotificationsDropdownNavbar","Navbar","clickBackButton","confirm","bundleURL","getBundleURLCached","getBundleURL","matches","stack","getBaseURL","require","loadBundlesLazy","bundles","code","LazyPromise","loadBundles","loadBundle","bundleLoaders","registerBundleLoader","module","load","bundle","lastIndexOf","bundleLoader","executor","onSuccess","onError","FileGrid","toggleFile","files","fileIndex","renderFile","file","miniature","filePath","contentUrl","inWriter","removed","progress","nlg","start","MessageHead","isChild","MessageFooter","editMessage","isPublic","deleteMessage","openPublicLink","shareMessage","isInFront","publishInGroup","TwitchEmbed","embedUrl","splits","BandCampEmbed","GenericEmbed","revealed","playBtnClass","preview","EmbedBlock","execute","eval","script","async","head","embedContainer","from","getElementsByTagName","getPreview","MessageBody","displayMessageText","trim","shift","gotPreview","previewUrl","prevState","title","Writer","sendMessage","genPreview","postMessage","putMessage","onKeyPress","inputImages","inputVideo","uploadFile","uploadNextImage","writerId","doGenPreview","scrollHeight","links","messageId","msg","sending","detail","lastActivityDate","input","display","accept","iterator","click","placeholderIndex","it","next","imageService","handleImage","FormData","append","focus","reduce","cancel","MessageChild","loadMessage","cancelEdit","onEditMessage","processEmbed","displayedChildren","edit","isRemoved","displayWriter","scrollTo","msgElement","contains","scrollIntoView","block","behavior","hidden","MessageChildren","lastDisplayedChild","firstDisplayedChild","displayPreviousChildren","m","displayNextChildren","MessageParent","onNewChild","msgIndex","findIndex","max","min","token","resetGroupDisplay","newMsg","MessagePreview","getAvatar","tabindex","MessageSearchResult","getMiniature","getLink","displayMessageTitle","words","k","lines","hashtags","_FileGrid","_MessageBody","_MessageFooter","_MessageParent","_MessageChild","_MessageChildren","_MessageHead","_MessagePreview","_MessageSearchResult","_EmbedBlock","CreateGroup","postNewGroup","secretKey","GroupSearch","groupId","screen","messages","totalMessages","loadMessages","getGroupName","g","GroupBoard","scrollTop","pageYOffset","page","scroll_cooldown","onScroll","new_loaded","msgList","getComputedStyle","UserSettings","destroyAccount","inputAvatar","updateSettings","img","Image","onload","w","naturalWidth","naturalHeight","nw","nh","resize","blob","createObjectURL","login","password","notification_emails","default_group","GroupSettings","leaveGroup","leave","resetSecretKey","hydratedUsers","protocol","hostname","users","Settings","Share","currentUrl","groupSelect","MainContent","Login","showAlert","sendLoginForm","sendPasswordReset","showPasswordReset","mail","api_key","showResetPassword","zusam_logo","ResetPassword","sendNewPassword","passwordConfirmation","Signup","inviteKey","sendSignupForm","invite_key","StopNotificationEmails","Public","_Login","_ResetPassword","_Signup","_StopNotificationEmails","_Public","App","onRouterStateChange","navigator","serviceWorker","charset","onerror"],"mappings":";AAGMA,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,OAAAA,EAAAA,QAAAA,QAAAA,EAAAA,QAAAA,EAAAA,QAAAA,cAAAA,EAAAA,QAAAA,SAAAA,EAAAA,QAAAA,UAAAA,EAAAA,QAAAA,UAAAA,EAAAA,QAAAA,aAAAA,EAAAA,QAAAA,cAAAA,EAAAA,QAAAA,aAAAA,EAAAA,QAAAA,SAAAA,EAAAA,QAAAA,QAAAA,QAAAA,oBAAAA,ECHC,IDGDA,EE0FOC,ECsETC,EAQEC,EAcFC,ECpLEC,ECHKC,EJFEC,EAAY,GACZC,EAAY,GACZC,EAAqB,8DKK3B,SAASC,EAAOC,EAAKC,GACtB,IAAA,IAAIN,KAAKM,EAAOD,EAAIL,GAAKM,EAAMN,GAAAA,OAAAA,EAU9B,SAASO,EAAWC,GACtBC,IAAAA,EAAaD,EAAKC,WAClBA,GAAYA,EAAWC,YAAYF,GJVxC,SAAgBG,EAAcC,EAAMN,EAAOO,GAEzCb,IAAAA,EAAAA,EAAAA,UADGc,EAAkB,GAEjBd,IAAAA,KAAKM,EACC,QAANN,GAAqB,QAANA,IAAac,EAAgBd,GAAKM,EAAMN,IAGxDe,GAAAA,UAAUC,OAAS,EAAA,IACtBH,EAAW,CAACA,GAEPb,EAAI,EAAGA,EAAIe,UAAUC,OAAQhB,IACjCa,EAASI,KAAKF,EAAUf,IAGV,GAAA,MAAZa,IACHC,EAAgBD,SAAWA,GAKR,mBAATD,GAA4C,MAArBA,EAAKM,aAAAA,IACjClB,KAAKY,EAAKM,kBAAAA,IACVJ,EAAgBd,KACnBc,EAAgBd,GAAKY,EAAKM,aAAalB,IAKnCmB,OAAAA,EACNP,EACAE,EACAR,GAASA,EAAMc,IACfd,GAASA,EAAMe,KAgBjB,SAAgBF,EAAYP,EAAMN,EAAOc,EAAKC,GAGvCC,IAAAA,EAAQ,CACbV,KAAAA,EACAN,MAAAA,EACAc,IAAAA,EACAC,IAAAA,EACAE,IAAW,KACXC,GAAS,KACTC,IAAQ,EACRC,IAAM,KACNC,IAAe,KACfC,IAAY,KACZC,iBAAAA,GAGGnC,OAAAA,EAAQ4B,OAAO5B,EAAQ4B,MAAMA,GAE1BA,EAGR,SAAgBQ,IACR,MAAA,GAGD,SAASC,EAASzB,GACjBA,OAAAA,EAAMO,SCzEP,SAASmB,EAAU1B,EAAO2B,GAC3B3B,KAAAA,MAAQA,EAAAA,KACR2B,QAAUA,EAsET,SAASC,EAAcZ,EAAOa,GAClB,GAAA,MAAdA,EAAAA,OAEIb,EAAME,GACVU,EAAcZ,EAAME,GAASF,EAAME,GAAQD,IAAUa,QAAQd,GAAS,GACtE,KAAA,IAAA,IAGAe,EACGF,EAAab,EAAMC,IAAUP,OAAQmB,IAAAA,GAG5B,OAFfE,EAAUf,EAAMC,IAAUY,KAEa,MAAhBE,EAAQX,IAAAA,OAIvBW,EAAQX,IASY,MAAA,mBAAfJ,EAAMV,KAAsBsB,EAAcZ,GAAS,KAmClE,SAASgB,EAAwBhB,GAGtBtB,IAAAA,EACJuC,EAHyB,GAAA,OAA1BjB,EAAQA,EAAME,KAAwC,MAApBF,EAAMM,IAAoB,CAChEN,IAAAA,EAAMI,IAAOJ,EAAMM,IAAWY,KAAO,KAC5BxC,EAAI,EAAGA,EAAIsB,EAAMC,IAAUP,OAAQhB,IAAAA,GAE9B,OADTuC,EAAQjB,EAAMC,IAAUvB,KACO,MAAduC,EAAMb,IAAc,CACxCJ,EAAMI,IAAOJ,EAAMM,IAAWY,KAAOD,EAAMb,IAAAA,MAKtCY,OAAAA,EAAwBhB,IAoC1B,SAASmB,EAAcC,KAE1BA,EAAEC,MAAWD,EAAEC,KAAAA,IAAgC,IAAd/C,EAAEqB,KAAKyB,IAC1C5C,IAAiBJ,EAAQkD,sBAEzB9C,EAAeJ,EAAQkD,oBACN/C,GAAOgD,GAK1B,SAASA,IACJC,IAAAA,EAvFoBC,EAMnBC,EACAC,EAND3B,EACH4B,EACAC,EAqFDvD,IAAAA,EAAEwD,KAAK,SAACC,EAAGC,GAAMA,OAAAA,EAAEC,IAAO9B,IAAS4B,EAAEE,IAAO9B,MACpCqB,EAAIlD,EAAE4D,OAETV,EAAEH,MArFFK,OAAAA,EACAC,OAAAA,EALJC,GADG5B,GADoByB,EA2FOD,GA1FTS,KACN7B,KACfyB,EAAYJ,EAAUU,OAGlBT,EAAc,GACdC,EAASS,EACZP,EACA7B,EACAlB,EAAO,GAAIkB,GACXyB,EAAUY,SAAAA,IACVR,EAAUS,gBACV,KACAZ,EACU,MAAVE,EAAiBhB,EAAcZ,GAAS4B,GAEzCW,EAAWb,EAAa1B,GAEpB2B,GAAUC,GACbZ,EAAwBhB,KI/G3B,SAAgBwC,EACfX,EACAY,EACAC,EACA/B,EACAgC,EACAC,EACAlB,EACAE,EACAiB,GAEInE,IAAAA,EAAGoE,EAAGC,EAAUpB,EAAQqB,EAAQC,EAAeC,EAI/CC,EAAeT,GAAkBA,EAAezC,KAAcrB,EAE9DwE,EAAoBD,EAAYzD,OAMhCkC,GAAAA,GAAUjD,IAEZiD,EADwB,MAArBgB,EACMA,EAAkB,GACjBQ,EACDxC,EAAc8B,EAAgB,GAE9B,MAIXhE,EAAI,EACJ+D,EAAexC,IAAYoD,EAC1BZ,EAAexC,IACf,SAAAqD,GACmB,GAAA,MAAdA,EAAoB,CACvBA,GAAAA,EAAWpD,GAAUuC,EACrBa,EAAWnD,IAASsC,EAAetC,IAAS,EAS9B,QAHd4C,EAAWI,EAAYzE,KAIrBqE,GACAO,EAAWxD,KAAOiD,EAASjD,KAC3BwD,EAAWhE,OAASyD,EAASzD,KAE9B6D,EAAYzE,QAAAA,OAAK6E,IAIZT,EAAI,EAAGA,EAAIM,EAAmBN,IAAK,CAAA,IACvCC,EAAWI,EAAYL,KAKtBQ,EAAWxD,KAAOiD,EAASjD,KAC3BwD,EAAWhE,OAASyD,EAASzD,KAC5B,CACD6D,EAAYL,QAAAA,EAAKS,MAGlBR,EAAW,KAObpB,GAAAA,EAASS,EACRP,EACAyB,EALDP,EAAWA,GAAYpE,EAOtBgC,EACAgC,EACAC,EACAlB,EACAE,EACAiB,IAGIC,EAAIQ,EAAWvD,MAAQgD,EAAShD,KAAO+C,IACtCI,IAAMA,EAAO,IACdH,EAAShD,KAAKmD,EAAKvD,KAAKoD,EAAShD,IAAK,KAAMuD,GAChDJ,EAAKvD,KAAKmD,EAAGQ,EAAWhD,KAAcqB,EAAQ2B,IAIjC,MAAV3B,EAAgB,CACE,GAAA,MAAjBsB,IACHA,EAAgBtB,GAGe,MAA5B2B,EAAWjD,IAIdsB,EAAS2B,EAAWjD,IAKpBiD,EAAWjD,IAAgB,UACrB,GACNuC,GAAqBG,GACrBpB,GAAUC,GACW,MAArBD,EAAOxC,WACN,CAKDqE,EAAO,GAAc,MAAV5B,GAAkBA,EAAOzC,aAAe0C,EAClDA,EAAU4B,YAAY9B,OAChB,CAGLqB,IAAAA,EAASpB,EAAQkB,EAAI,GACpBE,EAASA,EAAOU,cAAgBZ,EAAIM,EACrCN,GAAK,EAAA,GAEDE,GAAUrB,EAAAA,MACP6B,EAGR3B,EAAU8B,aAAahC,EAAQC,GAa5Ba,UAAAA,EAAenD,OAClBuC,EAAU+B,MAAQ,IAIpBhC,EAASD,EAAO+B,YAEkB,mBAAvBjB,EAAenD,OAKzBmD,EAAepC,IAAgBsB,IAKlCjD,OAAAA,IACO4E,IAITb,EAAerC,IAAO6C,EAGG,MAArBL,GAA4D,mBAAxBH,EAAenD,KAAAA,IACjDZ,EAAIkE,EAAkBlD,OAAQhB,KACN,MAAxBkE,EAAkBlE,IAAYO,EAAW2D,EAAkBlE,IAK5DA,IAAAA,EAAI0E,EAAmB1E,KACL,MAAlByE,EAAYzE,IAAYmF,EAAQV,EAAYzE,GAAIyE,EAAYzE,IAI7DwE,GAAAA,EAAAA,IACExE,EAAI,EAAGA,EAAIwE,EAAKxD,OAAQhB,IAC5BoF,EAASZ,EAAKxE,GAAIwE,IAAOxE,GAAIwE,IAAOxE,IAcvC,SAAgB2E,EAAa9D,EAAUwE,EAAUC,GAC/B,GAAA,MAAbA,IAAmBA,EAAY,IAEnB,MAAZzE,GAAwC,kBAAbA,EAC1BwE,GAAUC,EAAUrE,KAAKoE,EAAS,YAChC,GAAIE,MAAMC,QAAQ3E,GAAAA,IACnB,IAAIb,EAAI,EAAGA,EAAIa,EAASG,OAAQhB,IACpC2E,EAAa9D,EAASb,GAAIqF,EAAUC,QAKrCA,EAAUrE,KAHCoE,EAGIA,EADe,iBAAbxE,GAA6C,iBAAbA,EACzBM,EAAY,KAAMN,EAAU,KAAM,MAC/B,MAAjBA,EAASa,KAAuC,MAAvBb,EAASe,IAElCT,EAAYN,EAASD,KAAMC,EAASP,MAAOO,EAASO,IAAK,MAG3CP,GARTA,GAWTyE,OAAAA,ECxOD,SAASG,EAAUC,EAAKC,EAAUC,EAAU3B,EAAO4B,GACrD7F,IAAAA,EAECA,IAAAA,KAAK4F,EACH5F,KAAK2F,GACVG,EAAYJ,EAAK1F,EAAG,KAAM4F,EAAS5F,GAAIiE,GAIpCjE,IAAAA,KAAK2F,EAENE,GAAiC,mBAAfF,EAAS3F,IACvB,UAANA,GACM,YAANA,GACA4F,EAAS5F,KAAO2F,EAAS3F,IAEzB8F,EAAYJ,EAAK1F,EAAG2F,EAAS3F,GAAI4F,EAAS5F,GAAIiE,GAKjD,SAAS8B,EAASC,EAAO5E,EAAK8D,GACzB9D,MAAAA,EAAI,GACP4E,EAAMF,YAAY1E,EAAK8D,GAKvBc,EAAM5E,GAHW,iBAAV8D,IAAAA,IACP/E,EAAmB8F,KAAK7E,GAEX8D,EAAQ,KACF,MAATA,EACG,GAEAA,EAYf,SAASY,EAAYJ,EAAKQ,EAAMhB,EAAOiB,EAAUlC,GAWzCmC,IAAAA,EAWKpG,EAQAA,EAUPqG,EACAC,EAxCDrC,GAAAA,EACU,cAATiC,IACHA,EAAO,SAEW,UAATA,IACVA,EAAO,aAGK,QAATA,GAA2B,aAATA,QACf,GAAa,UAATA,EACJE,GAAAA,EAAIV,EAAIM,MAEO,iBAAVd,EACVkB,EAAEG,QAAUrB,MACN,CACkB,GAAA,iBAAbiB,IACVC,EAAEG,QAAU,GACZJ,EAAW,MAGRA,EAAAA,IACMnG,KAAKmG,EACPjB,GAASlF,KAAKkF,GACnBa,EAASK,EAAGpG,EAAG,IAKdkF,GAAAA,EAAAA,IACMlF,KAAKkF,EACRiB,GAAYjB,EAAMlF,KAAOmG,EAASnG,IACtC+F,EAASK,EAAGpG,EAAGkF,EAAMlF,QAOL,MAAZkG,EAAK,IAA0B,MAAZA,EAAK,IAC5BG,EAAaH,KAAUA,EAAOA,EAAKM,QAAQ,WAAY,KACvDF,EAAYJ,EAAKO,cACrBP,GAAQI,KAAaZ,EAAMY,EAAYJ,GAAMQ,MAAM,GAE/CxB,GACEiB,GAAUT,EAAIiB,iBAAiBT,EAAMU,EAAYP,IACrDX,EAAImB,IAAenB,EAAImB,EAAa,KAAKX,GAAQhB,GAElDQ,EAAIoB,oBAAoBZ,EAAMU,EAAYP,IAGlC,SAATH,GACS,YAATA,GAGS,SAATA,GACS,SAATA,IACCjC,GACDiC,KAAQR,EAERA,EAAIQ,GAAiB,MAAThB,EAAgB,GAAKA,EAEhB,mBAAVA,GACE,4BAATgB,IAEIA,KAAUA,EAAOA,EAAKM,QAAQ,WAAY,KAChC,MAATtB,IAAAA,IAAiBA,EACpBQ,EAAIqB,kBACH,+BACAb,EAAKO,eAGNf,EAAIsB,eACH,+BACAd,EAAKO,cACLvB,GAGiB,MAATA,IAAAA,IAAiBA,EAC3BQ,EAAIuB,gBAAgBf,GAEpBR,EAAIwB,aAAahB,EAAMhB,IAU1B,SAAS0B,EAAWO,GACdN,KAAAA,EAAWM,EAAEvG,MAAMlB,EAAQ0H,MAAQ1H,EAAQ0H,MAAMD,GAAKA,GC5H5D,SAAgBzD,EACfP,EACAkE,EACAhD,EACApC,EACAgC,EACAC,EACAlB,EACAE,EACAiB,GAEImD,IAAAA,EAWE5E,EAAG6E,EAAO3B,EAAU4B,EAAUC,EAAUC,EACxC/B,EAKAgC,EACAC,EAjBLC,EAAUR,EAASzG,KAAAA,QAAAA,IAIhByG,EAASxF,YAA2B,OAAO,MAE1CyF,EAAM5H,EAAQoI,MAAQR,EAAID,GAAAA,IAG9BvC,EAAO,GAAuB,mBAAZ+C,EAAwB,CAErClC,GAAAA,EAAW0B,EAAS/G,MAKpBqH,GADJL,EAAMO,EAAQE,cACQ9F,EAAQqF,EAAIU,KAC9BJ,EAAON,EACRK,EACCA,EAASrH,MAAM4E,MACfoC,EAAIW,GACLhG,EAGCoC,EAASzC,IAEZ8F,GADAhF,EAAI2E,EAASzF,IAAayC,EAASzC,KACNsG,GAAuBxF,EAAEyF,KAGlD,cAAeN,GAAWA,EAAQO,UAAUC,OAC/ChB,EAASzF,IAAac,EAAI,IAAImF,EAAQlC,EAAUiC,IAEhDP,EAASzF,IAAac,EAAI,IAAIV,EAAU2D,EAAUiC,GAClDlF,EAAEb,YAAcgG,EAChBnF,EAAE2F,OAASC,GAERX,GAAUA,EAASY,IAAI7F,GAE3BA,EAAEpC,MAAQqF,EACLjD,EAAE8F,QAAO9F,EAAE8F,MAAQ,IACxB9F,EAAET,QAAU2F,EACZlF,EAAEiB,IAAW1B,EACbsF,EAAQ7E,EAAEC,KAAAA,EACVD,EAAE+F,IAAmB,IAIF,MAAhB/F,EAAEgG,MACLhG,EAAEgG,IAAahG,EAAE8F,OAEsB,MAApCX,EAAQc,2BACPjG,EAAEgG,KAAchG,EAAE8F,QACrB9F,EAAEgG,IAAatI,EAAO,GAAIsC,EAAEgG,MAG7BtI,EACCsC,EAAEgG,IACFb,EAAQc,yBAAyBhD,EAAUjD,EAAEgG,OAI/C9C,EAAWlD,EAAEpC,MACbkH,EAAW9E,EAAE8F,MAGTjB,EAEkC,MAApCM,EAAQc,0BACgB,MAAxBjG,EAAEkG,oBAEFlG,EAAEkG,qBAGwB,MAAvBlG,EAAEmG,mBACLnG,EAAE+F,IAAiBxH,KAAKyB,EAAEmG,uBAErB,CAE+B,GAAA,MAApChB,EAAQc,0BACRhD,IAAaC,GACkB,MAA/BlD,EAAEoG,2BAEFpG,EAAEoG,0BAA0BnD,EAAUiC,IAIrClF,EAAEqG,KACwB,MAA3BrG,EAAEsG,wBAAAA,IACFtG,EAAEsG,sBAAsBrD,EAAUjD,EAAEgG,IAAYd,GAC/C,CACDlF,IAAAA,EAAEpC,MAAQqF,EACVjD,EAAE8F,MAAQ9F,EAAEgG,IACZhG,EAAEC,KAAAA,EACFD,EAAEa,IAAS8D,EACXA,EAAS3F,IAAO2C,EAAS3C,IACzB2F,EAAS9F,IAAY8C,EAAS9C,IAC1BmB,EAAE+F,IAAiBzH,QACtBgC,EAAY/B,KAAKyB,GAEb4E,EAAM,EAAGA,EAAMD,EAAS9F,IAAUP,OAAQsG,IAC1CD,EAAS9F,IAAU+F,KACtBD,EAAS9F,IAAU+F,GAAK9F,GAAU6F,GAG9BvC,MAAAA,EAGHpC,MAAAA,EAAEuG,qBACLvG,EAAEuG,oBAAoBtD,EAAUjD,EAAEgG,IAAYd,GAGnB,MAAxBlF,EAAEwG,oBACLxG,EAAE+F,IAAiBxH,KAAK,WACvByB,EAAEwG,mBAAmBtD,EAAU4B,EAAUC,KAK5C/E,EAAET,QAAU2F,EACZlF,EAAEpC,MAAQqF,EACVjD,EAAE8F,MAAQ9F,EAAEgG,KAEPpB,EAAM5H,EAAQyJ,MAAU7B,EAAID,GAEjC3E,EAAEC,KAAAA,EACFD,EAAEa,IAAS8D,EACX3E,EAAEe,IAAaN,EAEfmE,EAAM5E,EAAE2F,OAAO3F,EAAEpC,MAAOoC,EAAE8F,MAAO9F,EAAET,SAGnCoF,EAAS9F,IAAYoD,EADb,MAAP2C,GAAeA,EAAI1G,MAAQmB,GAAuB,MAAXuF,EAAIlG,IAEtBkG,EAAIhH,MAAMO,SAAWyG,GAGlB,MAArB5E,EAAE0G,kBACLnH,EAAU7B,EAAOA,EAAO,GAAI6B,GAAUS,EAAE0G,oBAGpC7B,GAAsC,MAA7B7E,EAAE2G,0BACf5B,EAAW/E,EAAE2G,wBAAwBzD,EAAU4B,IAGhD1D,EACCX,EACAkE,EACAhD,EACApC,EACAgC,EACAC,EACAlB,EACAE,EACAiB,GAGDzB,EAAEF,KAAO6E,EAAS3F,IAEdgB,EAAE+F,IAAiBzH,QACtBgC,EAAY/B,KAAKyB,GAGdgF,IACHhF,EAAEyF,IAAgBzF,EAAEwF,GAAuB,MAG5CxF,EAAEqG,IAAS,UAEX1B,EAAS3F,IAAO4H,EACfjF,EAAS3C,IACT2F,EACAhD,EACApC,EACAgC,EACAC,EACAlB,EACAmB,IAIGmD,EAAM5H,EAAQ6J,SAASjC,EAAID,GAC/B,MAAOF,GACRzH,EAAQ8J,IAAYrC,EAAGE,EAAUhD,GAG3BgD,OAAAA,EAAS3F,IAQV,SAASmC,EAAWb,EAAayG,GACnC/J,EAAQgK,KAAShK,EAAQgK,IAAQD,EAAMzG,GAE3CA,EAAY2G,KAAK,SAAAjH,GAAAA,IAEfM,EAAcN,EAAE+F,IAChB/F,EAAE+F,IAAmB,GACrBzF,EAAY2G,KAAK,SAAAC,GAChBA,EAAGC,KAAKnH,KAER,MAAOyE,GACRzH,EAAQ8J,IAAYrC,EAAGzE,EAAEa,QAmB5B,SAAS+F,EACR5D,EACA2B,EACAhD,EACApC,EACAgC,EACAC,EACAlB,EACAmB,GAEInE,IAAAA,EASIuC,EAyCHuH,EACAC,EAOO/J,EAzDR4F,EAAWvB,EAAS/D,MACpBqF,EAAW0B,EAAS/G,MAGxB2D,GAAAA,EAA0B,QAAlBoD,EAASzG,MAAkBqD,EAExB,MAAPyB,GAAoC,MAArBxB,EAAAA,IACblE,EAAI,EAAGA,EAAIkE,EAAkBlD,OAAQhB,IAAAA,GAI/B,OAHJuC,EAAQ2B,EAAkBlE,MAIZ,OAAlBqH,EAASzG,KACY,IAAnB2B,EAAMyH,SACNzH,EAAM0H,YAAc5C,EAASzG,MAC/B,CACD8E,EAAMnD,EACN2B,EAAkBlE,GAAK,KAAA,MAMf,GAAA,MAAP0F,EAAa,CACM,GAAA,OAAlB2B,EAASzG,KAAAA,OACLsJ,SAASC,eAAexE,GAEhCD,EAAMzB,EACHiG,SAASE,gBAAgB,6BAA8B/C,EAASzG,MAChEsJ,SAASvJ,cAAc0G,EAASzG,MAEnCsD,EAAoB,KAGC,GAAA,OAAlBmD,EAASzG,KACa,MAArBsD,IACHA,EAAkBA,EAAkB9B,QAAQsD,IAAQ,MAGjDE,IAAaD,IAChBD,EAAI2E,KAAO1E,QAEN,GAAI0B,IAAahD,EAAU,CACR,GAAA,MAArBH,IACHA,EAAoBhE,EAAUwG,MAAMmD,KAAKnE,EAAI4E,aAK1CR,GAFJlE,EAAWvB,EAAS/D,OAASL,GAENsK,wBACnBR,EAAUpE,EAAS4E,yBAIlBpG,EAAa,CACbyB,GAAAA,IAAa3F,EAAAA,IAChB2F,EAAW,GACF5F,EAAI,EAAGA,EAAI0F,EAAI8E,WAAWxJ,OAAQhB,IAC1C4F,EAASF,EAAI8E,WAAWxK,GAAGkG,MAAQR,EAAI8E,WAAWxK,GAAGkF,OAInD6E,GAAWD,KAETC,GAAYD,GAAWC,EAAQU,QAAUX,EAAQW,SACrD/E,EAAIgF,UAAaX,GAAWA,EAAQU,QAAW,KAKlDhF,EAAUC,EAAKC,EAAUC,EAAU3B,EAAOE,GAE1CkD,EAAS9F,IAAY8F,EAAS/G,MAAMO,SAG/BkJ,GACJjG,EACC4B,EACA2B,EACAhD,EACApC,EACkB,kBAAlBoF,EAASzG,MAAmCqD,EAC5CC,EACAlB,EACA/C,EACAkE,GAKGA,IAEH,UAAWwB,QAAAA,IACXA,EAAST,OACTS,EAAST,QAAUQ,EAAIR,QAEvBQ,EAAIR,MAA0B,MAAlBS,EAAST,MAAgB,GAAKS,EAAST,OAGnD,YAAaS,QAAAA,IACbA,EAASgF,SACThF,EAASgF,UAAYjF,EAAIiF,UAEzBjF,EAAIiF,QAAUhF,EAASgF,UAKnBjF,OAAAA,EASR,SAAgBN,EAAS/D,EAAK6D,EAAO5D,GAAAA,IAEjB,mBAAPD,EAAmBA,EAAI6D,GAC7B7D,EAAIuJ,QAAU1F,EAClB,MAAOiC,GACRzH,EAAQ8J,IAAYrC,EAAG7F,IAYzB,SAAgB6D,EAAQ7D,EAAOuJ,EAAaC,GACvCC,IAAAA,EAOArF,EAoBM1F,EA1BNN,GAAAA,EAAQyF,SAASzF,EAAQyF,QAAQ7D,IAEhCyJ,EAAIzJ,EAAMD,MACd+D,EAAS2F,EAAG,KAAMF,GAIdC,GAAoC,mBAAfxJ,EAAMV,OAC/BkK,EAAmC,OAArBpF,EAAMpE,EAAMI,MAG3BJ,EAAMI,IAAOJ,EAAMK,IAAgB,KAEL,OAAzBoJ,EAAIzJ,EAAMM,KAAqB,CAC/BmJ,GAAAA,EAAEC,qBAAAA,IAEJD,EAAEC,uBACD,MAAO7D,GACRzH,EAAQ8J,IAAYrC,EAAG0D,GAIzBE,EAAEvI,KAAOuI,EAAEtH,IAAa,KAGpBsH,GAAAA,EAAIzJ,EAAMC,IAAAA,IACLvB,EAAI,EAAGA,EAAI+K,EAAE/J,OAAQhB,IACzB+K,EAAE/K,IAAImF,EAAQ4F,EAAE/K,GAAI6K,EAAaC,GAInCpF,MAAAA,GAAanF,EAAWmF,GAI7B,SAAS4C,EAAShI,EAAOkI,EAAOvG,GACxBgJ,OAAAA,KAAKpJ,YAAYvB,EAAO2B,GL1ahC,SAAgBoG,EAAO/G,EAAO6B,EAAW+H,GAGpC/G,IAAAA,EACAE,EAKArB,EARAtD,EAAQyL,IAAOzL,EAAQyL,GAAM7J,EAAO6B,GAGpCkB,GADAF,EAAc+G,IAAgBnL,GAE/B,KACCmL,GAAeA,EAAY3J,KAAc4B,EAAU5B,IACvDD,EAAQX,EAAcoB,EAAU,KAAM,CAACT,IAEnC0B,EAAc,GAClBU,EACCP,GACEgB,EAAchB,EAAY+H,GAAe/H,GAAW5B,IAAYD,EAClE+C,GAAYpE,EACZA,OAAAA,IACAkD,EAAUS,gBACVsH,IAAgB/G,EACb,CAAC+G,GACD7G,EACA,KACAnE,EAAUwG,MAAMmD,KAAK1G,EAAUmH,YAClCtH,EACAkI,GAAejL,EACfkE,GAEDN,EAAWb,EAAa1B,GASlB,SAASuE,EAAQvE,EAAO6B,GAC9BkF,EAAO/G,EAAO6B,EAAWpD,GMxCnB,SAASqL,EAAa9J,EAAOhB,GACnCA,OAAAA,EAAQF,EAAOA,EAAO,GAAIkB,EAAMhB,OAAQA,GACpCS,UAAUC,OAAS,IAAGV,EAAMO,SAAWX,EAAUwG,MAAMmD,KAAK9I,UAAW,IACpEI,EACNG,EAAMV,KACNN,EACAA,EAAMc,KAAOE,EAAMF,IACnBd,EAAMe,KAAOC,EAAMD,KLbd,SAASgK,EAAcC,GACvBC,IAAAA,EAAM,GAENtJ,EAAU,CACf+F,IAAK,OAAShI,IACdiI,GAAeqD,EACfE,SAAAA,SAASlL,EAAO2B,GACR3B,OAAAA,EAAMO,SAASoB,IAEvBwJ,SAAAA,SAASnL,GAEDoL,IAAAA,EAAAA,EAAAA,KADFT,OAAAA,KAAK7B,kBACHsC,EAAO,GAAA,KACRtC,gBAAkB,WACtBmC,OAAAA,EAAItJ,EAAQ+F,KAAO2D,EACZJ,GAAAA,KAEHvC,sBAAwB,SAAA4C,GACxBtL,EAAM4E,QAAU0G,EAAO1G,OAC1BwG,EAAK/B,KAAK,SAAAjH,GACTA,EAAET,QAAU2J,EAAO1G,MACnBzC,EAAcC,MAAAA,KAIZ6F,IAAM,SAAA7F,GACVgJ,EAAKzK,KAAKyB,GACNmJ,IAAAA,EAAMnJ,EAAEsI,qBACZtI,EAAEsI,qBAAuB,WACxBU,EAAKI,OAAOJ,EAAKtJ,QAAQM,GAAI,GAC7BmJ,GAAOA,EAAIhC,KAAKnH,MAIZpC,EAAMO,WAIfoB,OAAAA,EAAQuJ,SAASzD,YAAc9F,EAExBA,ELxCFvC,QAAAA,eAAAA,EAAAA,QAAAA,QAAAA,EAAAA,QAAAA,QAAAA,EAAU,CACf8J,IWKM,SAAqBuC,EAAOzK,GAAAA,IAAAA,IAE9ByB,EAEIzB,EAAQA,EAAME,IAAAA,IAChBuB,EAAYzB,EAAMM,OAAgBmB,EAAUmF,GAAAA,IAG9CnF,GAAAA,EAAUlB,aACwC,MAAlDkB,EAAUlB,YAAYmK,yBAEtBjJ,EAAUkJ,SACTlJ,EAAUlB,YAAYmK,yBAAyBD,QAE1C,CAAmC,GAAA,MAA/BhJ,EAAUmJ,kBAAAA,SACpBnJ,EAAUmJ,kBAAkBH,GAItBtJ,OAAAA,EAAeM,EAAUoF,IAAgBpF,GAC/C,MAAOoE,GACR4E,EAAQ5E,EAKL4E,MAAAA,IT0DMpM,QAAAA,eAAAA,EAAiB,SAAA2B,GACpB,OAAA,MAATA,QAAAA,IAAiBA,EAAMO,aCrExBG,EAAUoG,UAAU6D,SAAW,SAASE,EAAQ9G,GAE3Ce,IAAAA,EAEHA,EADG6E,KAAKvC,MAAeuC,KAAKzC,MACxByC,KAAKvC,IAELuC,KAAKvC,IAAatI,EAAO,GAAI6K,KAAKzC,OAGlB,mBAAV2D,IACVA,EAASA,EAAO/F,EAAG6E,KAAK3K,QAGrB6L,GACH/L,EAAOgG,EAAG+F,GAIG,MAAVA,GAEAlB,KAAK1H,MAAAA,KACHwF,KAAAA,EACD1D,GAAU4F,KAAKxC,IAAiBxH,KAAKoE,GACzC5C,EAAcwI,QAShBjJ,EAAUoG,UAAUgE,YAAc,SAAS/G,GACjC9B,KAAAA,MAAAA,KAIHwF,KAAAA,EACD1D,GAAU4F,KAAKxC,IAAiBxH,KAAKoE,GACzC5C,EAAcwI,QAchBjJ,EAAUoG,UAAUC,OAAStG,EAqFzBnC,EAAI,GAQFC,EACa,mBAAXwM,QACJA,QAAQjE,UAAUkE,KAAKC,KAAKF,QAAQG,WACpCC,WCzKE1M,EAAaE,ECHRD,EAAI;;AOiBfN,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,SAAAA,EAAAA,QAAAA,WAAAA,EAAAA,QAAAA,UAAAA,EAAAA,QAAAA,gBAAAA,EAAAA,QAAAA,OAAAA,EAAAA,QAAAA,oBAAAA,EAAAA,QAAAA,QAAAA,EAAAA,QAAAA,YAAAA,EAAAA,QAAAA,WAAAA,EAAAA,QAAAA,cAAAA,EAAAA,IAhBIgN,EAGAC,EAWAC,EAEJlN,EAAAA,QAAAA,UAVImN,EAAoB,GAEpBC,EAAkBpN,EAAQyJ,QAAAA,IAC1B4D,EAAerN,EAAQ6J,QAAAA,OACvByD,EAAYtN,EAAQgK,QAAAA,IACpBuD,EAAmBvN,EAAQyF,QAAAA,QA4D/B,SAAS+H,EAAaC,GACTC,EAAAA,QAAAA,KAAO1N,EAAQ0N,QAAAA,IAAMT,GAM3BU,IAAAA,EACLV,EAAiBW,MAChBX,EAAiBW,IAAU,CAAEC,EAAO,GAAIC,EAAiB,KAEvDL,OAAAA,GAASE,EAAME,EAAMvM,QACxBqM,EAAME,EAAMtM,KAAK,IAEXoM,EAAME,EAAMJ,GAMb,SAASM,EAASC,GACjBC,OAAAA,EAAWC,EAAgBF,GASnC,SAAgBC,EAAWE,EAASH,EAAcI,GAE3CC,IAAAA,EAAYb,EAAaR,KAC1BqB,OAAAA,EAAUnM,MACdmM,EAAUnM,IAAa+K,EAEvBoB,EAAUC,EAAS,CACjBF,EAAiDA,EAAKJ,GAA/CE,OAAAA,EAA0BF,GAElC,SAAAO,GACOC,IAAAA,EAAYL,EAAQE,EAAUC,EAAO,GAAIC,GAC3CF,EAAUC,EAAO,KAAOE,IAC3BH,EAAUC,EAAO,GAAKE,EACtBH,EAAUnM,IAAWqK,SAAS,QAM3B8B,EAAUC,EAOX,SAASG,EAAU9I,EAAU+I,GAE7B5F,IAAAA,EAAQ0E,EAAaR,KACvB2B,EAAY7F,EAAM8F,EAAOF,KAC5B5F,EAAMwF,EAAS3I,EACfmD,EAAM8F,EAAQF,EAEdzB,EAAiBW,IAAQE,EAAgBvM,KAAKuH,IAQzC,SAAS+F,EAAgBlJ,EAAU+I,GAEnC5F,IAAAA,EAAQ0E,EAAaR,KACvB2B,EAAY7F,EAAM8F,EAAOF,KAC5B5F,EAAMwF,EAAS3I,EACfmD,EAAM8F,EAAQF,EAEdzB,EAAiBlE,IAAiBxH,KAAKuH,IAIlC,SAASgG,EAAOC,GACfC,OAAAA,EAAQ,WAAO,MAAA,CAAE9D,QAAS6D,IAAiB,IAQnD,SAAgBE,EAAoBtN,EAAKuN,EAAcR,GACtDG,EACC,WACoB,mBAARlN,EAAoBA,EAAIuN,KAC1BvN,IAAKA,EAAIuJ,QAAUgE,MAErB,MAARR,EAAeA,EAAOA,EAAKS,OAAOxN,IAQ7B,SAASqN,EAAQI,EAASV,GAE1B5F,IAAAA,EAAQ0E,EAAaR,KACvB2B,OAAAA,EAAY7F,EAAM8F,EAAOF,IAC5B5F,EAAM8F,EAAQF,EACd5F,EAAMuG,EAAWD,EACTtG,EAAMwF,EAASc,KAGjBtG,EAAMwF,EAOP,SAASgB,EAAY3J,EAAU+I,GAC9BM,OAAAA,EAAQ,WAAMrJ,OAAAA,GAAU+I,GAMzB,SAASa,EAAWhN,GACpB0F,IAAAA,EAAWgF,EAAiB1K,QAAQA,EAAQ+F,KAAAA,IAC7CL,EAAU,OAAO1F,EAAQgG,GACxBO,IAAAA,EAAQ0E,EAAaR,KAEP,OAAA,MAAhBlE,EAAMwF,IACTxF,EAAMwF,GAAAA,EACNrG,EAASY,IAAIoE,IAEPhF,EAASrH,MAAM4E,MAOhB,SAASgK,EAAchK,EAAOiK,GACxBD,EAAAA,QAAAA,eACXxP,EAAQwP,QAAAA,cAAcC,EAAYA,EAAUjK,GAASA,GAOvD,SAASkK,IACRvC,EAAkBlD,KAAK,SAAA5G,GAClBA,EAAUU,MACbV,EAAUuK,IAAQE,EAAgB6B,QAAQC,GAC1CvM,EAAUuK,IAAQE,EAAgB6B,QAAQE,GAC1CxM,EAAUuK,IAAQE,EAAkB,MAGtCX,EAAoB,GA8CrB,SAASyC,EAAcE,GAClBA,EAAKC,GAAUD,EAAKC,IAOzB,SAASF,EAAaC,GACfE,IAAAA,EAASF,EAAKxB,IACE,mBAAX0B,IAAuBF,EAAKC,EAAWC,GAOnD,SAASrB,EAAYsB,EAASC,GAAAA,OACrBD,GAAWC,EAAQjG,KAAK,SAACkG,EAAK1C,GAAU0C,OAAAA,IAAQF,EAAQxC,KAGjE,SAASS,EAAeiC,EAAKC,GACR,MAAA,mBAANA,EAAmBA,EAAED,GAAOC,EA5R3CpQ,EAAQyJ,QAAAA,IAAU,SAAA7H,GACbwL,GAAiBA,EAAgBxL,GAGrCoL,EAAe,GADfC,EAAmBrL,EAAMM,KAGJ0L,MACpBX,EAAiBW,IAAQE,EAAgB6B,QAAQC,GACjD3C,EAAiBW,IAAQE,EAAgB6B,QAAQE,GACjD5C,EAAiBW,IAAQE,EAAkB,KAI7C9N,EAAQ6J,QAAAA,OAAS,SAAAjI,GACZyL,GAAcA,EAAazL,GAEzBoB,IAAAA,EAAIpB,EAAMM,IACXc,GAAAA,EAAAA,CAEC2K,IAAAA,EAAQ3K,EAAE4K,IACZD,GACCA,EAAMG,EAAgBxM,SAsOJ,IArOV6L,EAAkB5L,KAAKyB,IAqORkK,IAAYlN,EAAQqQ,QAAAA,yBAC/CnD,EAAUlN,EAAQqQ,QAAAA,wBAvBpB,SAAwB1K,GAQnB2K,IAAAA,EAPEC,EAAO,WACZC,aAAaC,GACbC,qBAAqBJ,GACrBvD,WAAWpH,IAEN8K,EAAU1D,WAAWwD,EA9OR,KAiPG,oBAAXI,SACVL,EAAMD,sBAAsBE,MAgBAb,MApO9B1P,EAAQgK,QAAAA,IAAU,SAACpI,EAAO0B,GACzBA,EAAY2G,KAAK,SAAA5G,GAChBA,EAAU0F,IAAiB4G,QAAQC,GACnCvM,EAAU0F,IAAmB1F,EAAU0F,IAAiB6H,OAAO,SAAA1G,GAAAA,OAC9DA,EAAGoE,GAASuB,EAAa3F,OAIvBoD,GAAWA,EAAU1L,EAAO0B,IAGjCtD,EAAQyF,QAAAA,QAAU,SAAA7D,GACb2L,GAAkBA,EAAiB3L,GAEjCoB,IAAAA,EAAIpB,EAAMM,IACXc,GAAAA,EAAAA,CAEC2K,IAAAA,EAAQ3K,EAAE4K,IACZD,GACHA,EAAME,EAAM8B,QAAQ,SAAAG,GAAQA,OAAAA,EAAKC,GAAYD,EAAKC;;AA4DrC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,IAAA,EAAA,CAAA,SAAA,EAAA,UAAA,EAAA,QAAA,EAAA,SAAA,EAAA,wBAAA,EAAA,cAAA,EAAA,eAAA,EAAA,cAAA,EAAA,gBAAA,EAAA,aAAA,EAAA,eAAA,EAAA,MAAA,EAAA,YAAA,EAAA,yBAAA,EAAA,UAAA,EAAA,cAAA,EAAA,MAAA,EAAA,eAAA,EAAA,eAAA,EAAA,WAAA,EAAA,UAAA,EAAA,WAAA,GAAA,QAAA,QAAA,QAAA,OAAA,EAAA,QAAA,uBAAA,EAAA,QAAA,aAAA,EAAA,QAAA,cAAA,EAAA,QAAA,aAAA,EAAA,QAAA,eAAA,EAAA,QAAA,YAAA,EAAA,QAAA,KAAA,EAAA,QAAA,WAAA,EAAA,QAAA,SAAA,EAAA,QAAA,aAAA,EAAA,QAAA,KAAA,EAAA,OAAA,eAAA,QAAA,gBAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,iBAAA,OAAA,eAAA,QAAA,gBAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,iBAAA,OAAA,eAAA,QAAA,YAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,aAAA,OAAA,eAAA,QAAA,WAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,YAAA,OAAA,eAAA,QAAA,YAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,aAAA,QAAA,wBAAA,QAAA,cAAA,QAAA,SAAA,QAAA,QAAA,QAAA,aAAA,EAAA,IAAA,EAAA,QAAA,gBAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,IAAA,OAAA,UAAA,eAAA,KAAA,EAAA,IAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,SAAA,IAAA,EAAA,QAAA,UNtHR,SAASrP,EAAOC,EAAKC,GACtB,IAAA,IAAIN,KAAKM,EAAOD,EAAIL,GAAKM,EAAMN,GAAAA,OAAAA,EAU9B,SAASuQ,EAAelN,EAAGC,GAC5B,IAAA,IAAItD,KAAKqD,EAAAA,GAAa,aAANrD,KAAsBA,KAAKsD,GAAI,OAAA,EAC/C,IAAA,IAAItD,KAAKsD,EAAAA,GAAa,aAANtD,GAAoBqD,EAAErD,KAAOsD,EAAEtD,GAAI,OAAA,EAAO,OAAA,EACxD,IOfKwQ,EAAb,SAAA,GAAA,IAAA,EAAA,EAAA,SAAA,EACalQ,GAAAA,IAAAA,EAAAA,OAAAA,EAAAA,EAAAA,KAAAA,KACLA,IAAAA,MAEDmQ,sBAAAA,EAAuB,EAAA,OAAA,EAAA,GAAA,EAAA,GAAA,UAAA,OAAA,OAAA,EAAA,WAAA,EAAA,UAAA,YAAA,EAAA,EAAA,UAAA,EAAA,EAAA,UAG7BzH,sBAAA,SAAsB1I,EAAOkI,GAE3B+H,OAAAA,EAAetF,KAAK3K,MAAOA,IAAUiQ,EAAetF,KAAKzC,MAAOA,IAAAA,EATnE,CAAmCxG,EAAnC,WCIO,SAAS0O,EAAKhO,EAAGiO,GACdC,SAAAA,EAAaC,GACjBxP,IAAAA,EAAM4J,KAAK3K,MAAMe,IACjByP,EAAYzP,GAAOwP,EAAUxP,IAAAA,OAC5ByP,GAAazP,IACjBA,EAAIwI,KAAOxI,EAAI,MAASA,EAAIuJ,QAAU,MAGlC+F,GAIGA,EAAS1F,KAAK3K,MAAOuQ,KAAeC,EAHpCP,EAAetF,KAAK3K,MAAOuQ,GAM3BE,SAAAA,EAAOzQ,GAAAA,OAAAA,KACV0I,sBAAwB4H,GACtBjQ,EAAc+B,EAAAA,eAAAA,EAAGtC,EAAO,GAAIE,IAEpCyQ,OAAAA,EAAO3I,UAAU4I,kBAAAA,EACjBD,EAAOE,YAAc,SAAWvO,EAAEuO,aAAevO,EAAEwD,MAAQ,IAC3D6K,EAAOG,GAAAA,EACAH,EF6FO,QAAA,cAAA,EG1Hf,IAAII,EAAezR,EAAQ4B,QAAAA,MAiBpB,SAAS8P,EAAWC,GACjBC,SAAAA,EAAUhR,GACdiR,IAAAA,EAAQnR,EAAO,GAAIE,GAAAA,cAChBiR,EAAMlQ,IACNgQ,EAAGE,EAAOjR,EAAMe,KAExBiQ,OAAAA,EAAUlJ,UAAU4I,kBAAAA,EACpBM,EAAUJ,GAAAA,EACVI,EAAUL,YAAc,eAAiBI,EAAGJ,aAAeI,EAAGnL,MAAQ,IAC/DoL,EAzBR5R,EAAQ4B,QAAAA,MAAQ,SAAAA,GACXA,EAAMV,MAAQU,EAAMV,KAAKsQ,GAAc5P,EAAMD,MAChDC,EAAMhB,MAAMe,IAAMC,EAAMD,IACxBC,EAAMD,IAAM,MAGT8P,GAAcA,EAAa7P,IAAAA,ICR1BkQ,EAAQ,SAAC3Q,EAAUwQ,GACnBxQ,OAAAA,GACE8D,EAAa9D,EAAAA,cAAAA,GAAU4Q,IAAIJ,GADZ,MAKVK,EAAW,CACvBD,IAAKD,EACLnC,QAASmC,EACTG,MAAAA,SAAM9Q,GACEA,OAAAA,GAAW8D,EAAa9D,EAAAA,cAAAA,GAAUG,OAAS,GAEnD4Q,KAAAA,SAAK/Q,GAEoB,GAAA,KADxBA,GAAW8D,EAAa9D,EAAAA,cAAAA,IACXG,OAAAA,MACN,IAAI6Q,MAAM,2CAEVhR,OAAAA,EAAS,IAEjBiR,QAASnN,EAAAA,cClBJoN,EAAgBrS,EAAQ8J,QAAAA,IAiB9B,SAASwI,EAAc1Q,GAClBA,OAAAA,KACHA,EAAQlB,EAAO,GAAIkB,IACbM,IAAa,KACnBN,EAAMC,IAAYD,EAAMC,KAAaD,EAAMC,IAAUkQ,IAAIO,IAEnD1Q,EAID,SAAS2Q,EAAS3R,GAEnB4R,KAAAA,IAAe,EAAA,KACfC,IAAsB,KAmFrB,SAASC,EAAU9Q,GACrByB,IAAAA,EAAYzB,EAAME,GAAQI,IACvBmB,OAAAA,GAAaA,EAAUsP,GAActP,EAAUsP,EAAW/Q,GAG3D,SAASgR,EAAKC,GAChBC,IAAAA,EACAzP,EACAgJ,EAEK0G,SAAAA,EAAKnS,GACRkS,GAAAA,IACJA,EAAOD,KACFjG,KACJ,SAAAoG,GACC3P,EAAY2P,EAAQC,SAErB,SAAAxL,GACC4E,EAAQ5E,IAKP4E,EAAAA,MACGA,EAAAA,IAGFhJ,EAAAA,MACEyP,EAGA7R,OAAAA,EAAcoC,EAAAA,eAAAA,EAAWzC,GAGjCmS,OAAAA,EAAKxB,YAAc,OACnBwB,EAAKvB,GAAAA,EACEuB,EC/IR,SAAgBG,IACVC,KAAAA,EAAQ,KAAA,KACRC,EAAO,KNkHE,QAAA,SAAA,EKzHfpT,EAAQ8J,QAAAA,IAAc,SAASuC,EAAO1E,EAAUhD,GAC3C0H,GAAAA,EAAMO,KAAAA,IAAAA,IAELvJ,EACAzB,EAAQ+F,EAEJ/F,EAAQA,EAAME,IAAAA,IAChBuB,EAAYzB,EAAMM,MAAemB,EAAUgQ,EAAAA,OAExChQ,EAAUgQ,EAAiBhH,EAAO1E,EAASzF,KAIrDmQ,EAAchG,EAAO1E,EAAUhD,KAsBhC4N,EAAS7J,UAAY,IAAIpG,EAAJ,WAMF+Q,EAAmB,SAASC,EAASC,GAEjDvQ,IAAAA,EAAIuI,KAEJuB,EAAU4F,EAAU1P,EAAEa,KAExB2P,GAAAA,EACEC,EAAa,WACdD,IAEJA,GAAAA,EAEI1G,EACHA,EAAQ4G,GAERA,MAIFH,EAAoBI,IACnBJ,EAAoBjI,qBACrBiI,EAAoBjI,qBAAuB,WAC1CmI,IAEIF,EAAoBI,KACvBJ,EAAoBI,OAIhBD,IAAAA,EAAuB,aACrB1Q,EAAEwP,MACRxP,EAAEa,IAAOhC,IAAU,GAAKmB,EAAE8F,MAAM6J,EAChC3P,EAAEuJ,SAAS,CAAEoG,EAAa3P,EAAEyP,IAAsB,SAI/CzP,EAAEwP,OACNxP,EAAEuJ,SAAS,CAAEoG,EAAa3P,EAAEyP,IAAsBzP,EAAEa,IAAOhC,IAAU,KAEtEyR,EAAQ1G,KAAK6G,EAAYA,IAG1BlB,EAAS7J,UAAUC,OAAS,SAAS/H,EAAOkI,GACvCyC,OAAAA,KAAKkH,MAAAA,KACH5O,IAAOhC,IAAU,GAAKyQ,EAAc/G,KAAKkH,KAAAA,KACzCA,IAAsB,MAGrB,EACNxR,EAAcqB,EAAAA,eAAAA,EAAdrB,UAAyB,KAAM6H,EAAM6J,EAAa,KAAO/R,EAAMO,UAC/D2H,EAAM6J,GAAc/R,EAAMgT,WC7E5B,IAAM9G,EAAU,SAAC+G,EAAMhR,EAAO/B,GAAAA,KACvBA,EAdgB,KAcSA,EAfR,IAqBtB+S,EAAKT,EAAKU,OAAOjR,GAQhBgR,EAAKjT,MAAMmT,cACmB,MAA9BF,EAAKjT,MAAMmT,YAAY,KAAcF,EAAKT,EAAKY,MAAAA,IAQjDlT,EAAO+S,EAAKV,EACLrS,GAAM,CACLA,KAAAA,EAAKQ,OAAS,GACpBR,EAAKgD,KAALhD,GAEGA,GAAAA,EA1CiB,GA0CMA,EA3CL,GAAA,MA8CtB+S,EAAKV,EAAQrS,EAAOA,EA5CJ,MAmDlBoS,EAAaxK,UAAY,IAAIpG,EAAJ,WAEFqQ,EAAa,SAAS9P,GACtCgR,IAAAA,EAAOtI,KACP0I,EAAYvB,EAAUmB,EAAKhQ,KAE7B/C,EAAO+S,EAAKT,EAAKc,IAAIrR,GACzB/B,OAAAA,EA5DuB,KA8DhB,SAAAqT,GACAC,IAAAA,EAAmB,WACnBP,EAAKjT,MAAMmT,aAKfjT,EAAKS,KAAK4S,GACVrH,EAAQ+G,EAAMhR,EAAO/B,IAHrBqT,KAMEF,EACHA,EAAUG,GAEVA,MAKHlB,EAAaxK,UAAUC,OAAS,SAAS/H,GACnCuS,KAAAA,EAAQ,KAAA,KACRC,EAAO,IAAIiB,IAEVlT,IAAAA,GAAW8D,EAAarE,EAAAA,cAAAA,EAAMO,UAChCP,EAAMmT,aAAwC,MAAzBnT,EAAMmT,YAAY,IAI1C5S,EAASmT,UAIL,IAAA,IAAIhU,EAAIa,EAASG,OAAQhB,KAAAA,KAYxB8S,EAAKmB,IAAIpT,EAASb,GAAKiL,KAAK4H,EAAQ,CAAC,EAAG,EAAG5H,KAAK4H,IAE/CvS,OAAAA,EAAMO,UAGd+R,EAAaxK,UAAUc,mBAAqB0J,EAAaxK,UAAUS,kBAAoB,WAOhF0K,IAAAA,EAAOtI,KACbsI,EAAKT,EAAKzD,QAAQ,SAAC7O,EAAM+B,GACxBiK,EAAQ+G,EAAMhR,EAAO/B,MAAAA,IC1HjB0T,EAAAA,WAAAA,SAAAA,KAAAA,IAAAA,EAAAA,EAAAA,UAAAA,OAAAA,EACL9K,gBAAA,WACQ6B,OAAAA,KAAK3K,MAAM2B,SAAAA,EAEnBoG,OAAA,SAAO/H,GACCA,OAAAA,EAAMO,UAAAA,EALTqT,GAaN,SAASC,EAAO7T,GACXqL,IAAAA,EAAQV,KACRmJ,EAAY9T,EAAM8T,UAClBC,GAAO1T,EACVuT,EAAAA,eAAAA,EACA,CAAEjS,QAAS0J,EAAM1J,SACjB3B,EAAMgB,OAKHqK,OAAAA,EAAM2I,GAAc3I,EAAM2I,IAAeF,IACxCzI,EAAM4I,EAAM9T,YAAYkL,EAAM2I,EAAW5T,YAAYiL,EAAM4I,IAC/DC,EAAS7I,EAAAA,UAAAA,EAAM8I,GACf9I,EAAM+I,GAAAA,GAKHpU,EAAMgB,MACJqK,EAAM+I,GAoBVN,EAAU7S,IAAYoK,EAAMpK,KAC5B8G,EAAOgM,EAAAA,QAAAA,EAAMD,GACbzI,EAAMpK,IAAY6S,EAAU7S,MApB5BoK,EAAM4I,EAAQrK,SAASC,eAAe,KAGtCtE,EAAQ,EAAA,SAAA,GAAIuO,GAEZA,EAAUrP,YAAY4G,EAAM4I,GAE5B5I,EAAM+I,GAAAA,EACN/I,EAAM2I,EAAaF,GAEnB/L,EAAOgM,EAAAA,QAAAA,EAAMD,EAAWzI,EAAM4I,GAC9B5I,EAAMpK,IAAY0J,KAAKsJ,EAAMhT,KActBoK,EAAM+I,IACV/I,EAAM4I,EAAM9T,YAAYkL,EAAM2I,EAAW5T,YAAYiL,EAAM4I,IAC/DC,EAAS7I,EAAAA,UAAAA,EAAM8I,IAGhB9I,EAAM8I,EAAQJ,EAEd1I,EAAMX,qBAAuB,WACxBW,EAAM4I,EAAM9T,YAAYkL,EAAM2I,EAAW5T,YAAYiL,EAAM4I,IAC/DC,EAAS7I,EAAAA,UAAAA,EAAM8I,IAGT,KAQD,SAASE,EAAarT,EAAO8S,GAC5BzT,OAAAA,EAAcwT,EAAAA,eAAAA,EAAQ,CAAE7S,MAAAA,EAAO8S,UAAAA,If3EvC,IAAMQ,EAAc,kMAGpB5S,EAAUoG,UAAAA,UAAU4I,iBAAmB,GAGvC,IAAa6D,EACO,oBAAXC,QACPA,OAAOC,KACPD,OAAOC,IAAI,kBACZ,MASD,SAAgB1M,EAAO/G,EAAO0T,EAAQ3P,GAGb,GAAA,MAApB2P,EAAOzT,IAAAA,KACHyT,EAAOC,YACbD,EAAOtU,YAAYsU,EAAOC,YAI5BC,OAAAA,EAAa5T,EAAAA,QAAAA,EAAO0T,GACI,mBAAb3P,GAAyBA,IAE7B/D,EAAQA,EAAMM,IAAa,KAGnC,IAAIuT,EAAezV,EAAQ0H,QAAAA,MAQ3B,SAASgO,EAAkBC,EAAOjU,GAC7BiU,EAAM,UAAYjU,KAASiU,EAAMjU,IACpCkU,OAAOC,eAAeF,EAAOjU,EAAK,CACjCoU,cAAAA,EACA5B,IAAAA,WACQ3I,OAAAA,KAAK,UAAY7J,IAMzB6S,IAAAA,SAAIwB,GACE,KAAA,UAAYrU,GAAOqU,KAnB5B/V,EAAQ0H,QAAAA,MAAQ,SAAAD,GACXgO,OAAAA,IAAchO,EAAIgO,EAAahO,IACnCA,EAAEuO,QAAU,aACJvO,EAAEwO,YAAcxO,GAsBzB,IAAIyO,EAAsB,CACzBJ,cAAAA,EACA5B,IAAAA,WACQ3I,OAAAA,KAAK4K,QAIV1E,EAAezR,EAAQ4B,QAAAA,MAC3B5B,EAAQ4B,QAAAA,MAAQ,SAAAA,GACfA,EAAMwU,SAAWjB,EAEbjU,IAAAA,EAAOU,EAAMV,KACbN,EAAQgB,EAAMhB,MAGC,GAAA,mBAARM,EAAoB,CAoB1BmV,IAAAA,EAAgBC,EAAOhW,EACtBA,IAAAA,KAnBDM,EAAMgL,eACJhL,EAAM4E,OAAyB,IAAhB5E,EAAM4E,QACzB5E,EAAM4E,MAAQ5E,EAAMgL,qBAEdhL,EAAMgL,cAIV/F,MAAMC,QAAQlF,EAAM4E,QAAU5E,EAAM2V,UAAqB,WAATrV,KACnD+D,EAAarE,EAAAA,cAAAA,EAAMO,UAAUwO,QAAQ,SAAA9M,IACW,GAA3CjC,EAAM4E,MAAM9C,QAAQG,EAAMjC,MAAM4E,SACnC3C,EAAMjC,MAAM4V,UAAAA,YAGP5V,EAAM4E,OAKJ5E,EAAAA,GAAYyV,EAAiBnB,EAAY3O,KAAKjG,GAAK,MACzD+V,GAAAA,EAAAA,IAEE/V,KADLgW,EAAQ1U,EAAMhB,MAAQ,GACZA,EACT0V,EACCpB,EAAY3O,KAAKjG,GAAKA,EAAEwG,QAAQ,aAAc,OAAOC,cAAgBzG,GAClEM,EAAMN,IAMTM,EAAMuV,OAASvV,EAAM6V,aACxBP,EAAoBQ,WAAa,cAAe9V,EAC5CA,EAAM6V,YAAW7V,EAAMuV,MAAQvV,EAAM6V,WACzCb,OAAOC,eAAejV,EAAO,YAAasV,IgBnHrC,SAAA,GAAmChV,IAAAA,EhBuHjBU,EgBvHiBV,KAAMN,EhBuHvBgB,EgBvHuBhB,MAC1CA,GAAAA,GAAwB,iBAARM,EAAAA,CACjB+E,IAAAA,EAAW,GAEV,IAAA,IAAI3F,KAAKM,EACT,mBAAmB2F,KAAKjG,KAC3BM,EAAMN,EAAEyG,eAAiBnG,EAAMN,UACxBM,EAAMN,IAEd2F,EAAS3F,EAAEyG,eAAiBzG,EAEzB2F,GAAAA,EAAS0Q,gBACZ/V,EAAMgW,WAAahW,EAAMqF,EAAS0Q,sBAC3B/V,EAAMqF,EAAS0Q,gBAEnB1Q,EAAS4Q,gBACZjW,EAAMiW,cAAgBjW,EAAMqF,EAAS4Q,sBAC9BjW,EAAMqF,EAAS4Q,gBAItB5Q,EAAS6Q,WACC,aAAT5V,GACwB,UAAvBA,EAAK6F,gBAA8B,eAAeR,KAAK3F,EAAMM,OAC9D,CACG6V,IAAAA,EAAa9Q,EAAS+Q,SAAW,UAChCpW,EAAMmW,KACVnW,EAAMmW,GAAcnW,EAAMqF,EAAS6Q,iBAC5BlW,EAAMqF,EAAS6Q,aA5BlB,GhB8HW,mBAAT5V,IACNA,EAAK+V,GACN/V,EAAKwH,YAELgN,EAAkBxU,EAAKwH,UAAW,sBAClCgN,EAAkBxU,EAAKwH,UAAW,6BAClCgN,EAAkBxU,EAAKwH,UAAW,uBAClCxH,EAAK+V,GAAAA,GAGFxF,GAAcA,EAAa7P,IAAAA,IQ9G1BsV,EAAU,SAMhB,SAASC,EAAcjW,GACfD,OAAAA,EAAc4L,cAAAA,KAAK,KAAM3L,GAQjC,SAASjB,EAAemX,GAAAA,QACdA,GAAWA,EAAQhB,WAAajB,EAU1C,SAASzJ,EAAa0L,GAChBnX,OAAAA,EAAemX,GACbC,EAAmBC,aAAAA,MAAM,KAAMjW,WADD+V,EAStC,SAASG,EAAuB7C,GAAAA,QAC3BA,EAAU7S,OACb2T,EAAa,EAAA,QAAA,KAAMd,IAAAA,GAWrB,SAAS8C,EAAYnU,GAElBA,OAAAA,IACCA,EAAUP,MAAgC,IAAvBO,EAAUiH,UAAkBjH,IACjD,KA0Ca,QAAA,QAAA,EA9Bf,IAAMoU,EAA0B,SAAC9R,EAAUwK,GAAQxK,OAAAA,EAASwK,IA8B7C,QAAA,wBAAA,EAAA,IAAA,EAAA,CACdpC,SAAAA,EADc,SAEdE,WAAAA,EAFc,WAGdQ,UAAAA,EAHc,UAIdI,gBAAAA,EAJc,gBAKdC,OAAAA,EALc,OAMdG,oBAAAA,EANc,oBAOdD,QAAAA,EAPc,QAQdM,YAAAA,EARc,YASdC,WAAAA,EATc,WAUdC,cAAAA,EAVc,cAWd0H,QA1Ge,SA2GflF,SAAAA,EACArJ,OAAAA,EACAxC,QAASwC,EACT4O,uBAAAA,EACAtC,aAAAA,EACAhU,cAAAA,EAjBc,cAkBd0K,cAAAA,EAlBc,cAmBdwL,cAAAA,EACAzL,aAAAA,EACAtJ,UAAAA,EArBc,UAsBdC,SAAAA,EAtBc,SAuBdpC,eAAAA,EACAuX,YAAAA,EACAlV,UAAAA,EAzBc,UA0BdwO,cAAAA,EACAE,KAAAA,EACAU,WAAAA,EACA+F,wBAAAA,EACAlF,SAAAA,EACAW,aAAAA,EACAN,KAAAA,GAhCc,QAAA,QAAA;;ASnGA8E,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA1Bf,MAAMA,EAAQ,CACVC,OAAQC,GAAMpN,SAASqN,eAAeD,GAAIE,UAAY,GACtDC,IAAK,CAACC,EAAMC,EAAa,gBAAiBC,EAAY,OAC9C,IAACF,EACD,OAEAG,IAAAA,EAAY3N,SAASvJ,cAAc,OACvCkX,EAAUP,GAAKF,EAAMU,KAAKJ,GAC1BG,EAAUnN,UAAYgN,EACtBG,EAAUE,UAAUN,IAAI,eAAgB,QAASE,GACjDzN,SAAS8N,KAAKjT,YAAY8S,GAC1BpL,WAAW,IAAM2K,EAAMC,OAAOQ,EAAUP,IAAKM,IAEjDE,KAAOG,IACCH,IAAAA,EAAO,EACPG,GAAc,GAAdA,EAAIjX,OACG8W,OAAAA,EAEN,IAAA,IAAI9X,EAAI,EAAGA,EAAIiY,EAAIjX,OAAQhB,IAAK,CAEjC8X,GAASA,GAAM,GAAGA,EADPG,EAAIC,WAAWlY,GAE1B8X,GAAcA,EAEXA,OAAAA,IAGAV,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACqBAe,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA/Cf,IAAA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,cA8CeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GA5Cf,MAAMA,EAAK,CACPA,GAAI,GACJvE,IAAK,IAAMuE,EAAGA,GAAGb,GAAKjL,QAAQG,QAAQ2L,EAAGA,IAAMA,EAAGhM,SAClDA,OAAQ,IAAMiM,EAAKxE,QAAAA,IAAI,WAAW,GAAMtH,KAAKvB,IACrC,GAACA,EAOEA,OAJPoN,EAAGA,GAAK7C,OAAOlV,OAAO,CAACiY,cAAe,IAAKtN,GAC3CoN,EAAGG,oBACEC,EAAAA,QAAAA,YACLlI,OAAOmI,cAAc,IAAIC,YAAY,kBAC9B1N,IAEXuN,kBAAmB,IAAMF,EAAKxE,QAAAA,IAAI,cAAgBuE,EAAGA,GAAGb,GAAK,kBAAkBhL,KAAKvB,IAChFoN,EAAGA,GAAGE,cAAgBtN,EACtBsF,OAAOmI,cAAc,IAAIC,YAAY,oBAEzCC,kBAAmB,CAACC,EAAOrB,IACnBqB,EAAMrB,KAAOA,IAGbqB,EAAMC,SAAWtB,GAIF,gBAAfqB,EAAM/X,MACH+X,EAAME,YAAYvB,KAAOA,GAMpC/P,MAAO+P,GAAMa,EAAGA,GAAGE,cAAc1O,KAAKmP,GAAKX,EAAGO,kBAAkBI,EAAGxB,IACnEyB,4BAA6BzB,GAClBa,EAAGG,oBAAoBhM,KAAK0M,GACxB3M,QAAQ4M,IAAId,EAAGA,GAAGE,cAAc/H,OAAOwI,GAAKX,EAAGO,kBAAkBI,EAAGxB,IAAK7F,IAC5EqH,GAAKV,EAAK5E,QAAAA,OAAO,sBAAwBsF,EAAExB,IAAIhL,KAAKvB,IAChDoN,EAAGA,GAAGE,cAAgBF,EAAGA,GAAGE,cAAc/H,OAAOnJ,IAAMgR,EAAGO,kBAAkBvR,EAAGmQ,IAC/EjH,OAAOmI,cAAc,IAAIC,YAAY,wBAM1CN,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACCAe,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAhDf,IAAA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,cA+CeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GA7Cf,MAAMA,EAAO,CACTC,KAAM,GACNC,aAAc,CACJ,GAAA,UACA,GAAA,UACA,GAAA,WACA,GAAA,aAEVC,eAAgB,KAAOnP,SAASoP,cAAc,oCAAsC,IAAIC,SAAW,KACnGC,eAAgB,IAAMrB,EAAGA,QAAAA,IAAMA,EAAGA,QAAAA,GAAH,MAAgBA,EAAGA,QAAAA,GAAG9N,KAAN,MAA8C6O,EAAKG,iBAClGd,UAAW,CAACY,EAAOD,EAAKM,oBAAsBN,EAAKC,KAAKA,IAASf,EAAKxE,QAAAA,IAAI,SAAWuF,EAAO,SAAS7M,KAAKvB,IACtGmO,EAAKC,KAAKA,GAAQpO,EAClBsF,OAAOmI,cAAc,IAAIC,YAAY,qBAEzCgB,EAAG,CAACnC,EAAIoC,EAAS,MAOT,GAJJA,EAAOP,KAAOO,EAAM,MAAYR,EAAKM,iBACrCE,EAAO/H,MAAQ+H,EAAM,OAAa,GAG7BpC,IAAO4B,EAAKC,KAAKO,EAAOP,MAClB,MAAA,GAMPlB,IAAAA,EAAMiB,EAAKC,KAAKO,EAAOP,MAAM7B,IAAO,GACpC,GAAc,iBAAPW,EAAiB,CACpB0B,IAAAA,EAAOrE,OAAOsE,oBAAoB3B,GAAKxG,IAAItK,IAAMA,GAAGmJ,OAAOnJ,IAAM0S,MAAM1S,IAAMA,GAAKuS,EAAO/H,OAAOvO,KAAK,CAACC,EAAGC,IAAMD,EAAEC,GACrH2U,EAAM0B,EAAK3Y,OAASiX,EAAI0B,EAAKjT,OAAO,GAAG,IAAM,GAW1CuR,OAPP3C,OAAOlV,OAAO,GAAI6X,EAAI6B,MAAM,aAAazK,QAAQjJ,IACzC2T,IAAAA,EAAM3T,EAAEI,QAAQ,UAAU,IAC1BkT,EAAOK,KACP9B,EAAMA,EAAIzR,QAAQJ,EAAGsT,EAAOK,OAI7B9B,IAGAiB,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;AC4JAc,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA5Mf,IAAA,EAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,cAwMeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GAtMf,MAAMA,EAAS,CACXC,MAAO,GACP3C,GAAI,GACJrJ,OAAQ,GACRiM,QAAS,GACTC,cAAe,GACfC,UAAW,GACXC,WAAY,GACZC,OAAQ,GACRC,OAAQ,GACRC,WAAYC,IACJ,IAEO,OADHC,IAAAA,IAAID,IACD,EACT,MAAOzB,GACE,OAAA,IAGf2B,WAAY,IAAO,IAAID,IAAIxQ,SAAS0Q,SAAUC,SAASrU,QAAQ,MAAO,IACtEsU,MAAOL,GACEA,GAAsB,iBAARA,EAGfT,EAAOQ,WAAWC,GACXA,EAEJM,SAASC,OAAShB,EAAOW,aAAeF,EALpC,GAOfQ,cAAeC,GAAQA,EAAOA,EAAK1U,QAAQ,IAAI2U,OAAO,IAAMnB,EAAOW,cAAe,IAAM,GACxFS,SAAU,CAACC,EAAOC,EAAejL,OAAO0K,SAAST,OAAOiB,UAAU,MAC1DC,IAAAA,EAAMF,EAAaG,MAAM,KAAKC,KAAKvU,GAAKA,EAAEsU,MAAM,KAAK,KAAOJ,GACzDG,OAAAA,EAAMA,EAAIC,MAAM,KAAK,GAAK,IAErCE,YAAa,IAAMtL,OAAO0K,SAASF,SAASnU,MAAM,GAAG+U,MAAM,KAAK,GAAGA,MAAM,KAEzEG,UAAW,IAAM,CACb,QACA,iBACA,SACA,aACA,2BACA,UACFC,SAAS7B,EAAOC,OAASD,EAAO2B,cAAc,IAChDG,SAAU5V,GAAQ,CACd,WACA,SACA,QACA,QACA,SACF2V,SAAS3V,GACX6V,SAAU,MAAOtB,EAAM,IAAK/a,EAAU,MAkD1Bsa,OAjDHS,EAAIX,MAAM,UAAapa,EAAO,UAC/B+a,EAAMT,EAAOc,MAAML,IAEvBT,EAAOS,IAAM,IAAIC,IAAID,GACrBT,EAAOkB,KAAOlB,EAAOS,IAAII,SACzBb,EAAOM,OAASN,EAAOS,IAAIH,OAAO5T,MAAM,IACvCsT,EAAOC,MAAOD,EAAO1C,GAAI0C,EAAO/L,QAAU+L,EAAOiB,cAAcjB,EAAOkB,MAAMxU,MAAM,GAAG+U,MAAM,KAC5FzB,EAAOI,UAAY,GACnBJ,EAAOK,WAAa,GACpBL,EAAOE,QAAU,GACjBF,EAAOG,cAAgB,GAGnBH,EAAOC,OAASD,EAAO1C,IAAM0C,EAAO8B,SAAS9B,EAAOC,SACpDD,EAAOI,UAAY,QAAUJ,EAAOC,MAAQ,IAAMD,EAAO1C,GACzD0C,EAAOK,WAAaL,EAAOC,YAErB+B,EAAMpI,QAAAA,IAAIoG,EAAOI,WAAW9N,KAAKkP,IAC/B,IAACA,EAGD,OAFAS,QAAQC,KAAK,uBACblC,EAAO+B,WAIJ/B,OADPA,EAAOO,OAASiB,EACTxB,EAAOC,OACL,IAAA,SACoB,SAAjBD,EAAO/L,SACP+L,EAAOE,QAAU,IAAMF,EAAOC,MAAQ,IAAMD,EAAO1C,GACnD0C,EAAOG,cAAgBjB,EAAKO,QAAAA,EAAE,iBAElC,MACC,IAAA,WACG+B,EAAG,SAAeA,EAAG,UACrBxB,EAAOE,QAAU,aAAesB,EAAG,OAAWlE,GAE9C0C,EAAOE,QAAU,WAAaiC,EAAKC,QAAAA,MAAMZ,EAAIa,OAEjD,MACC,IAAA,QACDrC,EAAOE,QAAU,IACjB,MACJ,QACQF,EAAO/L,SACP+L,EAAOE,QAAU,QAG9BoC,MAAMnV,GAAK8U,QAAQC,KAAK/U,KAGvB6S,EAAOC,OACN,IAAA,iBACA,IAAA,2BACA,IAAA,SACA,IAAA,QACA,IAAA,QACA,IAAA,SACA,IAAA,WACA,IAAA,SACA,IAAA,QACA,IAAA,eACGva,EAAQ8G,QACR+V,QAAQC,aAAa,KAAM,GAAI/B,GAE/B8B,QAAQE,UAAU,KAAM,GAAIhC,GAEhCpK,OAAOmI,cAAc,IAAIC,YAAY,sBACrC,MACC,IAAA,SACKiE,EAAAA,QAAAA,QACNrM,OAAO0K,SAAS4B,KAAOtM,OAAO0K,SAASC,OACvC,MACC,IAAA,aACKpH,EAAAA,QAAAA,IAAI,UAAUtH,KAAKsQ,IACjBA,EACKC,EAAAA,QAAAA,KAAK,0BAA4B7C,EAAO1C,GAAI,IAAIhL,KAAKkP,IACtDnL,OAAO0K,SAAS4B,KAAOtM,OAAO0K,SAASC,SAG3ChB,EAAO+B,SAAS,qBAAuB/B,EAAO1C,MAGtD,MACJ,QACO1D,EAAAA,QAAAA,MAAMtH,KAAKwQ,IACLA,EAIDA,EAAKzS,KAAL,cACA2P,EAAO+B,SAAS,WAAae,EAAKzS,KAAL,eAEzByS,EAAKC,OAAO,GACZ/C,EAAO+B,SAAS,WAAae,EAAKC,OAAO,GAAGzF,IAE5CjH,OAAO0K,SAAW,gBATtBf,EAAO+B,SAAS,cAepCiB,KAAM,IAAMhD,EAAO+B,SAAShB,SAASF,SAAWE,SAAST,OAASS,SAASjD,KAAM,CAACtR,SAAS,IAC3FyW,QAAS,CAAC9V,EAAG+V,GAAS,EAAOzC,EAAM,QAM3B,GAJJtT,EAAEgW,iBACFhW,EAAEiW,mBAGG3C,EAAK,CACAhB,MAAAA,EAAItS,EAAEyR,OAAOyE,QAAQ,KACvB5D,IACe,UAAZA,EAAEb,SACDsE,GAAS,GAEbzC,EAAMhB,EAAE6D,aAAa,SAIzB,GAAC7C,EAAD,CAKAA,GAAAA,EAAI8C,WAAW,QAAS,CAEpBC,GADY,IAAI9C,IAAID,GACVgD,MAAQ1C,SAAS0C,KAM3B,YALItW,EAAEuW,SAAWR,EACbS,KAAKlD,EAAK,UAEVM,SAAS4B,KAAOlC,GAOvB,IAAA,IAAItT,KAAK+C,SAAS0T,uBAAuB,UAC1CzW,EAAE4Q,UAAUV,OAAO,UAInBlQ,EAAEuW,SAAWR,EACbS,KAAKlD,EAAK,UAEVT,EAAO+B,SAAStB,MAIbT,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACjJAmC,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA3Df,IAAA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,gBA0DeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GAxDf,MAAMA,EAAO,CACT0B,UAAY,IAAI1C,OAAO,oFAAqF,KAC5G2C,OAAQC,IACAtD,IAAAA,EAAMsD,EAAIjE,MAAMqC,EAAK0B,WACrBpD,GAAAA,GAAOA,EAAI,GAAG8C,WAAW,KAAM,CAC3BS,IAAAA,EAAOvD,EAAI,GAAGX,MAAM,gBACxBW,EAAG,OAAauD,EAAI,MACpBvD,EAAI,GAAKA,EAAI,GAAG/T,MAAMsX,EAAI,OACtBvD,EAAI,GAAGwD,SAAS,OAChBxD,EAAI,GAAKA,EAAI,GAAG/T,MAAM,GAAI,IAG3B+T,OAAAA,GAGXyD,cAAeC,IACPC,IAAAA,EAAI,IAAIC,KAAe,IAAVF,GAEVC,OADPA,EAAI,IAAIC,KAAKD,EAAEE,UAAmC,IAAtBF,EAAEG,qBAA2B,IAChDC,cAAchY,QAAQ,IAAK,KAAKA,QAAQ,QAAS,KAG9DiY,UAAWN,IACH,IAACA,EACM,OAAA,KAELO,MAAAA,EAAWC,KAAKC,IAAID,KAAKE,OAAOR,KAAKS,MAAM,IAAOX,GAAW,KAC/DO,GAAAA,EAAW,EACJxF,OAAAA,EAAKO,QAAAA,EAAE,YAEdiF,GAAAA,EAAW,GACJxF,OAAAA,EAAKO,QAAAA,EAAE,MAAO,CAACiF,SAASA,EAAW,OAE1CA,GAAAA,EAAW,KACJxF,OAAAA,EAAKO,QAAAA,EAAE,MAAO,CAACiF,SAASC,KAAKI,MAAML,EAAS,IAAM,MAElD,IAAIL,KAAe,IAAVF,GACbhC,OAAAA,EAAK+B,cAAcC,GAAW1C,MAAM,KAAK,IAGpDW,MAAOjV,IACK,cAAOA,GACN,IAAA,SACMA,OAAAA,EAAIA,EAAEmQ,GAAK,KACjB,IAAA,SACMnQ,OAAAA,EAAEsU,MAAM,KAAKjY,MAAMgD,QAAQ,QAAS,IAAIA,QAAQ,SAAU,IAGnE,MADNyV,QAAQC,KAAK/U,GACP,0BAGV6X,UAAW,CAAC1H,EAAI2H,EAAOC,IAAW5H,EAAK0C,EAAOc,QAAAA,MAAM,yBAA2BmE,EAAQ,IAAMC,EAAS,IAAM5H,GAAM,KAElH6H,KAAM,CAAC7H,EAAI2H,EAAOC,IAAW5H,EAAK0C,EAAOc,QAAAA,MAAM,oBAAsBmE,EAAQ,IAAMC,EAAS,IAAM5H,GAAM,KAExG8H,cAAe,8zDAEJjD,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACsCA/D,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAjGf,IAAA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,gBA8FeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GA5Ff,MAAMA,EAAO,CACTiH,SAAU,CAACC,EAAUC,EAAQC,EAAa,KAAMC,EAAU,OAC/CzD,EAAMpI,QAAAA,IAAI,UAAUtH,KAAKsQ,IACxB8C,IAAAA,EAAM,IAAIC,eACdD,EAAI/B,KAAK,OAAQ,cAAc,GAC/B+B,EAAIE,iBAAiB,eAAgBhD,GACrC8C,EAAI/Y,iBAAiB,OAAQQ,IACrBA,EAAEyR,OAAOiH,OAAS,KAAO1Y,EAAEyR,OAAOiH,OAAS,IAC3CN,EAAOO,KAAKC,MAAM5Y,EAAEyR,OAAOoH,WAEvBP,EACAA,EAAQtY,EAAEyR,OAAOqH,YAEjBhE,QAAQlQ,MAAM5E,EAAEyR,OAAOqH,cAI/BT,IACAE,EAAIQ,OAAOC,WAAahZ,CAAAA,GAAKqY,EAAW,CAACY,OAAQjZ,EAAEiZ,OAAQC,MAAOlZ,EAAEkZ,UAEpEZ,GACAC,EAAI/Y,iBAAiB,QAASQ,GAAKsY,EAAQtY,IAE/CuY,EAAIY,KAAKhB,KACVhD,MAAMiE,OAENjE,MAAMvQ,GAASqL,EAAMK,QAAAA,IAAI1L,EAAO,iBAEvC6H,IAAK,CAAC6G,EAAK+F,GAAU,IACVxE,EAAMpI,QAAAA,IAAI,UAAUtH,KAAKsQ,IAExB,KADJnC,EAAMT,EAAOc,QAAAA,MAAML,IAEf,OAEAgG,IAAAA,EAAI,GAODC,OANH9D,IACA6D,EAAE,gBAAkB7D,GAEpB4D,IACAC,EAAE,aAAe,WAEdC,MAAMjG,EAAK,CACdkG,OAAQ,MACRC,QAAS,IAAIC,QAAQJ,KACtBnU,KACCkP,GAAOA,EAAIsF,IAAMtF,EAAIuF,QACvBzE,MACEiE,GAAOtE,QAAQC,KAAK,aAAezB,EAAK8F,MAE7CjE,MAAMvQ,GAASqL,EAAMK,QAAAA,IAAI1L,EAAO,iBAEvC8Q,KAAM,CAACpC,EAAKpQ,EAAM2W,EAAc,qBAAuB5I,EAAK6I,QAAQxG,EAAKpQ,EAAM,OAAQ2W,GACvFE,IAAK,CAACzG,EAAKpQ,EAAM2W,EAAc,qBAAuB5I,EAAK6I,QAAQxG,EAAKpQ,EAAM,MAAO2W,GACrFxN,OAAQ,CAACiH,EAAKpQ,EAAM2W,EAAc,qBAAuB5I,EAAK6I,QAAQxG,EAAK,KAAM,SAAUuG,GAC3FC,QAAS,CAACxG,EAAKpQ,EAAMsW,EAAQK,EAAc,qBAChChF,EAAMpI,QAAAA,IAAI,UAAUtH,KAAKsQ,IAExB,KADJnC,EAAMT,EAAOc,QAAAA,MAAML,IAEf,OAEAgG,IAAAA,EAAI,GACJ7D,IACA6D,EAAE,gBAAkB7D,GAEpBoE,IACAP,EAAE,gBAAkBO,GAEpBG,IAAAA,EAAe,CACfR,OAAQA,EACRC,QAAS,IAAIC,QAAQJ,IAKlBC,OAHHrW,IACA8W,EAAanJ,KAAwB,iBAAT3N,GAA8C,UAAzBA,EAAKxI,YAAYqE,KAAoB4Z,KAAKsB,UAAU/W,GAAQA,GAE1GqW,MAAMjG,EAAK0G,GAAc7U,KAC5BkP,IACQmF,GAAU,UAAVA,EACOnF,OAAAA,EAEP,IACOA,OAAAA,EAAIuF,OACb,MAAOM,GAEEhV,OADP4P,QAAQC,KAAKmF,EAAUC,SAChBjV,QAAQkV,OAAOF,EAAUC,YAG1ChF,MACEiE,GAAOtE,QAAQC,KAAK,aAAezB,EAAK8F,MAE7CjE,MAAMvQ,GAASqL,EAAMK,QAAAA,IAAI1L,EAAO,kBAG5BqM,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACDA4D,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAhGf,IAAA,EAAA,EAAA,QAAA,cAgGeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GA9Ff,MAAMA,EAAQ,CAEV3R,KAAM,GACNmX,OAAQ,GACRC,SAAU,CAACra,EAAOoF,UACqB,IAAxBwP,EAAMwF,OAAOpa,KACpB4U,EAAMwF,OAAOpa,GAAS,IAE1B4U,EAAMwF,OAAOpa,GAAOnG,KAAKuL,IAE7B6K,OAAQC,IACJhC,OAAOqE,KAAKqC,EAAM3R,MAAMgF,QAAQjO,IACxBA,EAAImc,WAAWjG,YACR0E,EAAM3R,KAAKjJ,GAClBiP,OAAOqR,aAAaC,WAAWvgB,OAI3C6S,IAAK,CAACqD,EAAIjN,EAAMuX,EAAgB,KAAMC,GAAa,KACzCC,MAAAA,EAAa,CACfzX,KAAMA,EACN8T,UAAWE,KAAKS,MAChB8C,cAAeA,GAOZvV,OALHwV,EACAxR,OAAOqR,aAAaK,QAAQzK,EAAIwI,KAAKsB,UAAUU,IAE/C9F,EAAM3R,KAAKiN,GAAMwK,EAEdzV,QAAQG,QAAQ8K,IAE3B1D,IAAK,CAAC0D,EAAIkJ,GAAU,KACZ,IAAClJ,EACM,OAAA,IAAIjL,QAAQtB,GAAK,MAGxB,IAACyV,EAAS,CACNnW,IAAAA,EAAO,KAMPA,IALJA,EAAO2R,EAAM3R,KAAKiN,MAGdjN,GADAA,EAAOgG,OAAOqR,aAAaM,QAAQ1K,IACrBwI,KAAKC,MAAM1V,GAAQ,MAEjCA,EAAM,CACF3H,IAAAA,EAAI2H,EAAKuX,eAAiB,QAC1BvX,EAAK8T,UAAYE,KAAKS,MAAQpc,IAC9BsZ,EAAM3E,OAAOC,GACbjN,EAAO,MAGXA,GAAAA,EACIA,MAAe,WAAfA,EAAKwV,OAEE,IAAIxT,QAAQtB,GAAKiR,EAAMyF,SAASnK,EAAIvM,IAExC,IAAIsB,QAAQtB,GAAKA,EAAEV,EAAKA,OAInC,GAAA,SAASpE,KAAKqR,GAAK,CACfsK,IAAAA,EAAgB,IAWb5F,MAJH,kBAAkB/V,KAAKqR,KACvBsK,EAAgB,OAEpB5F,EAAM3R,KAAKiN,GAAM,CAACuI,OAAQ,WACnB7D,EAAM7P,OAAOmL,EAAIsK,GAAe,GAEpC,OAAA,IAAIvV,QAAQtB,GAAKA,EAAE,QAE9BoB,OAAQ,CAACsO,EAAKmH,EAAgB,IAASC,GAAa,KAChD7F,EAAM3R,KAAKoQ,GAAOnF,OAAOlV,OAAO,CAACyf,OAAQ,WAAY7D,EAAM3R,KAAKoQ,IACzDrC,EAAKxE,QAAAA,IAAI6G,GAAKnO,KAAKkP,IACtBQ,EAAM/H,IAAIwG,EAAKe,EAAKoG,EAAeC,GACnC7F,EAAM3R,KAAKoQ,GAAOnF,OAAOlV,OAAO,CAACyf,OAAQ,SAAU7D,EAAM3R,KAAKoQ,IAC1DlV,MAAMC,QAAQwW,EAAMwF,OAAO/G,KAC3BuB,EAAMwF,OAAO/G,GAAKpL,QAAQtE,GAAKA,EAAElB,KAAK,KAAMmS,EAAM3R,KAAKoQ,GAAKpQ,cAEzD2R,EAAMwF,OAAO/G,GACb,IAAIpO,QAAQtB,GAAKA,EAAEyQ,OAGlCyG,WAAY,KACRjG,EAAM3R,KAAO,GACb2R,EAAMwF,OAAS,GACfnR,OAAOmI,cAAc,IAAIC,YAAY,gBAEzCiE,MAAO,IAAMrM,OAAOqR,aAAaQ,SAAWlG,EAAMiG,cAEvCjG,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;AClFR,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,KAAA,QAAA,KAAA,QAAA,OAAA,QAAA,GAAA,QAAA,KAAA,QAAA,MAAA,QAAA,WAAA,EAdP,IAAA,EAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,gBACA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,cAQO,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GANA,MAAM5E,EAAQ+K,EAAd,QAMA,QAAA,MAAA,EALA,MAAMnG,EAAQoG,EAAd,QAKA,QAAA,MAAA,EAJA,MAAMhK,EAAOiK,EAAb,QAIA,QAAA,KAAA,EAHA,MAAMlK,EAAKmK,EAAX,QAGA,QAAA,GAAA,EAFA,MAAMtI,EAASuI,EAAf,QAEA,QAAA,OAAA,EADA,MAAMpG,EAAOqG,EAAb,QACA,QAAA,KAAA,EAAA,MAAMtJ,EAAOuJ,EAAb,QAAA,QAAA,KAAA;;ACVuC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJ9C,IAAA,EAAA,QAAA,UAIe,MAAMC,UAAe1gB,EAArB,UACXH,YAAYvB,GACFA,MAAAA,GACDkI,KAAAA,MAAQ,CACE,QAAA,CACI,QAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,0bACxB,OAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,wjBACjB,eAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,yfAC1B,WAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,kyBAC3B,KAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,8jBAE3B,MAAA,CACM,QAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,gOACpB,aAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,qdACvB,aAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,4PACvB,aAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,2HAC7B,KAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,wkCACtB,MAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,maACvB,KAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,iZACjB,aAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,6NAC5B,OAAA,CAAC,IAAK,IAAK,GAAI,OAAQ,+VAK7CH,SACUsa,MAAAA,EAAO,KAAKna,MAAM,KAAKlI,MAAMsiB,QAAQ,KAAKtiB,MAAMqiB,MAC/CA,OAAAA,IAAQ,EAAA,EAAA,GAAA,MAAA,CAAK,UAAW,WAAa,KAAKriB,MAAMsiB,OAAS,IAAM,KAAKtiB,MAAMqiB,KAAM,QAAS,OAASA,EAAK,GAAK,IAAMA,EAAK,KAAI,EAAA,EAAA,GAAA,OAAA,CAAM,KAAK,eAAe,EAAGA,EAAK,OA3B9H,QAAA,QAAA;;ACAA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJ9C,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,2BAE8C,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA/B,MAAME,UAAe7gB,EAArB,UAEXH,YAAYvB,GACFA,MAAAA,GACDga,KAAAA,OAAS,KAAKA,OAAO/N,KAAK,MAGnC+N,OAAOwI,GACHA,EAAI3F,iBAEA4F,IAAAA,EAAc7Y,SAASqN,eAAe,UAAUrS,MAAM8d,UAAU,OAAOxc,QAAQ,mBAAoB,IAAIiV,MAAM,KAC7GwH,EAA2B,YAAhBjJ,EAAOC,OAAAA,MAAsBD,EAAOO,OAAAA,OAAO8B,MAAM/E,GAAK0C,EAAOO,OAAAA,OAAOjD,GAC5EyE,EAAAA,OAAAA,SAAS,WAAakH,EAAW,WAAaF,EAAYtR,IAAItK,GAAK+b,mBAAmB/b,IAAIgc,KAAK,MAG1G9a,SAEQ,OAAA,EAAA,EAAA,GAAA,OAAA,CAAY,MAAA,8BACR,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gBACP,EAAA,EAAA,GAAA,QAAA,CACU,MAAA,eACN,KAAK,OACL,GAAG,SACH,YAAa6Q,EAAKO,KAAAA,EAAE,mBACpB,MAAO2J,mBAAmBpJ,EAAOoB,OAAAA,SAAS,UAAU5U,QAAQ,MAAM,SAEtE,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,uBACP,EAAA,EAAA,GAAA,SAAA,CACI,QAASW,GAAK,KAAKmT,OAAOnT,GACpB,MAAA,oBACN,KAAK,WAEL,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQ,QAAS,KAAM,gBAhCb,QAAA,QAAA;;ACAc,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJ5D,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,2BAE4D,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA7C,MAAMkc,UAA6BrhB,EAAnC,UAEXH,YAAYvB,GACFA,MAAAA,GAENqG,iBAAiB,gBAAiBqS,GAAK,KAAK/M,SAAS,KAGzD5D,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gBACL8P,EAAGA,GAAAA,GAAG4E,SACJ,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,wCAAwC,SAAS,KACvD,OAAQ5V,KAAOA,EAAEmc,gBAAkBnc,EAAEmc,cAAc3G,OAASxV,EAAEyR,OAAOb,UAAUV,OAAO,UACtF,QAASlQ,GAAKA,EAAEoc,cAAcxL,UAAUyL,OAAO,YAE/C,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,uBACLtK,EAAKO,KAAAA,EAAE,UAAY,KAAA,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQ,QAAS,KAAM,iBAExD,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,+BACLtB,EAAGA,GAAAA,GAAG4E,OAAOtL,IACXtK,IACI,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,qCACN,KAAM6S,EAAOc,OAAAA,MAAM,WAAa3T,EAAEmQ,IAClC,QAASnQ,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAE5BA,EAAEjB,QAIf,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,6BACN,KAAM8T,EAAOc,OAAAA,MAAM,iBACnB,QAAS3T,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAE5B,KAAO+R,EAAKO,KAAAA,EAAE,uBArCa,QAAA,QAAA;;ACDR,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAHpD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SAEe,MAAMgK,UAAqBzhB,EAA3B,UAEXH,YAAYvB,GACFA,MAAAA,GACDojB,KAAAA,gBAAkB,KAAKA,gBAAgBnX,KAAK,MAC5CoX,KAAAA,oBAAsB,KAAKA,oBAAoBpX,KAAK,MACpDqX,KAAAA,UAAY,KAAKA,UAAUrX,KAAK,MAChCsX,KAAAA,UAAY,KAAKA,UAAUtX,KAAK,MAChC/D,KAAAA,MAAQ,CACToQ,OAAQ,KAAKiL,YACb5V,OAAQ,KAAK2V,aAIrBF,kBACQ,MAAmB,uBAAnB,KAAKpjB,MAAMM,KACJub,EAAKiD,KAAAA,cAET,KAAK9e,MAAMwjB,SAASC,OAAS5H,EAAKgD,KAAAA,KAAK,KAAK7e,MAAMwjB,SAASC,OAApB,GAAkC,GAAI,IAAM5H,EAAKiD,KAAAA,cAGnGuE,oBAAoBvc,GAChBA,EAAMmc,cAAcS,IAAM7H,EAAKiD,KAAAA,cAGnCwE,YACY,OAAA,KAAKtjB,MAAMM,MACV,IAAA,cACMsY,OAAAA,EAAKO,KAAAA,EAAE,iBACb,IAAA,cACMP,OAAAA,EAAKO,KAAAA,EAAE,oBACb,IAAA,oBACMP,OAAAA,EAAKO,KAAAA,EAAE,cACb,IAAA,sBACMP,OAAAA,EAAKO,KAAAA,EAAE,uBAClB,QACW,MAAA,IAInBwK,YACY,OAAA,KAAK3jB,MAAMM,MACV,IAAA,cAEG,OAAA,EAAA,EAAA,GAAA,IAAA,CACI,KAAMoZ,EAAOc,OAAAA,MAAM,WAAa,KAAKxa,MAAM4jB,UAAU5M,IACrD,QAASnQ,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAE5B,KAAK7G,MAAM4jB,UAAUhe,MAG7B,IAAA,cAEG,OAAA,EACKgT,EAAAA,GAAAA,OAAAA,KAAAA,EAAKO,KAAAA,EAAE,oBAAsB,KAC9B,EAAS,EAAA,GAAA,SAAA,KAAA,KAAKnZ,MAAMuY,YAAYsL,OAAvB,MACR,IAAMjL,EAAKO,KAAAA,EAAE,MAAQ,KACtB,EAAA,EAAA,GAAA,IAAA,CACI,KAAMO,EAAOc,OAAAA,MAAM,WAAa,KAAKxa,MAAM4jB,UAAU5M,IACrD,QAASnQ,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAE5B,KAAK7G,MAAM4jB,UAAUhe,OAIjC,IAAA,oBAEG,OAAA,EAAA,EAAA,GAAA,IAAA,CACI,KAAM8T,EAAOc,OAAAA,MAAM,WAAa,KAAKxa,MAAM4jB,UAAU5M,IACrD,QAASnQ,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAE5B,KAAK7G,MAAM4jB,UAAUhe,MAG7B,IAAA,sBACM,OAAA,KAAK5F,MAAM+J,KAAX,KACX,QACW,MAAA,IAInBwZ,YACY,OAAA,KAAKvjB,MAAMM,MACV,IAAA,oBACM,MAAA,WAAa,KAAKN,MAAM4jB,UAAU5M,GACxC,IAAA,cACM,MAAA,aAAe,KAAKhX,MAAMsY,OAChC,IAAA,cACM,MAAA,aAAe,KAAKtY,MAAMuY,YAAYvB,GAC5C,IAAA,sBACM,OAAA,KAAKhX,MAAMsY,OACtB,QACW,MAAA,IAInBvQ,SAEQ,OAAA,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,0CACN,KAAM2R,EAAOc,OAAAA,MAAM,KAAKtS,MAAMoQ,QAC9B,QAASzR,IACLA,EAAEgW,iBACCpE,EAAAA,GAAAA,4BAA4B,KAAKzY,MAAMgX,IAAIhL,KAAK0M,GAAKgB,EAAOiD,OAAAA,QAAQ9V,GAAG,EAAO,KAAKqB,MAAMoQ,YAGhG,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,2BACP,EAAA,EAAA,GAAA,MAAA,CACI,IAAK,KAAK8K,kBACV,QAASvc,GAAK,KAAKwc,oBAAoBxc,OAG/C,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,UACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACc,uBAAnB,KAAK7G,MAAMM,OACT,EAAC,EAAA,GAAA,EAAD,SACI,MAAA,EAAS,EAAA,GAAA,SAAA,KAAA,KAAKN,MAAMwjB,SAAS5d,OAC7B,EAAO,EAAA,GAAA,OAAA,KAAA,IAAM,KAAKsC,MAAMyF,OAAS,MAGxC,KAAKgW,cAEV,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,OAAO,MAAO9H,EAAK+B,KAAAA,cAAc,KAAK5d,MAAM8jB,YAClDjI,EAAKsC,KAAAA,UAAU,KAAKne,MAAM8jB,eA3HC,QAAA,QAAA;;ACEe,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EALnE,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,2BACA,EAAA,EAAA,QAAA,gCAEmE,EAAA,OAAA,QAAA,SAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,UAAA,GAAA,IAAA,IAAA,KAAA,EAAA,OAAA,UAAA,eAAA,KAAA,EAAA,KAAA,EAAA,GAAA,EAAA,IAAA,OAAA,GAAA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAApD,MAAMC,UAAoCriB,EAA1C,UAEXH,YAAYvB,GACFA,MAAAA,GAENqG,iBAAiB,gBAAiBqS,GAAK,KAAK/M,SAAS,KAGzD5D,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CACI,UACI,iBAAmB8P,EAAGA,GAAAA,GAAGE,cAAcrX,OAAS,kBAAoB,IAExE,SAAS,KACT,OAAQmG,KAAOA,EAAEmc,gBAAkBnc,EAAEmc,cAAc3G,OAASxV,EAAEyR,OAAOb,UAAUV,OAAO,UACtF,QAASlQ,GAAKgR,EAAGA,GAAAA,GAAGE,cAAcrX,QAAUmG,EAAEoc,cAAcxL,UAAUyL,OAAO,YAE7E,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,qCACP,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQrL,EAAGA,GAAAA,GAAGE,cAAcrX,OAAS,QAAU,UAAW,KAAM,WAE5E,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,mDAEHmX,EAAGA,GAAAA,GAAGE,cACCF,EAAGA,GAAAA,GAAGE,cAAcjV,KAChB,CAACC,EAAGC,IAAMA,EAAE8gB,UAAY/gB,EAAE+gB,WAC5B3S,IAAItK,IAAK,EAAC,EAAA,GAAA,EAAD,QAAA,EAAA,CAAc,IAAKA,EAAEmQ,IAAQnQ,KACzC,QA3BqC,QAAA,QAAA;;ACErB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAP9C,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,2BACA,EAAA,EAAA,QAAA,0BACA,EAAA,EAAA,QAAA,0CACA,EAAA,EAAA,QAAA,iDAE8C,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA/B,MAAMmd,UAAetiB,EAArB,UAEXH,YAAYvB,GACFA,MAAAA,GACDikB,KAAAA,gBAAkB,KAAKA,gBAAgBhY,KAAK,MAEjD5F,iBAAiB,gBAAiBqS,GAAK,KAAK/M,SAAS,KAGzDsY,gBAAgBzB,GAER9I,GADJ8I,EAAI3F,iBACAnD,EAAOG,OAAAA,gBAAkBqK,QAAQxK,EAAOG,OAAAA,eACjC,OAAA,EAEJ8C,EAAAA,OAAAA,QAAQ6F,GAGnBza,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gDACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,iBACJ2R,EAAOE,OAAAA,UACN,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,+BAA+B,SAAS,KAC9C,OAAQ/S,KAAOA,EAAEmc,gBAAkBnc,EAAEmc,cAAc3G,OAASxV,EAAEyR,OAAOb,UAAUV,OAAO,UACtF,QAASlQ,GAAKA,EAAEoc,cAAcxL,UAAUyL,OAAO,YAE/C,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,uCACP,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,iBACN,IAAKrL,EAAGA,GAAAA,GAAG4L,OAAS5H,EAAKgD,KAAAA,KAAKhH,EAAGA,GAAAA,GAAG4L,OAAN,GAAoB,GAAI,IAAM5H,EAAKiD,KAAAA,cACjE,QAASjY,GAAKA,EAAEoc,cAAcS,IAAM7H,EAAKiD,KAAAA,kBAGjD,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,iCACP,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,wBACN,KAAMpF,EAAOc,OAAAA,MAAM,UAAY3C,EAAGA,GAAAA,GAAGb,GAAK,aAC1C,QAASnQ,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAE5B+R,EAAKO,KAAAA,EAAE,cAEZ,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,wBACN,KAAMO,EAAOc,OAAAA,MAAM,WACnB,QAAS3T,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAE5B+R,EAAKO,KAAAA,EAAE,aAKtB,CAAC,SAAU,YAAYoC,SAAS7B,EAAOC,OAAAA,QAAUD,EAAOE,OAAAA,UACtD,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,qBACN,KAAMF,EAAOc,OAAAA,MAAMd,EAAOE,OAAAA,SAC1B,QAAS/S,GAAK,KAAKod,gBAAgBpd,KAEnC,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQ,QAAS,KAAM,iBAGvC,EAAC,EAAA,GAAA,EAAD,QAzCJ,QA2CG6S,EAAOE,OAAAA,UAAW,EAAC,EAAA,GAAA,EAAD,QA5CzB,OA6CI,EAAC,EAAA,GAAA,EAAD,QA7CJ,QAnBkC,QAAA,QAAA;;ACP9C,IAAIuK,EAAY,KAChB,SAASC,IAKAD,OAJFA,IACHA,EAAYE,KAGPF,EAGT,SAASE,IAEH,IACI,MAAA,IAAI9S,MACV,MAAO0O,GACHqE,IAAAA,GAAW,GAAKrE,EAAIsE,OAAO/K,MAAM,iEACjC8K,GAAAA,EACKE,OAAAA,EAAWF,EAAQ,IAIvB,MAAA,IAGT,SAASE,EAAWrK,GACX,OAAC,GAAKA,GAAKjU,QAAQ,wEAAwE,MAAQ,IAG5GkM,QAAQiS,aAAeD,EACvBhS,QAAQoS,WAAaA;;AC5BrB,IAAIH,EAAeI,QAAQ,gBAAgBJ,aAE3C,SAASK,EAAgBC,GAClB1f,MAAMC,QAAQyf,KACjBA,EAAU,CAACA,IAGT3N,IAAAA,EAAK2N,EAAQA,EAAQjkB,OAAS,GAE9B,IACKqL,OAAAA,QAAQG,QAAQuY,QAAQzN,IAC/B,MAAOiJ,GACHA,GAAa,qBAAbA,EAAI2E,KACC,OAAA,IAAIC,EAAY,SAAU3Y,EAAS+U,GACxC6D,EAAYH,EAAQve,MAAM,GAAI,IAC3B4F,KAAK,WACGyY,OAAAA,QAAQzN,KAEhBhL,KAAKE,EAAS+U,KAIfhB,MAAAA,GAIV,SAAS6E,EAAYH,GACZ5Y,OAAAA,QAAQ4M,IAAIgM,EAAQxT,IAAI4T,IAGjC,IAAIC,EAAgB,GACpB,SAASC,EAAqB3kB,EAAM2R,GAClC+S,EAAc1kB,GAAQ2R,EAGxBiT,OAAO9S,QAAUA,QAAUsS,EAC3BtS,QAAQ+S,KAAOL,EACf1S,QAAQ+O,SAAW8D,EAEnB,IAAIN,EAAU,GACd,SAASI,EAAWK,GACdpO,IAAAA,EAMA2N,GALA1f,MAAMC,QAAQkgB,KAChBpO,EAAKoO,EAAO,GACZA,EAASA,EAAO,IAGdT,EAAQS,GACHT,OAAAA,EAAQS,GAGb9kB,IAAAA,GAAQ8kB,EAAOnK,UAAUmK,EAAOC,YAAY,KAAO,EAAGD,EAAO1kB,SAAW0kB,GAAQjf,cAChFmf,EAAeN,EAAc1kB,GAC7BglB,OAAAA,EACKX,EAAQS,GAAUE,EAAajB,IAAiBe,GACpDpZ,KAAK,SAAU4G,GAKPA,OAJHA,GACFsS,OAAOE,OAAOjE,SAASnK,EAAIpE,GAGtBA,IACNoJ,MAAM,SAASnV,GAGVA,aAFC8d,EAAQS,GAETve,SAXRye,EAgBN,SAAST,EAAYU,GACdA,KAAAA,SAAWA,EACX7S,KAAAA,QAAU,KAGjBmS,EAAY/c,UAAUkE,KAAO,SAAUwZ,EAAWC,GAEzC,OADc,OAAjB,KAAK/S,UAAkB,KAAKA,QAAU,IAAI3G,QAAQ,KAAKwZ,WACpD,KAAK7S,QAAQ1G,KAAKwZ,EAAWC,IAGtCZ,EAAY/c,UAAUkU,MAAQ,SAAUyJ,GAE/B,OADc,OAAjB,KAAK/S,UAAkB,KAAKA,QAAU,IAAI3G,QAAQ,KAAKwZ,WACpD,KAAK7S,QAAQsJ,MAAMyJ;;AC7EoB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJhD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCAEgD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAjC,MAAMC,UAAiBhkB,EAAvB,UAEXH,YAAYvB,GACFA,MAAAA,GACD2lB,KAAAA,WAAa,KAAKA,WAAW1Z,KAAK,MACnC2Z,IAAAA,EAAQ,GACR3gB,MAAMC,QAAQlF,EAAM4lB,QACpB5lB,EAAM4lB,MAAM7W,QAAQ,CAAClI,EAAEnH,KACA,MAAfmH,EAAEgf,YACFhf,EAAEgf,UAAYnmB,GAElBkmB,EAAMpa,OAAO3E,EAAEgf,UAAW,EAAGhf,KAGhCqB,KAAAA,MAAQ,CAAC0d,MAAOA,GAGzBD,WAAWnD,EAAKqD,GACZrD,EAAI1F,kBACJ0F,EAAI3F,iBACiC,mBAA1B,KAAK7c,MAAM2lB,YACb3lB,KAAAA,MAAM2lB,WAAWnD,EAAIS,cAAcjG,aAAa,cAI7D8I,WAAWC,EAAMC,GAAY,GACrBC,IAAAA,EAAWF,EAAKG,WAAa,UAAYH,EAAKG,WAAa,KAC3D/L,EAAM8L,EAKND,GAJA,QAAQrgB,KAAKogB,EAAKzlB,OAAsB,aAAbylB,EAAKzlB,OAEhC6Z,EAAM0B,EAAK6C,KAAAA,UAAUqH,EAAK/O,GAAI,KAAM,SAEvB,GAAbgP,EACID,MAAe,SAAfA,EAAKxG,QAED,EAAA,EAAA,GAAA,IAAA,CACc,YAAC,KAAKvf,MAAMmmB,SACTF,cAAAA,EACHpK,WAAAA,EAAK6C,KAAAA,UAAUqH,EAAK/O,GAAI,KAAM,KACxC,MAAO,KAAKhX,MAAMmmB,UAAYzM,EAAOc,OAAAA,MAAML,GACrC,MAAA,YAEN,EAAA,EAAA,GAAA,MAAA,CACI,UAAW,aAAe4L,EAAKK,QAAU,WAAa,IACtD,MAAO,yBAA2BvK,EAAKgD,KAAAA,KAAKkH,EAAK/O,GAAI,IAAK,KAAO,QAErE,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,gBACN,MAAO+O,EAAKK,QAAU,YAAc,GACpC,UAAWL,EAAKF,UAChB,QAAShf,GAAK,KAAK8e,WAAW9e,KAE9B,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQ,QAAS,KAAM,YAK5B,OAAfkf,EAAKxG,QAED,EAAA,EAAA,GAAA,IAAA,CAAS,MAAA,YACL,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cAAY,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQ,UAAW,KAAM,oBAKhE,EAAA,EAAA,GAAA,IAAA,CAAS,MAAA,YACL,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,sBAAsB,MAAO,yBAA2B1D,EAAKgD,KAAAA,KAAKkH,EAAK/O,GAAI,IAAK,KAAO,QAClG,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,2BAAyB,EAApC,EAAA,GAAA,MAAA,OAA+C,EAA/C,EAAA,GAAA,MAAA,OAA0D,EAA1D,EAAA,GAAA,MAAA,OAAqE,EAArE,EAAA,GAAA,MAAA,OAAgF,EAAhF,EAAA,GAAA,MAAA,QAIR+O,GAAAA,EAAKG,WAAY,CACb,GAAA,QAAQvgB,KAAKogB,EAAKzlB,MACdylB,MAAe,SAAfA,EAAKxG,QACE,EAAA,EAAA,GAAA,QAAA,CACH,OAAQ1D,EAAK6C,KAAAA,UAAUqH,EAAK/O,GAAI,KAAM,KAChC,MAAA,mCACN,SAAS,OACT,IAAKmD,KAIT,EAAA,EAAA,GAAA,IAAA,CAAS,MAAA,yBACL,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,sBAAsB,IAAK0B,EAAKgD,KAAAA,KAAKkH,EAAK/O,GAAI,IAAK,QAC9D,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,2BAAyB,EAApC,EAAA,GAAA,MAAA,OAA+C,EAA/C,EAAA,GAAA,MAAA,OAA0D,EAA1D,EAAA,GAAA,MAAA,OAAqE,EAArE,EAAA,GAAA,MAAA,OAAgF,EAAhF,EAAA,GAAA,MAAA,QAIR,GAAA,QAAQrR,KAAKogB,EAAKzlB,MAEd,OAAA,EAAA,EAAA,GAAA,IAAA,CACc,YAAC,KAAKN,MAAMmmB,SACTF,cAAAA,EACb,MAAO,KAAKjmB,MAAMmmB,UAAYzM,EAAOc,OAAAA,MAAML,GAC3C,UAAW,SAAW4L,EAAKK,QAAU,WAAa,MAElD,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,YAAY,IAAKjM,KAC5B,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,gBACN,MAAO4L,EAAKK,QAAU,YAAc,GACpC,UAAWL,EAAKF,UAChB,QAAShf,GAAK,KAAK8e,WAAW9e,KAE9B,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQ,QAAS,KAAM,YAO/C,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,oBACLkf,EAAI,OAAY,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gBAA3B,MACE,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,2BAAyB,EAApC,EAAA,GAAA,MAAA,OAA+C,EAA/C,EAAA,GAAA,MAAA,OAA0D,EAA1D,EAAA,GAAA,MAAA,OAAqE,EAArE,EAAA,GAAA,MAAA,OAAgF,EAAhF,EAAA,GAAA,MAAA,QAEJ,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,iBAAe,EAAA,EAAA,GAAA,MAAA,CAAK,MAAO,CAACpH,MAAOoH,EAAKM,SAAW,SAK1Ete,SACQ,OAAC,KAAK/H,MAAM4lB,OAAqC,IAA5B,KAAK5lB,MAAM4lB,MAAMllB,OAGtC,KAAKV,MAAM4lB,OAAS,KAAK5lB,MAAM4lB,MAAMllB,OAAS,GAE1C,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,aACL,KAAKwH,MAAM0d,MAAM9iB,KAAK,CAACC,EAAGC,IAAMD,EAAE8iB,UAAY7iB,EAAE6iB,UAAY,GAAK,GAAG1U,IAAItK,GAAK,KAAKif,WAAWjf,GAAG,MAK1G,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,2CACL,KAAKqB,MAAM0d,MAAM9iB,KAAK,CAACC,EAAGC,IAAMD,EAAE8iB,UAAY7iB,EAAE6iB,UAAY,GAAK,GAAG1U,IAAItK,GAAK,KAAKif,WAAWjf,KAX5F,KAgBf0B,oBACW,QAAA,iBAAA,CAAA,QAAA,QAAA,iBAAgByD,KAAKsa,GAAOA,EAAIjU,QAAQkU,SAGnD3d,qBACW,QAAA,iBAAA,CAAA,QAAA,QAAA,iBAAgBoD,KAAKsa,GAAOA,EAAIjU,QAAQkU,UA9IP,QAAA,QAAA;;ACAG,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJnD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCAEmD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAApC,MAAMC,UAAoB9kB,EAA1B,UAEXqG,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,wBACP,EACI,EAAA,GAAA,MAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CACI,UAAW,yCAA2C,KAAK/H,MAAM6jB,OAAS,GAAK,iBAC/E,IACI,KAAK7jB,MAAM6jB,QAAU,KAAK7jB,MAAM6jB,OAAOJ,OACnC5H,EAAKgD,KAAAA,KAAK,KAAK7e,MAAM6jB,OAAOJ,OAAOzM,GAAI,IAAK,KAC1C6E,EAAKiD,KAAAA,cAEf,MAAQ,KAAK9e,MAAM6jB,OAAS,KAAK7jB,MAAM6jB,OAAOje,KAAO,OAG1D,KAAK5F,MAAMymB,UACV,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,UACP,EAAA,EAAA,GAAA,OAAA,CAAY,MAAA,qBAAqB,KAAKzmB,MAAM6jB,OAAS,KAAK7jB,MAAM6jB,OAAOje,KAAO,SAlBnD,QAAA,QAAA;;ACAE,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJrD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCAEqD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAtC,MAAM8gB,UAAsBhlB,EAA5B,UAEXqG,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,mBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,SACL,KAAK/H,MAAM6jB,QAAU,KAAK7jB,MAAM6jB,OAAO7M,IAAMa,EAAGA,GAAAA,GAAGb,KACjD,EAAC,EAAA,GAAA,EAAD,SACI,MAAA,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,+CACN,QAASnQ,GAAK,KAAK7G,MAAM2mB,YAAY9f,IAEpC+R,EAAKO,KAAAA,EAAE,UAEZ,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,OAPf,OAUD,KAAKnZ,MAAM4mB,UAAY,KAAK5mB,MAAMymB,UACjC,EAAC,EAAA,GAAA,EAAD,SACI,MAAA,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,+CACN,KAAM/M,EAAOc,OAAAA,MACT,aAAe,KAAKxa,MAAMghB,QAAQhK,IAAM,KAAKhX,MAAMghB,QAAQzgB,SAASG,OAAS,GAAK,iBAEtF,QAASmG,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAE5B,KAAK7G,MAAMghB,QAAQzgB,SAASG,OACrBkY,EAAKO,KAAAA,EAAE,UAAW,CAAC9H,MAAM,KAAKrR,MAAMghB,QAAQzgB,SAASG,SACnDkY,EAAKO,KAAAA,EAAE,WAGrB,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,OAbf,OAgBJ,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,oBAAoB,MAAO0C,EAAK+B,KAAAA,cAAc,KAAK5d,MAAMghB,QAAQ8C,YACtEjI,EAAKsC,KAAAA,UAAU,KAAKne,MAAMghB,QAAQ8C,YAEtC,KAAK9jB,MAAM6jB,SACT,EAAC,EAAA,GAAA,EAAD,SACI,MAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,OADf,MAEI,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gBAAgB,KAAK7jB,MAAM6jB,OAAOje,SAIzD,EACM,EAAA,GAAA,MAAA,MAAC,KAAK5F,MAAM4mB,WACV,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,mBACN,OAAQ/f,KAAOA,EAAEmc,gBAAkBnc,EAAEmc,cAAc3G,OAASxV,EAAEyR,OAAOb,UAAUV,OAAO,UACtF,QAASlQ,GAAKA,EAAEoc,cAAcxL,UAAUyL,OAAO,YAE/C,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,kCACL,KAAKljB,MAAM6jB,QAAU,KAAK7jB,MAAM6jB,OAAO7M,IAAMa,EAAGA,GAAAA,GAAGb,KACjD,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,2BACN,QAASnQ,GAAK,KAAK7G,MAAM6mB,cAAchgB,IAEtC+R,EAAKO,KAAAA,EAAE,YAIZ,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,2BACN,QAAStS,GAAK,KAAK7G,MAAM8mB,eAAejgB,IAEvC+R,EAAKO,KAAAA,EAAE,gBAGdtB,EAAGA,GAAAA,GAAG4E,OAAO/b,OAAS,IACpB,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,2BACN,QAASmG,GAAK,KAAK7G,MAAM+mB,aAAalgB,IAErC+R,EAAKO,KAAAA,EAAE,mBAGb,KAAKnZ,MAAMghB,QAAQgG,WAAa,KAAKhnB,MAAM6jB,OAAO7M,IAAMa,EAAGA,GAAAA,GAAGb,KAC7D,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,2BACN,QAASnQ,GAAK,KAAK7G,MAAMinB,eAAepgB,IAEvC+R,EAAKO,KAAAA,EAAE,uBAIpB,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,0BACP,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAO,QAAQ,KAAK,oBAtFP,QAAA,QAAA;;ACDF,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAHnD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SAEe,MAAM+N,UAAoBxlB,EAA1B,UACXqG,SACQof,IAAAA,EAAW,GACTC,MAAAA,EAAS,KAAKpnB,MAAMma,IAAIgB,MAAM,KAC9BhC,EAAIO,EAAOoB,OAAAA,SAAS,IAAK,KAAK9a,MAAMma,IAAIgB,MAAM,KAAK,IACjDiM,OAAAA,EAAO,IACN,IAAA,gBAEGD,EADAC,EAAO1mB,OAAS,GAAkB,QAAb0mB,EAAO,GACjB,sCAAwCA,EAAO,GAAGlhB,QAAQ,QAAQ,IAAM,kBAExE,mCAAqCkhB,EAAO,GAAGlhB,QAAQ,QAAQ,IAAM,mBAAqBiT,EAAI,MAAQA,EAAI,IAEzH,MACC,IAAA,kBACDgO,EAAW,sCAAwCC,EAAO,GAAGlhB,QAAQ,QAAQ,IAAM,kBAGpF,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,4CAA0C,EAAA,EAAA,GAAA,SAAA,CAAQ,iBAAR,EAA8B,MAAA,wBAAwB,IAAKihB,MAjB5E,QAAA,QAAA;;ACDE,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAFrD,IAAA,EAAA,QAAA,UAEe,MAAME,UAAsB3lB,EAA5B,UACXqG,SACUof,MAAAA,EAAW,KAAKnnB,MAAMma,IAAM,wEAE9B,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,0DACP,EAAA,EAAA,GAAA,SAAA,CAAc,MAAA,wBAAwB,IAAKgN,MALN,QAAA,QAAA;;ACCD,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAHpD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SAEe,MAAMG,UAAqB5lB,EAA3B,UACXqG,SACQ,OAAA,KAAKG,MAAMqf,UAEP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,4CACP,EAAA,EAAA,GAAA,SAAA,CAAQ,iBAAR,EAA8B,MAAA,wBAAwB,IAAK,KAAKvnB,MAAMma,QAM9E,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gBAAgB,QAAS,IAAM,KAAKxO,SAAS,CAAC4b,UAAU,MAC/D,EAAA,EAAA,GAAA,MAAA,CAAK,UAAW,KAAKvnB,MAAMwnB,gBAC3B,EAAA,EAAA,GAAA,MAAA,CAAK,IAAK,KAAKxnB,MAAMynB,YAbe,QAAA,QAAA;;ACGF,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EANlD,IAAA,QAAA,QAAA,UACA,MAAA,QAAA,SACA,sBAAA,uBAAA,QAAA,uCACA,wBAAA,uBAAA,QAAA,yCACA,uBAAA,uBAAA,QAAA,wCAEkD,SAAA,uBAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAnC,MAAMC,mBAAmBhmB,QAAzB,UAEXimB,QAAQ9gB,GACAA,GAAAA,EAAEuD,UACFwd,KAAK/gB,EAAEuD,eACJ,CACG+P,MAAAA,EAAMtT,EAAEmW,aAAa,OACvB7C,GAAAA,EAAK,CACC0N,MAAAA,EAASje,SAASvJ,cAAc,UACtCwnB,EAAOC,OAAQ,EACfD,EAAOnE,IAAMvJ,EACbvQ,SAASme,KAAKtjB,YAAYojB,KAKtCtf,oBACQ,KAAKyf,gBACL/iB,MAAMgjB,KAAK,KAAKD,eAAeE,qBAAqB,WAAWnZ,QAAQlI,GAAK,KAAK8gB,QAAQ9gB,IAIjG+B,qBACQ,KAAKof,gBACL/iB,MAAMgjB,KAAK,KAAKD,eAAeE,qBAAqB,WAAWnZ,QAAQlI,GAAK,KAAK8gB,QAAQ9gB,IAIjGshB,aACQ,GAAA,KAAKnoB,MAAM+J,KAAX,YACQ,OAAA,KAAK/J,MAAM+J,KAAX,YAA+B5D,cAAcD,QAAQ,MAAO,IAAIA,QAAQ,uBAAwB,KAC/F,IAAA,eACG,GAAA,KAAKlG,MAAM+J,KAAX,IAAuByP,MAAM,yBAEzB,OAAA,EAAC,QAAA,GAAA,uBAAD,QAAA,CACI,QAASqC,MAAKgD,KAAAA,KAAK,KAAK7e,MAAMynB,QAAQzQ,GAAI,KAAM,KAChD,IAAK,KAAKhX,MAAM+J,KAAX,IAAyB,SAC9B,aAAc,aAI1B,MACC,IAAA,cACG,GAA2B,SAA3B,KAAK/J,MAAM+J,KAAX,MAAsC,KAAK/J,MAAM+J,KAAX,KAElC,OAAA,EAAC,QAAA,GAAA,uBAAD,QAAA,CACI,QAAS8R,MAAKgD,KAAAA,KAAK,KAAK7e,MAAMynB,QAAQzQ,GAAI,KAAM,KAChD,IAAK,KAAKhX,MAAM+J,KAAX,KAAwByP,MAAM,sBAAsB,GAAK,sCAC9D,aAAc,YAI1B,MACC,IAAA,iBACG,GAAA,KAAKxZ,MAAM+J,KAAX,KAEI,OAAA,EAAC,QAAA,GAAA,uBAAD,QAAA,CACI,QAAS8R,MAAKgD,KAAAA,KAAK,KAAK7e,MAAMynB,QAAQzQ,GAAI,KAAM,KAChD,IAAK,KAAKhX,MAAM+J,KAAX,KAAwByP,MAAM,sBAAsB,GAAK,kBAC9D,aAAc,eAIzB,IAAA,YACM,OAAA,EAAC,QAAA,GAAA,sBAAD,QAAA,CAAa,QAAS,KAAKxZ,MAAMynB,QAAS,IAAK,KAAKznB,MAAM+J,KAAX,MACrD,IAAA,eACG,GAAA,KAAK/J,MAAM+J,KAAX,KACO,OAAA,EAAC,QAAA,GAAA,wBAAD,QAAA,CAAe,IAAK,KAAK/J,MAAM+J,KAAX,KAAwByP,MAAM,yBAAyB,KAErF,IAAA,YAEG,GAA2B,SAA3B,KAAKxZ,MAAM+J,KAAX,KACA,MAEH,IAAA,YACA,IAAA,kBACA,IAAA,eAEG,GAAA,KAAK/J,MAAM+J,KAAX,KAEI,OAAA,EAAA,QAAA,GAAA,MAAA,CAAW,MAAA,kBACP,IAAKlD,GAAK,KAAKmhB,eAAiBnhB,EAChC,wBAAyB,CAACsD,OAAQ,KAAKnK,MAAM+J,KAAX,QAOtD,GAAA,KAAK/J,MAAM+J,KAAX,aACQ,OAAA,KAAK/J,MAAM+J,KAAX,aAAgC5D,eAC/B,IAAA,WAEG,GAAA,KAAKnG,MAAM+J,KAAX,KAEI,OAAA,EAAA,QAAA,GAAA,MAAA,CAAW,MAAA,kBACP,IAAKlD,GAAK,KAAKmhB,eAAiBnhB,EAChC,wBAAyB,CAACsD,OAAQ,KAAKnK,MAAM+J,KAAX,QAOtD,MAAA,QAAQpE,KAAK,KAAK3F,MAAM+J,KAAK,kBAEzB,EAAA,QAAA,GAAA,MAAA,CAAW,MAAA,yEACP,EAAA,QAAA,GAAA,MAAA,CACc,YAAC,KAAK/J,MAAMmmB,SACtB,KAAMzM,MAAOc,OAAAA,MAAM,KAAKxa,MAAMma,KACxB,MAAA,2BACI,WAAA,KAAKna,MAAMma,IACrB,IAAM,KAAKna,MAAMynB,UAAY,MAAM9hB,KAAK,KAAK3F,MAAM+J,KAAK,iBAAmB8R,MAAK6C,KAAAA,UAAU,KAAK1e,MAAMynB,QAAQzQ,GAAI,KAAM,OAAS,KAAKhX,MAAMma,OAKvJ,QAAQxU,KAAK,KAAK3F,MAAM+J,KAAK,kBAEzB,EAAA,QAAA,GAAA,MAAA,CAAW,MAAA,yEACP,EAAA,QAAA,GAAA,QAAA,CAAa,MAAA,YAAY,UAAzB,EAAkC,IAAM,KAAK/J,MAAMma,OAI3D,KAAKna,MAAM+J,KAAX,QAA6B,KAAK/J,MAAMynB,SAAW,KAAKznB,MAAM+J,KAAX,cAE/C,EAAA,QAAA,GAAA,IAAA,CAAS,MAAA,4CAA4C,OAAO,SAAS,KAAM2P,MAAOc,OAAAA,MAAM,KAAKxa,MAAMma,OAC/F,EAAA,QAAA,GAAA,MAAA,CAAW,MAAA,OAAO,MAAM,oBAClB,KAAKna,MAAMynB,UAAW,EAAA,QAAA,GAAA,MAAA,CAAW,MAAA,eAAe,IAAM5L,MAAKgD,KAAAA,KAAK,KAAK7e,MAAMynB,QAAQzQ,GAAI,IAAK,QAC9F,EAAA,QAAA,GAAA,MAAA,CAAW,MAAA,kBACP,EAAM,QAAA,GAAA,KAAA,KAAA,KAAKhX,MAAM+J,KAAX,OACJ,KAAK/J,MAAM+J,KAAX,cACE,EAAG,QAAA,GAAA,IAAA,MAAA,EAAS,QAAA,GAAA,QAAA,KAAA,KAAK/J,MAAM+J,KAAX,YAA+B3D,MAAM,EAAG,UAOrE,KAGX2B,SACQ,IAAC,KAAK/H,MAAMma,MAAQ,KAAKna,MAAM+J,KACxB,OAAA,KAEP0d,IAAAA,EAAU,KAAKU,aACfV,OAAAA,GAEI,EAAA,QAAA,GAAA,IAAA,CAAS,MAAA,yBACHA,GAIP,MA1JmC,QAAA,QAAA;;ACAC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EANnD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,+BACA,EAAA,EAAA,QAAA,6BACA,EAAA,EAAA,QAAA,uCAEmD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAApC,MAAMW,UAAoB1mB,EAA1B,UAEXH,YAAYvB,GACFA,MAAAA,GACDkI,KAAAA,MAAQ,CAACuf,QAAS,MAG3BY,qBACQ,IAAC,KAAKroB,MAAMghB,QAAQjX,KACb,MAAA,GAGP0T,IAAAA,EAAM,KAAKzd,MAAMghB,QAAQjX,KAAnB,KAAgC7D,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQoiB,OAElFC,EAAQ,EACR/O,EAAQ,KACLA,KAAAA,EAAQqC,EAAK2B,KAAAA,OAAOC,EAAIrX,MAAMmiB,KAAS,CACtCpO,IAAAA,EAAMX,EAAM,GACZW,EAAIzZ,QAAU,KACdyZ,EAAMA,EAAI/T,MAAM,EAAG,IAAM,MAAQ+T,EAAI/T,OAAO,KAE5CsX,IAAAA,EAAO,YAAclE,EAAM,GAAK,qBAAuBW,EAAM,OACjEsD,EAAMA,EAAIrX,MAAM,EAAGoT,EAAK,MAAY+O,GAAS7K,EAAOD,EAAIrX,MAAMoT,EAAK,MAAY+O,EAAQ/O,EAAM,GAAG9Y,QAChG6nB,GAAS/O,EAAK,MAAYkE,EAAKhd,OAI5B,MAAA,CAACyJ,OADRsT,EAAMA,EAAIvX,QAAQ,MAAO,UAI7ByC,sBACQ,IAAC,KAAKT,MAAMsgB,YAAc,KAAKxoB,MAAMghB,SACjC,KAAKhhB,MAAMghB,QAAQjX,KAAM,CACrB0e,IAAAA,EAAa5M,EAAK2B,KAAAA,OAAO,KAAKxd,MAAMghB,QAAQjX,KAAnB,MACzB0e,EACMnV,EAAAA,MAAAA,IAAI,yBAA2BsP,mBAAmB6F,EAAW,KAAKzc,KAAKvB,IACpEkB,KAAAA,SAAS+c,IAAc,CACxBjB,QAAShd,EACT+d,YAAY,OAIf7c,KAAAA,SAAS+c,IAAc,CACxBF,YAAY,MAOhCzgB,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gBACL,KAAK/H,MAAMghB,QAAQjX,MAAQ,KAAK/J,MAAMghB,QAAQjX,KAAK4e,QACjD,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,UACP,EAAQ,EAAA,GAAA,OAAA,KAAA,KAAK3oB,MAAMghB,QAAQjX,KAAK4e,QAGtC,KAAK3oB,MAAMghB,QAAQjX,MAAQ,KAAK/J,MAAMghB,QAAQjX,KAAKqN,MAAQ,KAAKpX,MAAMghB,QAAQjX,KAAKqN,KAAKkR,SACtF,EAAA,EAAA,GAAA,IAAA,CAAS,MAAA,YAAY,wBAAyB,KAAKD,uBAErD,KAAKngB,MAAMuf,UACT,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,IAAK,KAAKvf,MAAMuf,QAAQtN,IACxB,IAAK,KAAKjS,MAAMuf,QAAQtN,IACxB,QAAS,KAAKjS,MAAMuf,QAAQA,QAC5B,KAAM,KAAKvf,MAAMuf,QAAQ1d,OAG/B,KAAK/J,MAAMghB,QAAQ4E,QAAS,EAAC,EAAA,GAAA,EAAD,QAAA,CAAU,MAAO,KAAK5lB,MAAMghB,QAAQ4E,UArE/B,QAAA,QAAA;;ACAL,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAN9C,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCACA,EAAA,EAAA,QAAA,+BACA,EAAA,EAAA,QAAA,6BAE8C,EAAA,OAAA,QAAA,SAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,UAAA,GAAA,IAAA,IAAA,KAAA,EAAA,OAAA,UAAA,eAAA,KAAA,EAAA,KAAA,EAAA,GAAA,EAAA,IAAA,OAAA,GAAA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA/B,MAAMgD,UAAelnB,EAArB,UAEXH,YAAYvB,GACFA,MAAAA,GACD6oB,KAAAA,YAAc,KAAKA,YAAY5c,KAAK,MACpC6c,KAAAA,WAAa,KAAKA,WAAW7c,KAAK,MAClC8c,KAAAA,YAAc,KAAKA,YAAY9c,KAAK,MACpC+c,KAAAA,WAAa,KAAKA,WAAW/c,KAAK,MAClCgd,KAAAA,WAAa,KAAKA,WAAWhd,KAAK,MAClC0Z,KAAAA,WAAa,KAAKA,WAAW1Z,KAAK,MAClCid,KAAAA,YAAc,KAAKA,YAAYjd,KAAK,MACpCkd,KAAAA,WAAa,KAAKA,WAAWld,KAAK,MAClCmd,KAAAA,WAAa,KAAKA,WAAWnd,KAAK,MAClCod,KAAAA,gBAAkB,KAAKA,gBAAgBpd,KAAK,MAC5C/D,KAAAA,MAAQ,CAAC0d,MAAO,GAAI0D,UAAWvL,KAAKS,OAG7ClW,qBACSqD,KAAAA,SAAS,CACVia,MAAO,KAAK5lB,MAAM4lB,OAAS,GAC3BlI,KAAM,KACN+J,QAAS,OAIjBlf,oBACQqB,SAASqN,eAAe,WACxBrN,SAASqN,eAAe,SAASrS,MAAQ,KAAK5E,MAAM2oB,OAAS,IAE7D/e,SAASqN,eAAe,UACxBrN,SAASqN,eAAe,QAAQrS,MAAQ,KAAK5E,MAAMoX,MAAQ,IAInE6R,WAAWniB,EAAOyiB,GAAe,GACzBziB,EAAMsW,SAAwB,SAAbtW,EAAMhG,IAClB+nB,KAAAA,cAGJ,CAAC,IAAK,QAAS,KAAKtN,SAASzU,EAAMhG,MAGpCyoB,GACKT,KAAAA,WAAWhiB,EAAMmc,eAI9B6F,WAAW3P,GACPA,EAAEzT,MAAMkZ,OAAS,MACjBzF,EAAEzT,MAAMkZ,OAAU,GAAKzF,EAAEqQ,aAAgB,KAEzCrd,WAAW,KAEHsd,IAAAA,EADStQ,EAAEvU,MACE4U,MAAM,yBACnBiQ,GAASA,EAAM,IAAM,KAAKvhB,MAAMwV,MAC1BpK,EAAAA,MAAAA,IAAI,yBAA2BsP,mBAAmB6G,EAAM,KAAKzd,KAAKvB,IAChEA,GAAK0O,EAAEvU,MAAM9C,QAAQ2nB,EAAM,KAAO,GAC7B9d,KAAAA,SAAS,CAAC+R,KAAM+L,EAAM,GAAIhC,QAAShd,OAIrD,GAIPkb,WAAWE,GACHD,IAAAA,EAAQ,KAAK1d,MAAM0d,MACnBpW,EAAIoW,EAAMxK,KAAK5L,GAAKA,EAAEqW,WAAaA,GACvCrW,EAAE4W,SAAU5W,EAAE4W,QACTza,KAAAA,SAAS,CAACia,MAAOA,IAG1BiD,cACQ,KAAK7oB,MAAM0pB,UACNV,KAAAA,aAEAD,KAAAA,cAIbC,aACQW,IAAAA,EAAM,CACN/D,MAAO,KAAK1d,MAAM0d,MAAM5V,OAAOnJ,IAAMA,EAAEuf,SAASjV,IAAItK,GAAKA,EAAC,IAAQmJ,OAAOnJ,KAAOA,GAChFkD,KAAM,CACFqN,KAAMxN,SAASqN,eAAe,QAAQrS,QAG1CgF,SAASqN,eAAe,WACxB0S,EAAI5f,KAAK4e,MAAQ/e,SAASqN,eAAe,SAASrS,OAAS,IAE1Dgc,EAAAA,KAAAA,IAAI,iBAAmB,KAAK5gB,MAAM0pB,UAAWC,GAAK3d,KAAKkP,IACnDvP,KAAAA,SAAS,CAACie,SAAS,IACnB1O,EAILnL,OAAOmI,cAAc,IAAIC,YAAY,cAAe,CAAC0R,OAAS3O,KAHpD/D,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,qBAAsB,kBAK1CxN,KAAAA,SAAS,CAACie,SAAS,IAG5Bb,cACQY,IAAAA,EAAM,CACN7F,UAAWzF,KAAKI,MAAMV,KAAKS,MAAM,KACjCqF,OAAQhM,EAAGA,GAAAA,GAAH,GACRkE,MAAOF,EAAKC,KAAAA,MAAM,KAAK9b,MAAM+b,OAC7Bxb,SAAU,GACVqlB,MAAO,KAAK1d,MAAM0d,MAAM5V,OAAOnJ,IAAMA,EAAEuf,SAASjV,IAAItK,GAAKA,EAAC,IAAQmJ,OAAOnJ,KAAOA,GAChFkD,KAAM,CACFqN,KAAMxN,SAASqN,eAAe,QAAQrS,OAE1CklB,iBAAkBzL,KAAKI,MAAMV,KAAKS,MAAM,MAExC,KAAKxe,MAAM0U,SACXiV,EAAIjV,OAASmH,EAAKC,KAAAA,MAAM,KAAK9b,MAAM0U,SAEnC9K,SAASqN,eAAe,WACxB0S,EAAI5f,KAAK4e,MAAQ/e,SAASqN,eAAe,SAASrS,OAAS,IAG1D+kB,EAAI/D,MAAMllB,QAAWipB,EAAI5f,KAAKqN,MAASuS,EAAI5f,KAAK4e,OAIhDpM,EAAAA,KAAAA,KAAK,gBAAiBoN,GAAK3d,KAAKkP,IAC7B,IAACA,EAGD,OAFM/D,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,qBAAsB,qBAClCxN,KAAAA,SAAS,CAACie,SAAS,IAGxB,KAAK5pB,MAAMymB,SACL1P,EAAAA,MAAAA,OAAO,iBAAmB,KAAK/W,MAAM0U,QAC3C3E,OAAOmI,cAAc,IAAIC,YAAY,WAAY,CAAC0R,OAAS3O,OAErDnE,EAAAA,MAAAA,OAAO,KAAK/W,MAAM+b,OACjBN,EAAAA,OAAAA,SAAS/B,EAAOE,OAAAA,SAAW+P,EAAI5N,MAAM3V,MAAM,IAClD2J,OAAOmI,cAAc,IAAIC,YAAY,aAAc,CAAC0R,OAAS3O,MAE5DvP,KAAAA,SAAS,CACVie,SAAS,EACThE,MAAO,GACPlI,KAAM,KACN+J,QAAS,KACT6B,UAAWvL,KAAKS,QAEhB5U,SAASqN,eAAe,UACxBrN,SAASqN,eAAe,QAAQrS,MAAQ,MAG3C+G,KAAAA,SAAS,CAACie,SAAS,KA5BdzS,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,iBAAkB,gBA+B3C+P,YAAYpiB,GACFijB,MAAAA,EAAQngB,SAASvJ,cAAc,SACrCuJ,SAAS8N,KAAKjT,YAAYslB,GAC1BA,EAAMrkB,MAAMskB,QAAU,OACtBD,EAAMzpB,KAAO,OACbypB,EAAMpU,SAAW,WACjBoU,EAAME,OAAS,UACfF,EAAM1jB,iBAAiB,SAAUS,IACzBmM,IAAAA,EAAOhO,MAAMgjB,KAAKnhB,EAAMwR,OAAOsN,OAC/BA,EAAQ,KAAK1d,MAAM0d,MAClBja,KAAAA,SAAS,CAACia,MAAO,IAAIA,KAAU3gB,MAAMyR,MAAM,KAAMzR,MAAMgO,EAAKvS,SAASyQ,IAAIuH,GAAK,IAAI1D,OAAO,CAC1F6Q,UAAW,UAEVwD,KAAAA,gBAAgBpW,EAAMA,EAAKuB,OAAO0V,YAAatE,EAAMllB,UAE9DqpB,EAAMI,QAGVhB,WAAWriB,GACDijB,MAAAA,EAAQngB,SAASvJ,cAAc,SACrCuJ,SAAS8N,KAAKjT,YAAYslB,GAC1BA,EAAMrkB,MAAMskB,QAAU,OACtBD,EAAMzpB,KAAO,OACbypB,EAAME,OAAS,UACfF,EAAM1jB,iBAAiB,SAAUS,IACzB8e,IAAAA,EAAQ,KAAK1d,MAAM0d,MACnBwE,EAAmBrM,KAAKS,MACvB7S,KAAAA,SAAS,CAACia,MAAO,IAAIA,EAAO,CAC7BC,UAAWuE,EACX9pB,KAAM,QACN+lB,SAAU,MAET+C,KAAAA,WAAWtiB,EAAMwR,OAAOsN,MAAM,GAAIA,EAAMllB,OAAQ0pB,KAEzDL,EAAMI,QAGVd,gBAAgBpW,EAAMoX,EAAI7R,GAClB3R,IAAAA,EAAI,KACJ,IACI,IAACwjB,EACD,OAGA,KADJxjB,EAAIwjB,EAAGC,UACIzjB,EAAEjC,MACT,OAEWiC,EAAEjC,MAAMwO,KACzB,MAAOoP,GAKL,YADMrL,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,0BAA2B,gBAGzC,QAAA,iBAAA,CAAA,QAAA,QAAA,2BAA0BnN,KAAKue,IAClCA,EAAalY,QAAQmY,YACjB3jB,EAAEjC,MACFsW,GAAO,KAAKkO,WACRlO,EACA1C,EAAIvF,EAAKnR,QAAQ+E,EAAEjC,OACnB,KACA,IAAM,KAAKykB,gBAAgBpW,EAAMoX,EAAI7R,OAMrD4Q,WAAWrD,EAAMF,EAAWuE,EAAkBrlB,EAAW,MAC/Cia,MAAAA,EAAW,IAAIyL,SACrBzL,EAAS0L,OAAO,OAAQ3E,GACxB/G,EAAS0L,OAAO,YAAa7E,GACzB3G,IAAAA,EAAakL,EAAmBvjB,IAC5B5B,GAAAA,MAAMC,QAAQ,KAAKgD,MAAM0d,OAAQ,CAC7B7iB,IAAAA,EAAI,KAAKmF,MAAM0d,OACnBG,EAAOhjB,EAAEqY,KAAK5L,GAAKA,EAAEqW,WAAauE,MAE9BrE,EAAKM,SAAWhI,KAAKI,MAAM5X,EAAEiZ,OAAOjZ,EAAEkZ,MAAM,KAC5Chd,EAAEyI,OAAOqa,EAAW,EAAGE,GAClBpa,KAAAA,SAAS,CAACia,MAAO7iB,OAG9B,KAEAumB,EAAW,KAAKphB,MAAMohB,SACrBvK,EAAAA,KAAAA,SAASC,EAAU+G,IAChBuD,GAAAA,GAAY,KAAKphB,MAAMohB,SACvB,OAEAvmB,IAAAA,EAAI,KAAKmF,MAAM0d,MACdG,EAGDhjB,EAAEyI,OAAOqa,EAAW,EAAGE,GAFjB5O,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,gBAAiB,gBAIjCxN,KAAAA,SAAS,CAACia,MAAO7iB,IAClBgC,GACAA,KAELma,EAAYrY,IACX8U,QAAQC,KAAK/U,GACPsQ,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,gBAAiB,gBAC9BpW,IAAAA,EAAI,KAAKmF,MAAM0d,MACnB7iB,EAAEyI,OAAOqa,EAAW,EAAG,CAACA,UAAWA,EAAWpa,MAAO5E,IAChD8E,KAAAA,SAAS,CAACia,MAAO7iB,MAI9BgF,SACQ,OAAA,KAAKG,MAAM0hB,SAEP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,wBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,2BAAyB,EAApC,EAAA,GAAA,MAAA,OAA+C,EAA/C,EAAA,GAAA,MAAA,OAA0D,EAA1D,EAAA,GAAA,MAAA,OAAqE,EAArE,EAAA,GAAA,MAAA,OAAgF,EAAhF,EAAA,GAAA,MAAA,SAKR,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,WACJ,KAAK5pB,MAAMymB,UACV,EAAA,EAAA,GAAA,QAAA,CACI,KAAK,OAAO,GAAG,QACf,WAAY5f,GAAK,KAAKoiB,WAAWpiB,GACjC,YAAa+R,EAAKO,KAAAA,EAAE,wBAG5B,EAAA,EAAA,GAAA,WAAA,CACI,WAAYtS,GAAK,KAAKoiB,WAAWpiB,GAAG,GACpC,GAAG,OACH,KAAK,IACL,aAAa,MACb,UAAW,KAAK7G,MAAM2qB,MACtB,YAAa/R,EAAKO,KAAAA,EAAE,sBAEtB,KAAKjR,MAAMuf,UAAW,EAAC,EAAA,GAAA,EAAD,QAAA,EAAA,CAAY,UAAU,GAAU,KAAKvf,MAAMuf,YAC/D,KAAKvf,MAAM0d,MAAMllB,SACjB,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,IAAK,KAAKwH,MAAM0d,MAAMgF,OAAO,CAAC7nB,EAAEX,IAAMW,EAAIX,EAAE4U,GAAK5U,EAAEyjB,UAAYzjB,EAAEqJ,MAAO,IACxE,MAAO,KAAKvD,MAAM0d,MAClB,WAAY,KAAKD,WACjB,UAAU,KAGlB,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,YACP,EAAA,EAAA,GAAA,SAAA,CACU,MAAA,SACN,QAAS9e,GAAK,KAAKqiB,YAAYriB,GAC/B,MAAO+R,EAAKO,KAAAA,EAAE,kBAEd,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQ,UAAW,KAAM,aAEjC,EAAA,EAAA,GAAA,SAAA,CACU,MAAA,SACN,QAAStS,GAAK,KAAKsiB,WAAWtiB,GAC9B,MAAO+R,EAAKO,KAAAA,EAAE,kBAEd,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQ,QAAS,KAAM,WAEvC,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,WACL,KAAKnZ,MAAM6qB,SACT,EAAA,EAAA,GAAA,SAAA,CAAc,MAAA,SAAS,QAAShkB,GAAK,KAAK7G,MAAM6qB,OAAOhkB,IAClD+R,EAAKO,KAAAA,EAAE,YAGhB,EAAA,EAAA,GAAA,SAAA,CACI,UAAW,KAAKnZ,MAAM+b,MACtB,KAAK,SACC,MAAA,SACN,QAASlV,GAAK,KAAKgiB,YAAYhiB,IAE9B+R,EAAKO,KAAAA,EAAE,eAjUU,QAAA,QAAA;;ACGM,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EATpD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCACA,EAAA,EAAA,QAAA,gCACA,EAAA,EAAA,QAAA,kCACA,EAAA,EAAA,QAAA,gCACA,EAAA,EAAA,QAAA,oCACA,EAAA,EAAA,QAAA,0BAEoD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAArC,MAAM2R,UAAqBppB,EAA3B,UAEXH,YAAYvB,GACFA,MAAAA,GACD+qB,KAAAA,YAAc,KAAKA,YAAY9e,KAAK,MACpC4a,KAAAA,cAAgB,KAAKA,cAAc5a,KAAK,MACxC0a,KAAAA,YAAc,KAAKA,YAAY1a,KAAK,MACpC8a,KAAAA,aAAe,KAAKA,aAAa9a,KAAK,MACtC+e,KAAAA,WAAa,KAAKA,WAAW/e,KAAK,MAClCgf,KAAAA,cAAgB,KAAKA,cAAchf,KAAK,MACxCif,KAAAA,aAAe,KAAKA,aAAajf,KAAK,MACtCgb,KAAAA,eAAiB,KAAKA,eAAehb,KAAK,MAE/C8D,OAAO1J,iBAAiB,cAAe,KAAK4kB,eAExC9Q,IAAAA,EAAMT,EAAOI,OAAAA,WACZK,GAAOna,EAAMghB,UACd7G,EAAM,gBAAkBna,EAAMghB,QAAQhK,IAGrC9O,KAAAA,MAAQ,CAACiS,IAAKA,EAAKsN,QAAS,MAGrCsD,YAAYpB,GACLlR,EAAAA,GAAAA,4BAA4BkR,EAAI3S,IAC9BrL,KAAAA,SAAS,CACVqV,QAAS2I,EACT9F,OAAQ8F,EAAI9F,OACZsH,kBAAmBxB,EAAIppB,UAAY,IAEvC4L,WAAW,KAAK+e,cAGpBF,WAAWlkB,GACPA,EAAM+V,iBACDlR,KAAAA,SAAS,CAACyf,MAAM,IAGzBvE,cAAc/f,GACVA,EAAM+V,iBACHqH,QAAQtL,EAAKO,KAAAA,EAAE,yBACTjG,EAAAA,KAAAA,OAAO,iBAAmB,KAAKhL,MAAM8Y,QAAX,IACzBW,EAAAA,MAAAA,aAENxV,WAAW,IAAM,KAAKR,SAAS,CAAC0f,WAAW,IAAQ,MAI3DpE,iBACSrG,EAAAA,KAAAA,IAAI,iBAAmB,KAAK1Y,MAAM8Y,QAAQhK,GAAI,CAC/C8S,iBAAkBzL,KAAKI,MAAMV,KAAKS,MAAM,KACxCwI,WAAW,IACZhb,KAAKkP,IACCA,EAIEO,EAAAA,OAAAA,SAAS,WAAa,KAAKvT,MAAM8Y,QAAQjF,MAAM/E,IAHlDF,MAAMK,IAAIyB,EAAKO,KAAAA,EAAE,SAAU,kBAOvC4N,aAAajgB,GACTA,EAAM+V,iBACCpB,EAAAA,OAAAA,SAAS,kBAAoB,KAAKvT,MAAM8Y,QAAQhK,IAG3D2P,YAAY7f,GACRA,EAAM+V,iBACDlR,KAAAA,SAAS,CAACyf,MAAM,IAGzBH,cAAcnkB,GACNA,GAAAA,EAAM+iB,OAAO7S,IAAM,KAAK9O,MAAM8Y,QAAQhK,GAAI,CACrChX,KAAAA,MAAMc,KAAOid,KAAKS,MACnBmL,IAAAA,EAAM,KAAKzhB,MAAM8Y,QACrB2I,EAAI5f,KAAOjD,EAAM+iB,OAAO9f,KACxB4f,EAAI/D,MAAQ9e,EAAM+iB,OAAOjE,MACpBja,KAAAA,SAAS,CACVqV,QAAS2I,EACT5f,KAAM4f,EAAI5f,KACVye,YAAY,IAEhBrc,WAAWuM,GAAK,KAAK/M,SAAS,CAACyf,MAAM,MAI7CE,cAAc7E,GAEN,OAAA,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,OAAQ,KAAKve,MAAMkjB,KAAO,KAAKJ,WAAa,KAC5C,MAAO,KAAK9iB,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAQ4E,MAAQ,GACpD,QAAS,KAAK1d,MAAMkjB,KACpB,MAAO,KAAKljB,MAAM8Y,QAAQjF,MAC1B,UAAW,KAAK7T,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAQhK,GAAK,KACrD,OAAQ,KAAK9O,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAX,OAA+B,KAAK9Y,MAAM8Y,QAAQhK,GAC5E,KAAM,KAAK9O,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAQjX,KAAnB,KAAkC,GAC1D,MAAO,KAAK7B,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAQjX,KAAnB,MAAmC,GAC5D,QAAS0c,IAKrBle,oBACQ,KAAKvI,MAAMghB,QACN+J,KAAAA,YAAY,KAAK/qB,MAAMghB,SAEtB1N,EAAAA,MAAAA,IAAI6G,KAAKnO,KAAK2d,GAAO,KAAKoB,YAAYpB,IAEhDxd,WAAW,IAAM4D,OAAOwb,SAAS,EAAG,IAGxCL,eACQ,GAAA,KAAKhjB,MAAM8Y,SAAW,KAAK9Y,MAAM8Y,QAAQjX,KAAM,CAC3C0e,IAAAA,EAAa5M,EAAK2B,KAAAA,OAAO,KAAKtV,MAAM8Y,QAAQjX,KAAnB,MACzB0e,EACMnV,EAAAA,MAAAA,IAAI,yBAA2BsP,mBAAmB6F,EAAW,KAAKzc,KAAKvB,IACpEkB,KAAAA,SAAS,CAAC8b,QAAShd,EAAG+d,YAAY,MAGtC7c,KAAAA,SAAS,CAAC6c,YAAY,KAKvC7f,sBAIQ,GAHC,KAAKT,MAAMsgB,YACP0C,KAAAA,eAEL,KAAKhjB,MAAM8Y,QAAS,CAChBwK,IAAAA,EAAa5hB,SAASqN,eAAe,KAAK/O,MAAM8Y,QAAQhK,IACxD,KAAK9O,MAAM8Y,QAAQhK,IAAM0C,EAAO/L,OAAAA,QAAU6d,EAAW/T,UAAUgU,SAAS,cACxEtf,WAAWuM,IACP8S,EAAWE,eAAe,CAACC,MAAO,QAASC,SAAU,WACrDzf,WAAWuM,GAAK8S,EAAW/T,UAAUV,OAAO,aAAc,MAC3D,MAKfhP,SACQ,IAAA,KAAK/H,MAAM6rB,QAAW,KAAK3jB,MAAM8Y,UAAW,KAAK9Y,MAAMmjB,UAIvD,OAAA,EACI,EAAA,GAAA,MAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CACI,GAAI,KAAKnjB,MAAM8Y,SAAW,KAAK9Y,MAAM8Y,QAAQhK,GAC7C,UAAW,iBAAmB,KAAK9O,MAAM8Y,QAAQhK,IAAM0C,EAAO/L,OAAAA,OAAS,aAAe,KAEpF,KAAKzF,MAAMkjB,MAAQvT,EAAGA,GAAAA,KACpB,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,uCACP,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,4CACN,IAAMA,EAAGA,GAAAA,GAAG4L,OAAS5H,EAAKgD,KAAAA,KAAKhH,EAAGA,GAAAA,GAAG4L,OAAN,GAAoB,IAAK,KAAO5H,EAAKiD,KAAAA,iBAI9E,KAAK5W,MAAMkjB,MAAQ,KAAKE,eAAc,IACrC,KAAKpjB,MAAMkjB,OACV,EAAC,EAAA,GAAA,EAAD,SACI,MAAA,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,OAAQ,KAAKljB,MAAM2b,OACnB,QAAS,KAAK3b,MAAM8Y,QACpB,SAAU,KAAKhhB,MAAM4mB,SACrB,SAAS,KAEb,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,SACP,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,QAAS,KAAK1e,MAAM8Y,QACpB,SAAU,KAAKhhB,MAAM4mB,SACrB,SAAS,KAEb,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,OAAQ,KAAK1e,MAAM2b,OACnB,QAAS,KAAK3b,MAAM8Y,QACpB,YAAa,KAAK2F,YAClB,cAAe,KAAKE,cACpB,aAAc,KAAKE,aACnB,eAAgB,KAAKE,eACrB,SAAU,KAAKjnB,MAAM4mB,SACrB,SAAS,SApLO,QAAA,QAAA;;ACLG,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJvD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,iCAEuD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAxC,MAAMkF,UAAwBpqB,EAA9B,UACXqG,SACQ,OAAC,KAAK/H,MAAMO,UAAa,KAAKP,MAAM+rB,mBAAqB,KAAK/rB,MAAMgsB,oBAAuB,EACpF,MAGP,EACM,EAAA,GAAA,MAAA,KAAA,KAAKhsB,MAAMgsB,oBAAsB,IAC/B,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,WACP,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,yBACN,QAASnlB,GAAK,KAAK7G,MAAMisB,wBAAwBplB,IAEhD+R,EAAKO,KAAAA,EAAE,oBAIlB,EAAa,EAAA,cAAA,KAAKnZ,MAAMO,UAAU4Q,IAAI,CAACtK,EAAEnH,EAAEwsB,IAEpCrlB,EAAE+e,MAAMllB,QAA4B,IAAlBmG,EAAEkD,KAAF,MAAyBlD,EAAEtG,SAASG,QAKvD,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,QAASmG,EACT,IAAKA,EAAEmQ,GACP,OAAQtX,EAAI,KAAKM,MAAMgsB,qBAAuBtsB,EAAI,KAAKM,MAAM+rB,mBAC7D,SAAU,KAAK/rB,MAAM4mB,WARlB,MAYb,KAAK5mB,MAAM+rB,oBAAqB,EAAa,EAAA,cAAA,KAAK/rB,MAAMO,UAAUG,SAChE,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,WACP,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,yBACN,QAASmG,GAAK,KAAK7G,MAAMmsB,oBAAoBtlB,IAE5C+R,EAAKO,KAAAA,EAAE,iBAtCmB,QAAA,QAAA;;ACKF,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EATrD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCACA,EAAA,EAAA,QAAA,gCACA,EAAA,EAAA,QAAA,kCACA,EAAA,EAAA,QAAA,gCACA,EAAA,EAAA,QAAA,oCACA,EAAA,EAAA,QAAA,0BAEqD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAtC,MAAMiT,UAAsB1qB,EAA5B,UAEXH,YAAYvB,GACFA,MAAAA,GACD+qB,KAAAA,YAAc,KAAKA,YAAY9e,KAAK,MACpC4a,KAAAA,cAAgB,KAAKA,cAAc5a,KAAK,MACxC0a,KAAAA,YAAc,KAAKA,YAAY1a,KAAK,MACpC8a,KAAAA,aAAe,KAAKA,aAAa9a,KAAK,MACtC6a,KAAAA,eAAiB,KAAKA,eAAe7a,KAAK,MAC1C+e,KAAAA,WAAa,KAAKA,WAAW/e,KAAK,MAClCogB,KAAAA,WAAa,KAAKA,WAAWpgB,KAAK,MAClCgf,KAAAA,cAAgB,KAAKA,cAAchf,KAAK,MACxCif,KAAAA,aAAe,KAAKA,aAAajf,KAAK,MACtCgb,KAAAA,eAAiB,KAAKA,eAAehb,KAAK,MAE/C8D,OAAO1J,iBAAiB,WAAY,KAAKgmB,YAEzCtc,OAAO1J,iBAAiB,cAAe,KAAK4kB,eACxC9Q,IAAAA,EAAMT,EAAOI,OAAAA,WACZK,GAAOna,EAAMghB,UACd7G,EAAM,gBAAkBna,EAAMghB,QAAQhK,IAGrC9O,KAAAA,MAAQ,CAACiS,IAAKA,GAEfna,EAAMghB,QACD+J,KAAAA,YAAY/qB,EAAMghB,SAEjB1N,EAAAA,MAAAA,IAAI6G,GAAKnO,KAAK2d,GAAO,KAAKoB,YAAYpB,IAIpD1C,iBACSrG,EAAAA,KAAAA,IAAI,iBAAmB,KAAK1Y,MAAM8Y,QAAQhK,GAAI,CAC/C8S,iBAAkBzL,KAAKI,MAAMV,KAAKS,MAAM,KACxCwI,WAAW,IACZhb,KAAKkP,IACCA,EAIEO,EAAAA,OAAAA,SAAS,WAAa,KAAKvT,MAAM8Y,QAAQjF,MAAM/E,IAHlDF,MAAMK,IAAIyB,EAAKO,KAAAA,EAAE,SAAU,kBAOvC4R,YAAYpB,GACLlR,EAAAA,GAAAA,4BAA4BkR,EAAI3S,IAC/BgV,IAAAA,EAAsB,KACtBD,EAAqB,KACrBpC,GAAAA,EAAIppB,SAASG,OAAQ,CACjB4rB,IAAAA,EAAW5S,EAAO/L,OAAAA,OAASgc,EAAIppB,SAASgsB,UAAU1lB,GAAKA,GAAKA,EAAEmQ,KAAO0C,EAAO/L,OAAAA,SAAW,GAC1E,GAAb2e,GACAN,EAAsB3N,KAAKmO,IAAI,EAAGF,EAAW,GAC7CP,EAAqB1N,KAAKoO,IAAI9C,EAAIppB,SAASG,OAAQ4rB,EAAW,KAE9DN,EAAsBrC,EAAIppB,UAAYopB,EAAIppB,SAASG,OAAS,EAC5DqrB,EAAqBpC,EAAIppB,UAAYopB,EAAIppB,SAASG,QAGrDiL,KAAAA,SAAS,CACVqV,QAAS2I,EACT9F,OAAQ8F,EAAI9F,OACZmI,oBAAqBA,EACrBD,mBAAoBA,IAExB5f,WAAW,KAAK+e,cAGpBA,eACQ,GAAA,KAAKhjB,MAAM8Y,SAAW,KAAK9Y,MAAM8Y,QAAQjX,KAAM,CAC3C0e,IAAAA,EAAa5M,EAAK2B,KAAAA,OAAO,KAAKtV,MAAM8Y,QAAQjX,KAAnB,MACzB0e,EACMnV,EAAAA,MAAAA,IAAI,yBAA2BsP,mBAAmB6F,EAAW,KAAKzc,KAAKvB,IACpEkB,KAAAA,SAAS,CAAC8b,QAAShd,EAAG+d,YAAY,MAGtC7c,KAAAA,SAAS,CAAC6c,YAAY,KAKvC7f,sBACS,KAAKT,MAAMsgB,YACP0C,KAAAA,eAIbF,WAAWlkB,GACPA,EAAM+V,iBACDlR,KAAAA,SAAS,CAACyf,MAAM,IAGnBtE,qBAAehgB,GACjBA,EAAM+V,iBACFD,IAAAA,EAAS7M,OAAOsN,KAAK,cAAe,UAClCnC,MAAAA,QAAYpD,EAAKxE,KAAAA,IAAI,iBAAmB,KAAKpL,MAAM8Y,QAAX,GAA2B,oBACzEpE,EAAOnC,SAAW1K,OAAO2K,OAAS,WAAaQ,EAAIwR,MAGvD7F,cAAc/f,GACVA,EAAM+V,iBACHqH,QAAQtL,EAAKO,KAAAA,EAAE,yBACTjG,EAAAA,KAAAA,OAAO,iBAAmB,KAAKhL,MAAM8Y,QAAX,IACzBW,EAAAA,MAAAA,aAENxV,WAAW,KACAsP,EAAAA,OAAAA,SAAS,WAAa,KAAKvT,MAAM8Y,QAAQjF,MAAM/E,GAAI,CAACjN,KAAM,CAAC4iB,mBAAmB,MACtF,MAIX5F,aAAajgB,GACTA,EAAM+V,iBACCpB,EAAAA,OAAAA,SAAS,kBAAoB,KAAKvT,MAAM8Y,QAAQhK,IAG3D2P,YAAY7f,GACRA,EAAM+V,iBACDlR,KAAAA,SAAS,CAACyf,MAAM,IAGzBH,cAAcnkB,GACNA,GAAAA,EAAM+iB,OAAO7S,IAAM,KAAK9O,MAAM8Y,QAAQhK,GAAI,CACrChX,KAAAA,MAAMc,KAAOid,KAAKS,MACnBmL,IAAAA,EAAM,KAAKzhB,MAAM8Y,QACrB2I,EAAI5f,KAAOjD,EAAM+iB,OAAO9f,KACxB4f,EAAI/D,MAAQ9e,EAAM+iB,OAAOjE,MACpBja,KAAAA,SAAS,CACVqV,QAAS2I,EACT5f,KAAM4f,EAAI5f,OAEdoC,WAAWuM,GAAK,KAAK/M,SAAS,CAACyf,MAAM,MAI7CiB,WAAWvlB,GACD8lB,MAAAA,EAAS9lB,EAAM+iB,OACjBF,IAAAA,EAAM,KAAKzhB,MAAM8Y,QACjB4L,EAAOlY,QAAUmH,EAAKC,KAAAA,MAAM8Q,EAAOlY,SAAWiV,EAAG,KACjDiD,EAAO/I,OAAShM,EAAGA,GAAAA,GACnB8R,EAAIppB,SAAW,IAAIopB,EAAIppB,SAAUqsB,GAC5BjhB,KAAAA,SAAS+c,IAAc,CACxBqD,mBAAoBrD,EAAUqD,mBAAqB,EACnD/K,QAAS2I,MAKrB2B,cAAc7E,EAASkE,GAAQ,GAEvB,OAAA,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,OAAQ,KAAKziB,MAAMkjB,KAAO,KAAKJ,WAAa,KAC5C,MAAO,KAAK9iB,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAQ4E,MAAQ,GACpD,MAAO+E,KAAW,KAAKziB,MAAMkjB,KAC7B,MAAO,KAAKljB,MAAM8Y,QAAQjF,MAC1B,UAAW,KAAK7T,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAQhK,GAAK,KACrD,OAAQ,KAAK9O,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAX,OAA+B,KAAK9Y,MAAM8Y,QAAQhK,GAC5E,KAAM,KAAK9O,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAQjX,KAAnB,KAAkC,GAC1D,MAAO,KAAK7B,MAAMkjB,KAAO,KAAKljB,MAAM8Y,QAAQjX,KAAnB,MAAmC,GAC5D,QAAS0c,IAKrBle,oBACI4D,WAAW,IAAM4D,OAAOwb,SAAS,EAAG,IAGxCxjB,SACQ,IAAA,KAAK/H,MAAM6rB,QAAW,KAAK3jB,MAAM8Y,UAAW,KAAK9Y,MAAMmjB,UAIvD,OAAA,EACI,EAAA,GAAA,MAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,WACL,KAAKnjB,MAAMkjB,MAAQ,KAAKE,eAAc,IACrC,KAAKpjB,MAAMkjB,OACV,EACI,EAAA,GAAA,MAAA,MAAA,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,OAAQ,KAAKljB,MAAM2b,OACnB,QAAS,KAAK3b,MAAM8Y,QACpB,SAAU,KAAKhhB,MAAM4mB,SACrB,SAAS,KAEb,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,QAAS,KAAK1e,MAAM8Y,QACpB,SAAU,KAAKhhB,MAAM4mB,SACrB,SAAS,MAIlB,KAAK1e,MAAMkjB,OACV,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,OAAQ,KAAKljB,MAAM2b,OACnB,QAAS,KAAK3b,MAAM8Y,QACpB,YAAa,KAAK2F,YAClB,cAAe,KAAKE,cACpB,eAAgB,KAAKC,eACrB,eAAgB,KAAKG,eACrB,aAAc,KAAKF,aACnB,SAAU,KAAK/mB,MAAM4mB,aAIjC,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,SAAU,KAAK1e,MAAM8Y,QAAQzgB,SAC7B,oBAAqB,KAAK2H,MAAM8jB,oBAChC,mBAAoB,KAAK9jB,MAAM6jB,mBAC/B,wBAAyBrT,GAAK,KAAK/M,SAAS+c,IAAc,CACtDsD,oBAAqB3N,KAAKmO,IAAI,EAAG9D,EAAUsD,oBAAsB,OAErE,oBAAqBtT,GAAK,KAAK/M,SAAS+c,IAAc,CAClDqD,mBAAoB1N,KAAKoO,IAAI,KAAKvkB,MAAM8Y,QAAQzgB,SAAUmoB,EAAUqD,mBAAqB,OAE7F,SAAU,KAAK/rB,MAAM4mB,SACrB,IAAK,KAAK1e,MAAM8Y,QAAQhK,MAEzB,KAAK9O,MAAMkjB,OAAS,KAAKprB,MAAM4mB,WAC9B,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,iBACL/O,EAAGA,GAAAA,KACD,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,uCACP,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,4CACN,IAAMA,EAAGA,GAAAA,GAAG4L,OAAS5H,EAAKgD,KAAAA,KAAKhH,EAAGA,GAAAA,GAAG4L,OAAN,GAAoB,IAAK,KAAO5H,EAAKiD,KAAAA,iBAI9E,KAAKwM,eAAc,EAAM,KAAKtrB,MAAM2qB,UAnOT,QAAA,QAAA;;ACLC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJtD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCAEsD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAvC,MAAMkC,UAAuBnrB,EAA7B,UACXH,YAAYvB,GACFA,MAAAA,GACDkI,KAAAA,MAAQ,CACT8Y,QAAShhB,EAAMghB,SAIvBzY,oBACQ,KAAKL,MAAM8Y,SAAW,KAAK9Y,MAAM8Y,QAAQ6C,QACnCvQ,EAAAA,MAAAA,IAAI,cAAgB,KAAKpL,MAAM8Y,QAAQ6C,QAAQ7X,KAAK6X,GAAUA,GAAU,KAAKlY,SAAS,CAACkY,OAAQA,KAI7GiJ,UAAUtQ,GAEF,OAAA,EAAA,EAAA,GAAA,MAAA,CACI,MAAOA,EAAOA,EAAK5W,KAAO,GAC1B,UAAW,0BAA4B4W,EAAO,GAAK,iBACnD,IAAKA,GAAQA,EAAKiH,OAAS5H,EAAKgD,KAAAA,KAAKrC,EAAKiH,OAAL,GAAmB,IAAK,KAAO5H,EAAKiD,KAAAA,cACzE,QAASjY,GAAKA,EAAEoc,cAAcS,IAAM7H,EAAKiD,KAAAA,gBAKrD/W,SACQ,OAAC,KAAKG,MAAM8Y,SAIZ,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,4DACN,KAAMtH,EAAOc,OAAAA,MAAM,aAAe,KAAKtS,MAAM8Y,QAAQhK,IACrD,QAASnQ,GAAK6S,EAAOiD,OAAAA,QAAQ9V,GAC7B,MAAO,KAAKqB,MAAM8Y,QAAQjX,KAAnB,QAEP,EAAA,EAAA,GAAA,MAAA,CAAK,SAAU,KAAK/J,MAAM+sB,SAAgB,MAAA,wBACpC,KAAKD,UAAU,KAAK5kB,MAAM2b,QAC1B,KAAK3b,MAAM8Y,QAAQyG,SACb,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,iBAAiB,MAAO,0BAA4B5L,EAAKgD,KAAAA,KAAK,KAAK3W,MAAM8Y,QAAQyG,QAAS,IAAK,KAAO,QAC/G,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gBAAgB,KAAKvf,MAAM8Y,QAAQjX,KAAnB,OAErC,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,wDACP,EAAA,EAAA,GAAA,OAAA,CAAY,MAAA,iBACZ,EAAA,EAAA,GAAA,OAAA,CAAY,MAAA,QAAQ,MAAO,KAAK7B,MAAM8Y,QAAQjX,KAAnB,OAAoC8R,EAAK+B,KAAAA,cAAc,KAAK1V,MAAM8Y,QAAQ8I,mBAC/F,KAAK5hB,MAAM8Y,QAAQjX,KAAnB,OAAoC8R,EAAKsC,KAAAA,UAAU,KAAKjW,MAAM8Y,QAAQ8I,oBAE5E,EAAA,EAAA,GAAA,OAAA,CAAY,MAAA,cACJ,KAAK5hB,MAAM8Y,QAAQzgB,WACnB,EACM,EAAA,GAAA,OAAA,KAAA,KAAK2H,MAAM8Y,QAAQzgB,SAAW,KAChC,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQsX,EAAG5Q,GAAAA,MAAM,KAAKiB,MAAM8Y,QAAQhK,IAAM,QAAU,UAAW,KAAM,iBAxB9F,MA3BmC,QAAA,QAAA;;ACAK,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJ3D,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCAE2D,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA5C,MAAMgW,UAA4BtrB,EAAlC,UACXH,YAAYvB,GACFA,MAAAA,GACDkI,KAAAA,MAAQ,CACT8Y,QAAShhB,EAAMghB,QACf2H,MAAO3oB,EAAMghB,QAAQjX,KAAd,OAA+B,GACtCqN,KAAMpX,EAAMghB,QAAQjX,KAAd,MAA8B,GACpC0d,QAASznB,EAAMghB,QAAN,SAA4B,MAEpCiM,KAAAA,aAAe,KAAKA,aAAahhB,KAAK,MACtCihB,KAAAA,QAAU,KAAKA,QAAQjhB,KAAK,MAC5BkhB,KAAAA,oBAAsB,KAAKA,oBAAoBlhB,KAAK,MACpDoc,KAAAA,mBAAqB,KAAKA,mBAAmBpc,KAAK,MAG3D1D,oBACQ,KAAKvI,MAAMghB,QAAQ6C,QACbvQ,EAAAA,MAAAA,IAAI,cAAgB,KAAKtT,MAAMghB,QAAQ6C,QAAQ7X,KAAK6X,GAAUA,GAAU,KAAKlY,SAAS,CAACkY,OAAQA,KAI7GsJ,sBACQ,IAAC,KAAKntB,MAAMghB,QAAQjX,OAAS,KAAK/J,MAAMghB,QAAQjX,KAAnB,MACtB,MAAA,CAACI,OAAQ0R,EAAKsC,KAAAA,UAAU,KAAKne,MAAMghB,QAAQ8I,mBAGlDnB,IAAAA,EAAQ,KAAK3oB,MAAMghB,QAAQjX,KAAnB,MAAiC7D,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQoiB,OAGrF8E,EAAQzE,EAAMxN,MAAM,KACnB,IAAA,IAAIrX,EAAI,EAAGA,EAAIspB,EAAM1sB,OAAQoD,IAC1B,IAACspB,EAAMtpB,GAAG0V,MAAMqC,EAAK0B,KAAAA,WAAY,CAC7BkF,IAAAA,EAAc,KAAKziB,MAAMga,OAAOmB,MAAM,KACtC,IAAA,IAAIkS,EAAI,EAAGA,EAAI5K,EAAY/hB,OAAQ2sB,IACnCD,EAAMtpB,GAAKspB,EAAMtpB,GAAGoC,QAAQ,IAAI2U,OAAO4H,EAAY4K,GAAI,MAAO,aAKnE,MAAA,CAACljB,OADRwe,EAAQyE,EAAMvK,KAAK,MAIvBwF,qBACQ,IAAC,KAAKroB,MAAMghB,QAAQjX,OAAS,KAAK/J,MAAMghB,QAAQjX,KAAnB,KACtB,MAAA,GAIP0T,IAAAA,EAAM,KAAKzd,MAAMghB,QAAQjX,KAAnB,KAAgC7D,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQoiB,OAGlFgF,EAAQ7P,EAAItC,MAAM,MAClB,IAAA,IAAIzb,EAAI,EAAGA,EAAI4tB,EAAM5sB,OAAQhB,IAAK,CAC9B0tB,IAAAA,EAAQE,EAAM5tB,GAAGyb,MAAM,KACtB,IAAA,IAAIrX,EAAI,EAAGA,EAAIspB,EAAM1sB,OAAQoD,IAC1B,IAACspB,EAAMtpB,GAAG0V,MAAMqC,EAAK0B,KAAAA,WAAY,CAC7BkF,IAAAA,EAAc,KAAKziB,MAAMga,OAAOmB,MAAM,KACtC,IAAA,IAAIkS,EAAI,EAAGA,EAAI5K,EAAY/hB,OAAQ2sB,IAC9B5K,EAAY4K,KAGjBD,EAAMtpB,GAAKspB,EAAMtpB,GAAGoC,QAAQ,IAAI2U,OAAO4H,EAAY4K,GAAI,MAAO,cAE9DE,IAAAA,EAAW,KAAKvtB,MAAMutB,SAASpS,MAAM,KACrC,IAAA,IAAIkS,EAAI,EAAGA,EAAIE,EAAS7sB,OAAQ2sB,IAC3BE,EAASF,KAGdD,EAAMtpB,GAAKspB,EAAMtpB,GAAGoC,QAAQ,IAAI2U,OAAO,IAAM0S,EAASF,GAAI,MAAO,cAI7EC,EAAM5tB,GAAK0tB,EAAMvK,KAAK,KAE1BpF,EAAM6P,EAAMzK,KAAK,MAGb0F,IAAAA,EAAQ,EACR/O,EAAQ,KACLA,KAAAA,EAAQqC,EAAK2B,KAAAA,OAAOC,EAAIrX,MAAMmiB,KAAS,CACtCpO,IAAAA,EAAMX,EAAM,GACZW,EAAIzZ,QAAU,KACdyZ,EAAMA,EAAI/T,MAAM,EAAG,IAAM,MAAQ+T,EAAI/T,OAAO,KAE5Cqc,IAAAA,EAAc,KAAKziB,MAAMga,OAAOmB,MAAM,KACtC,IAAA,IAAIzb,EAAI,EAAGA,EAAI+iB,EAAY/hB,OAAQhB,IACnCya,EAAMA,EAAIjU,QAAQ,IAAI2U,OAAO4H,EAAY/iB,GAAI,MAAO,aAEpDge,IAAAA,EAAO,YAAclE,EAAM,GAAK,qBAAuBW,EAAM,OACjEsD,EAAMA,EAAIrX,MAAM,EAAGoT,EAAK,MAAY+O,GAAS7K,EAAOD,EAAIrX,MAAMoT,EAAK,MAAY+O,EAAQ/O,EAAM,GAAG9Y,QAChG6nB,GAAS/O,EAAK,MAAYkE,EAAKhd,OAM5B,MAAA,CAACyJ,OAFRsT,EAAMA,EAAIvX,QAAQ,MAAO,UAK7B+mB,eACQ,GAAA,KAAK/kB,MAAMuf,QAEP,OAAA,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,iBACN,MAAO,0BAA4B5L,EAAKgD,KAAAA,KAAK,KAAK3W,MAAMuf,QAAS,IAAK,KAAO,OAIrFhE,IAAAA,EAAS5H,EAAKiD,KAAAA,cAKd,OAJA,KAAK5W,MAAM2b,QAAU,KAAK3b,MAAM2b,OAAOJ,QAAU,KAAKvb,MAAM2b,OAAOJ,OAAOzM,KAC1EyM,EAAS5H,EAAKgD,KAAAA,KAAK,KAAK3W,MAAM2b,OAAOJ,OAAlB,GAAgC,IAAK,OAGxD,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,iBACN,MAAO,0BAA4BA,EAAS,OAKxDyJ,UACQ,OAAA,KAAKhlB,MAAM8Y,QAAQtM,QAAyC,GAA/B,KAAKxM,MAAM8Y,QAAQzgB,SACzC,aAAe,KAAK2H,MAAM8Y,QAAQtM,OAAS,IAAM,KAAKxM,MAAM8Y,QAAQhK,GAExE,aAAe,KAAK9O,MAAM8Y,QAAQhK,GAG7CjP,SAEQ,OAAA,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,4DACN,KAAM2R,EAAOc,OAAAA,MAAM,KAAK0S,WACxB,QAASrmB,GAAK6S,EAAOiD,OAAAA,QAAQ9V,GAC7B,MAAO,KAAKqB,MAAMygB,QAElB,EAAA,EAAA,GAAA,MAAA,CAAK,SAAU,KAAK3oB,MAAM+sB,SAAgB,MAAA,yBACtC,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,wBACL,KAAKE,gBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,UACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,SACL,KAAK/kB,MAAM2b,OAAS,KAAK3b,MAAM2b,OAAOje,KAAO,OAEnD,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,OAJf,MAKI,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,QACN,MAAQ,KAAKsC,MAAMygB,OAAS9M,EAAK+B,KAAAA,cAAc,KAAK1V,MAAM8Y,QAAQ8I,kBAClE,wBAAyB,KAAKqD,0BAItC,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,QACL,KAAKjlB,MAAMkP,KAAKkR,SACd,EAAA,EAAA,GAAA,IAAA,CAAS,MAAA,YAAY,wBAAyB,KAAKD,yBAG3D,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cACH,KAAKngB,MAAM8Y,QAAQzgB,WACnB,EACM,EAAA,GAAA,OAAA,KAAA,KAAK2H,MAAM8Y,QAAQzgB,SAAW,KAChC,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQsX,EAAG5Q,GAAAA,MAAM,KAAKiB,MAAM8Y,QAAQhK,IAAM,QAAU,UAAW,KAAM,kBA/JtD,QAAA,QAAA;;ACgBpD,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,WAAA,QAAA,oBAAA,QAAA,eAAA,QAAA,YAAA,QAAA,gBAAA,QAAA,aAAA,QAAA,cAAA,QAAA,cAAA,QAAA,YAAA,QAAA,cAAA,EApBP,IAAA,EAAA,EAAA,QAAA,6BACA,EAAA,EAAA,QAAA,kCACA,EAAA,EAAA,QAAA,iCACA,EAAA,EAAA,QAAA,gCACA,EAAA,EAAA,QAAA,oCACA,EAAA,EAAA,QAAA,gCACA,EAAA,EAAA,QAAA,kCACA,EAAA,EAAA,QAAA,mCACA,EAAA,EAAA,QAAA,yCACA,EAAA,EAAA,QAAA,+BAWO,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GATA,MAAM0O,EAAW8H,EAAjB,QASA,QAAA,SAAA,EARA,MAAMpF,EAAcqF,EAApB,QAQA,QAAA,YAAA,EAPA,MAAM/G,EAAgBgH,EAAtB,QAOA,QAAA,cAAA,EANA,MAAMtB,EAAgBuB,EAAtB,QAMA,QAAA,cAAA,EALA,MAAM7C,EAAe8C,EAArB,QAKA,QAAA,aAAA,EAJA,MAAM9B,EAAkB+B,EAAxB,QAIA,QAAA,gBAAA,EAHA,MAAMrH,EAAcsH,EAApB,QAGA,QAAA,YAAA,EAFA,MAAMjB,EAAiBkB,EAAvB,QAEA,QAAA,eAAA,EADA,MAAMf,EAAsBgB,EAA5B,QACA,QAAA,oBAAA,EAAA,MAAMtG,EAAauG,EAAnB,QAAA,QAAA,WAAA;;ACjB4C,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAHnD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SAEe,MAAMC,UAAoBxsB,EAA1B,UAEXH,cACI,QACK4sB,KAAAA,aAAe,KAAKA,aAAaliB,KAAK,MAG/CkiB,aAAarnB,GACTA,EAAM+V,iBACAjX,MAAAA,EAAOgE,SAASoP,cAAc,yCAAyCpU,MACzEmX,IAAAA,EAAQ,GACRnW,IAAAA,EAGO,OAAA,EAFPmW,EAAMnW,KAAOA,EAIjBmW,EAAM+H,UAAYzF,KAAKI,MAAMV,KAAKS,MAAM,KACnCjC,EAAAA,KAAAA,KAAK,cAAeR,GAAO/P,KAAKkP,IAC5BqB,EAAAA,KAAAA,KAAK,0BAA4BrB,EAAIkT,UAAW,IAAIpiB,KAAKkP,IAC1DnL,OAAO0K,SAAW,WAAaS,EAAIlE,OAK/CjP,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,mBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,mBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,SACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,wBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,QACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,qBACP,EAAA,EAAA,GAAA,OAAA,CAAM,GAAG,oBAA0B,MAAA,SAC/B,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAW,IAAA,QAAQ6Q,EAAKO,KAAAA,EAAE,QAD9B,OAEI,EAAA,EAAA,GAAA,QAAA,CACI,KAAK,OACL,KAAK,OACL,UAAU,IACV,UAAU,MACV,YAAaP,EAAKO,KAAAA,EAAE,cACd,MAAA,eACN,UAAQ,MAGhB,EAAA,EAAA,GAAA,SAAA,CACI,QAAStS,GAAK,KAAKsnB,aAAatnB,GAC1B,MAAA,mBAEL+R,EAAKO,KAAAA,EAAE,8BAlDL,QAAA,QAAA;;ACCA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJnD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,QAAA,YAEe,MAAMkV,UAAoB3sB,EAA1B,UAEXH,YAAYvB,GACFA,MAAAA,GACFsuB,IAAAA,EAAUzS,EAAKC,KAAAA,MAAMpC,EAAO1C,OAAAA,IAC5B8I,EAAS,EAAIzB,KAAKI,MAAO1O,OAAOwe,OAAO5P,MAAQ5O,OAAOwe,OAAO3P,OAAW,OACvE1W,KAAAA,MAAQ,CACTomB,QAASA,EACTxO,OAAQA,EACR0O,SAAU,GACVC,cAAe,EACfzU,OAAQN,EAAOoB,OAAAA,SAAS,UAAU5U,QAAQ,MAAO,KACjDqnB,SAAU7T,EAAOoB,OAAAA,SAAS,YAAY5U,QAAQ,MAAO,MAEpDwoB,KAAAA,aAAe,KAAKA,aAAaziB,KAAK,MAC3C8D,OAAO1J,iBAAiB,oBAAqBqS,GAAK,KAAKgW,gBAG3DC,eACQ9W,GAAAA,EAAGA,GAAAA,GAAG4E,QAAsC,SAA5B/C,EAAOO,OAAAA,OAAOF,WAAuB,CACjDgC,IAAAA,EAAQlE,EAAGA,GAAAA,GAAG4E,OAAOrB,KAAKwT,GAAKA,EAAC,IAAU/S,EAAKC,KAAAA,MAAMpC,EAAOO,OAAAA,SACzD8B,OAAAA,EAAQA,EAAK,KAAW,GAE5B,MAAA,GAGXxT,oBACSmmB,KAAAA,eAGTA,eACQ1U,IAAAA,EAASN,EAAOoB,OAAAA,SAAS,UAAU5U,QAAQ,MAAO,KAClDqnB,EAAW7T,EAAOoB,OAAAA,SAAS,YAAYK,MAAM,KAAK0H,KAAK,KACtDtG,EAAAA,KAAAA,KAAK,uBAAwB,CAC9BR,MAAO,KAAK7T,MAAMomB,QAClBtU,OAAQA,EACRuT,SAAUA,IACXvhB,KAAKkP,IACDA,GAAOjW,MAAMC,QAAQgW,EAAG,WAClBvP,KAAAA,SAAS,CACVqO,OAAQA,EACRwU,SAAUtT,EAAG,SACbuT,cAAevT,EAAG,WAClB4E,OAAQ5E,EAAIsT,SAAS9tB,WAMrCqH,SACW9C,OAAAA,MAAMC,QAAQ,KAAKgD,MAAMsmB,YAC5B,EACI,EAAA,GAAA,MAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cAAc,KAAKG,iBAC9B,EAAA,EAAA,GAAA,UAAA,CAAS,GAAG,QAAc,MAAA,kCACtB,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,oFACL,KAAKzmB,MAAMsmB,SAASpoB,MAAM,EAAG,KAAK8B,MAAM4X,QAAQ3O,IAAI,CAACwY,EAAKjqB,KAEpD,EAAC,EAAA,GAAA,EAAD,oBAAA,CACI,SAAUA,EAAI,EACd,IAAKiqB,EAAI3S,GACT,QAAS2S,EACT,QAAS,KAAKzhB,MAAMomB,QACpB,OAAQ,KAAKpmB,MAAM8R,OACnB,SAAU,KAAK9R,MAAMqlB,gBA/DN,QAAA,QAAA;;ACAD,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJlD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,QAAA,YAEe,MAAMsB,UAAmBntB,EAAzB,UAEXH,YAAYvB,GACFA,MAAAA,GACFsuB,IAAAA,EAAUzS,EAAKC,KAAAA,MAAMpC,EAAO1C,OAAAA,IAC5B8I,EAAS,EAAIzB,KAAKI,MAAO1O,OAAOwe,OAAO5P,MAAQ5O,OAAOwe,OAAO3P,OAAW,OACvE1W,KAAAA,MAAQ,CACTomB,QAASA,EACTxO,OAAQA,EACR0O,SAAU,GACVM,UAAW,EACXL,cAAe,EACfM,YAAa,EACbC,KAAM,GAELC,KAAAA,gBAAkBlR,KAAKS,MACvB0Q,KAAAA,SAAW,KAAKA,SAASjjB,KAAK,MAC9ByiB,KAAAA,aAAe,KAAKA,aAAaziB,KAAK,MAC3C8D,OAAO1J,iBAAiB,aAAc,KAAKsmB,mBAG/CpkB,oBACSmmB,KAAAA,aAAa,GAClB3e,OAAO1J,iBAAiB,SAAU,KAAK6oB,UAG3CxkB,uBACIqF,OAAOvJ,oBAAoB,SAAU,KAAK0oB,UAG9CP,eACQ9W,GAAAA,EAAGA,GAAAA,GAAG4E,QAAsC,SAA5B/C,EAAOO,OAAAA,OAAOF,WAAuB,CACjDgC,IAAAA,EAAQlE,EAAGA,GAAAA,GAAG4E,OAAOrB,KAAKwT,GAAKA,EAAC,IAAU/S,EAAKC,KAAAA,MAAMpC,EAAOO,OAAAA,SACzD8B,OAAAA,EAAQA,EAAK,KAAW,GAE5B,MAAA,GAGX2S,aAAaM,GACH1b,EAAAA,MAAAA,IAAI,eAAiB,KAAKpL,MAAMomB,QAAU,SAAWU,GAAMhjB,KAAKkP,IAC/DA,GAAAA,GAAOjW,MAAMC,QAAQgW,EAAG,UAAe,CAClCiU,IAAAA,EAAa9Q,KAAKmO,IAAI,KAAKtkB,MAAM4X,OAAe,GAAPkP,GACzCI,EAAU,KAAKlnB,MAAMsmB,SAEzBtT,EAAG,SAAa/J,IAAI+a,IAAMkD,EAAQhU,KAAKuO,GAAOA,EAAI3S,IAAMkV,EAAElV,KAAOoY,EAAQzuB,KAAKurB,IACzEvgB,KAAAA,SAAS,CACV6iB,SAAUY,EACVX,cAAevT,EAAG,WAClB8T,KAAMA,EACNlP,OAAQqP,IAEK,IAAZH,EAAO,GAAUG,GAClBhjB,WAAW,IAAM,KAAKuiB,aAAaM,EAAO,OAM1DE,WAEwF,QAAhFnf,OAAOsf,iBAAiBzlB,SAASqN,eAAe,SAAS9W,YAAY6pB,SAIrE,KAAKiF,gBAAkB,IAAMlR,KAAKS,QAC7ByQ,KAAAA,gBAAkBlR,KAAKS,MACvB7S,KAAAA,SAAS,CAACojB,YAAahf,OAAOgf,cAG/B9pB,MAAMC,QAAQ,KAAKgD,MAAMsmB,WACtB5kB,SAAS8N,KAAK8R,aAAezZ,OAAOwe,OAAO3P,OAAS,IAAM7O,OAAOgf,aACjE,KAAK7mB,MAAM4X,OAAS,KAAK5X,MAAMumB,gBAE7B9iB,KAAAA,SAAS+c,IAAc,CAAC5I,OAAQ4I,EAAU5I,OAAS,MACpD,KAAK5X,MAAM4X,OAAS,GAAK,KAAK5X,MAAMsmB,SAAS9tB,SACxCguB,KAAAA,aAAa,KAAKxmB,MAAM8mB,KAAO,GAE/BrjB,KAAAA,SAAS+c,IAAc,CAACsG,KAAMtG,EAAUsG,KAAO,QAMpEjnB,SACW9C,OAAAA,MAAMC,QAAQ,KAAKgD,MAAMsmB,YAC5B,EACI,EAAA,GAAA,MAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cAAe,KAAKG,iBAC/B,EAAA,EAAA,GAAA,UAAA,CAAS,GAAG,QAAc,MAAA,kCACtB,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,6EACL,KAAKzmB,MAAMsmB,SAASpoB,MAAM,EAAG,KAAK8B,MAAM4X,QAAQ3O,IAAI,CAACwY,EAAKjqB,KAEpD,EAAC,EAAA,GAAA,EAAD,eAAA,CACI,SAAUA,EAAI,EACd,IAAKiqB,EAAI3S,GACT,QAAS2S,EACT,QAAS9N,EAAKC,KAAAA,MAAMpC,EAAO1C,OAAAA,WA/Fb,QAAA,QAAA;;ACAE,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJpD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCAEoD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAArC,MAAMsY,UAAqB5tB,EAA3B,UAEXH,YAAYvB,GACFA,MAAAA,GACDuvB,KAAAA,eAAiB,KAAKA,eAAetjB,KAAK,MAC1CujB,KAAAA,YAAc,KAAKA,YAAYvjB,KAAK,MACpCwjB,KAAAA,eAAiB,KAAKA,eAAexjB,KAAK,MAC1C/D,KAAAA,MAAQ8M,OAAOlV,OAAO,GAAIE,GAGnCwvB,YAAY1oB,GACFijB,MAAAA,EAAQngB,SAASvJ,cAAc,SACrC0pB,EAAMzpB,KAAO,OACbypB,EAAME,OAAS,UACfF,EAAM1jB,iBAAiB,SAAUS,IACzB4oB,IAAAA,EAAM,IAAIC,MACdD,EAAIE,OAAS,MACLC,IAAAA,EAAIxR,KAAKoO,IAAIiD,EAAII,aAAc,MAC/B3P,EAAI9B,KAAKoO,IAAIiD,EAAIK,cAAe,MAChCnB,EAAIvQ,KAAKoO,IAAIoD,EAAEH,EAAII,aAAc3P,EAAEuP,EAAIK,eACvCC,EAAK3R,KAAKI,MAAMiR,EAAII,aAAalB,GACjCqB,EAAK5R,KAAKI,MAAMiR,EAAIK,cAAcnB,GAC/B,QAAA,iBAAA,CAAA,QAAA,QAAA,2BAA0B5iB,KAAKue,IAClCA,EAAalY,QAAQ6d,OAAOR,EAAKM,EAAIC,EAAIE,IAC/BnR,MAAAA,EAAW,IAAIyL,SACrBzL,EAAS0L,OAAO,OAAQyF,GACnB5T,EAAAA,KAAAA,KAAK,aAAcyC,GAAU,GAAOhT,KAAK+Z,IACrCnF,EAAAA,KAAAA,IAAI,cAAgB,KAAK1Y,MAAM8O,GAAI,CAACyM,OAAQsC,EAAI,KAAS/Z,KAAKkP,IAC1DvP,KAAAA,SAAS,CAAC8X,OAAQsC,IACjBpE,EAAAA,MAAAA,aACAxK,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,+BAMrCuW,EAAIhM,IAAMtJ,IAAIgW,gBAAgBtpB,EAAMwR,OAAOsN,MAAM,MAErDmE,EAAMI,QAGVoF,eAAezoB,GACXA,EAAM+V,iBACgBqH,QAAQtL,EAAKO,KAAAA,EAAE,kBAE5BjG,EAAAA,KAAAA,OAAO,cAAgB,KAAKhL,MAAM8O,IAAIhL,KAAKkP,IACrCO,EAAAA,OAAAA,SAAS,aAK5BgU,eAAe3oB,GACXA,EAAM+V,iBACAjX,MAAAA,EAAOgE,SAASoP,cAAc,qCAAqCpU,MACnEyrB,EAAQzmB,SAASoP,cAAc,sCAAsCpU,MACrE0rB,EAAW1mB,SAASoP,cAAc,yCAAyCpU,MAC3E2rB,EAAsB3mB,SAASoP,cAAc,qDAAqDpU,MAClG4rB,EAAgB5mB,SAASoP,cAAc,+CAA+CpU,MACtFgU,EAAOhP,SAASoP,cAAc,sCAAsCpU,MACtE4X,IAAAA,EAAO,GACP5W,IACA4W,EAAK5W,KAAOA,GAEZyqB,IACA7T,EAAK6T,MAAQA,GAEbC,IACA9T,EAAK8T,SAAWA,GAEpB9T,EAAKzS,KAAO,CAAwBwmB,oBAAAA,EAAsCC,cAAAA,EAAuB5X,KAAAA,GAC5FgI,EAAAA,KAAAA,IAAI,cAAgB,KAAK1Y,MAAM8O,GAAIwF,GAAMxQ,KAAKkP,IAC3CA,EAAG,MACG/D,EAAAA,MAAAA,IAAI+D,EAAG,MAAW,iBAEnBvP,KAAAA,SAAS+c,GAAa1T,OAAOlV,OAAO4oB,EAAWxN,IACpDT,SAAS4B,KAAO3C,EAAOc,OAAAA,MAAMC,SAASF,SAAW,8BAK7DxS,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,kBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,SACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,uBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,wBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,QACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,oBACP,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,kDACN,IAAK,KAAKG,MAAMub,OAAS5H,EAAKgD,KAAAA,KAAK,KAAK3W,MAAMub,OAAX,GAAyB,IAAK,KAAO5H,EAAKiD,KAAAA,cAC7E,QAASjY,GAAKA,EAAEoc,cAAcS,IAAM7H,EAAKiD,KAAAA,cACzC,QAASjY,GAAK,KAAK2oB,YAAY3oB,OAGvC,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,qBACP,EAAA,EAAA,GAAA,OAAA,CAAM,GAAG,gBAAsB,MAAA,SAC3B,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAW,IAAA,QAAQ+R,EAAKO,KAAAA,EAAE,QAD9B,OAEI,EAAA,EAAA,GAAA,QAAA,CACI,KAAK,OACL,KAAK,OACL,UAAU,IACV,UAAU,MACV,YAAaP,EAAKO,KAAAA,EAAE,cACpB,MAAO,KAAKjR,MAAMtC,KACZ,MAAA,mBAGd,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAW,IAAA,SAASgT,EAAKO,KAAAA,EAAE,SAD/B,OAEI,EAAA,EAAA,GAAA,QAAA,CACI,KAAK,QACL,KAAK,QACL,YAAaP,EAAKO,KAAAA,EAAE,eACpB,MAAO,KAAKjR,MAAMmoB,MACZ,MAAA,mBAGd,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAW,IAAA,YAAYzX,EAAKO,KAAAA,EAAE,YADlC,OAEI,EAAA,EAAA,GAAA,QAAA,CACI,KAAK,WACL,KAAK,WACL,aAAa,MACb,UAAU,IACV,UAAU,MACV,YAAaP,EAAKO,KAAAA,EAAE,kBACd,MAAA,mBAGd,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAW,IAAA,uBAAwBP,EAAKO,KAAAA,EAAE,uBAD9C,MAEI,EAAA,EAAA,GAAA,SAAA,CACI,KAAK,sBACC,MAAA,eACN,cACI,CACI,OACA,SACA,QACA,SACA,WACFrX,QAAQ,KAAKoG,MAAM6B,KAAX,uBAGd,EAAA,EAAA,GAAA,SAAA,CAAQ,MAAM,QAAS6O,EAAKO,KAAAA,EAAE,UAC9B,EAAA,EAAA,GAAA,SAAA,CAAQ,MAAM,UAAWP,EAAKO,KAAAA,EAAE,YAChC,EAAA,EAAA,GAAA,SAAA,CAAQ,MAAM,SAAUP,EAAKO,KAAAA,EAAE,WAC/B,EAAA,EAAA,GAAA,SAAA,CAAQ,MAAM,UAAWP,EAAKO,KAAAA,EAAE,YAChC,EAAA,EAAA,GAAA,SAAA,CAAQ,MAAM,WAAYP,EAAKO,KAAAA,EAAE,eAGzC,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAW,IAAA,iBAAkBP,EAAKO,KAAAA,EAAE,iBADxC,MAEI,EAAA,EAAA,GAAA,SAAA,CAAQ,KAAK,gBAAsB,MAAA,eAAe,MAAO,KAAKjR,MAAM6B,KAAX,eACnD8N,EAAGA,GAAAA,GAAG4E,OAAOtL,IAAItK,IAAK,EAAA,EAAA,GAAA,SAAA,CAAQ,MAAOA,EAAEmQ,IAAKnQ,EAAEjB,UAGxD,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAa,MAAA,aAAiB,IAAA,QAAQgT,EAAKO,KAAAA,EAAE,QADjD,MAEI,EAAA,EAAA,GAAA,SAAA,CAAQ,KAAK,OAAa,MAAA,eAAe,MAAO,KAAKjR,MAAM6B,KAAX,MAC1CiL,OAAOqE,KAAKT,EAAKE,KAAAA,cAAc3H,IAAIkc,IAAK,EAAA,EAAA,GAAA,SAAA,CAAQ,MAAOA,GAAIzU,EAAKE,KAAAA,aAAauU,QAGvF,EAAA,EAAA,GAAA,SAAA,CACI,QAASxmB,GAAK,KAAK4oB,eAAe5oB,GAC5B,MAAA,mBAEL+R,EAAKO,KAAAA,EAAE,mBAGhB,EAAA,EAAA,GAAA,OAAA,CAAM,GAAG,iBACL,EAAA,EAAA,GAAA,QAAA,CAAa,MAAA,UAAc,IAAA,mBAAoBP,EAAKO,KAAAA,EAAE,6BACtD,EAAA,EAAA,GAAA,SAAA,CACI,QAAStS,GAAK,KAAK0oB,eAAe1oB,GAClC,KAAK,kBACC,MAAA,kBAEL+R,EAAKO,KAAAA,EAAE,0BAQlC,KAAKjR,MAAM4O,QACT,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,oCACL,KAAK5O,MAAM4O,SA7Le,QAAA,QAAA;;ACAC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJrD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCAEqD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAtC,MAAM2Z,UAAsB/uB,EAA5B,UAEXH,YAAYvB,GACFA,MAAAA,GACDyvB,KAAAA,eAAiB,KAAKA,eAAexjB,KAAK,MAC1CykB,KAAAA,WAAa,KAAKA,WAAWzkB,KAAK,MAClC0kB,KAAAA,MAAQ,KAAKA,MAAM1kB,KAAK,MACxB2kB,KAAAA,eAAiB,KAAKA,eAAe3kB,KAAK,MAC1C/D,KAAAA,MAAQ8M,OAAOlV,OAAO,CAAC+wB,cAAe,IAAK7wB,GAGpD4wB,eAAe9pB,GACXA,EAAM+V,iBACDN,EAAAA,KAAAA,KAAK,eAAiB,KAAKrU,MAAM8O,GAAK,oBAAqB,IAAIhL,KAAKkP,IAC/D/D,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,kBACXwI,EAAAA,MAAAA,aACDhW,KAAAA,SAAS,CAACyiB,UAAWlT,EAAG,cAIrCuU,eAAe3oB,GACXA,EAAM+V,iBACAjX,MAAAA,EAAOgE,SAASoP,cAAc,qCAAqCpU,MACrEmX,IAAAA,EAAQ,GACRnW,IACAmW,EAAMnW,KAAOA,GAEZgb,EAAAA,KAAAA,IAAI,eAAiB,KAAK1Y,MAAM8O,GAAI+E,GAAO/P,KAAKkP,IAC3C/D,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,kBACXwI,EAAAA,MAAAA,aACDhW,KAAAA,SAAS+c,GAAa1T,OAAOlV,OAAO4oB,EAAWxN,MAI5DwV,WAAW5pB,GAEH+Q,GADJ/Q,EAAM+V,iBACFhF,EAAGA,GAAAA,GAAG9N,KAAN,eAA+B,KAAK7B,MAAM8O,GAAI,CAC1CwF,IAAAA,EAAO,GACXA,EAAKzS,KAAO,CAAkB8N,cAAAA,EAAGA,GAAAA,GAAG4E,OAAO,GAAGzF,IACzC4J,EAAAA,KAAAA,IAAI,cAAgB/I,EAAGA,GAAAA,GAAGb,GAAIwF,GAAMxQ,KAAKkP,IACvCrP,EAAAA,GAAAA,SACE8kB,KAAAA,eAGJA,KAAAA,QAIbA,QACSpU,EAAAA,KAAAA,KAAK,eAAiB,KAAKrU,MAAM8O,GAAK,SAAU,IAAIhL,KAAKkP,IACrDA,GAAQA,EAAG,YAGTrP,EAAAA,GAAAA,SACGsL,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,eACVsC,EAAAA,OAAAA,SAAS,MAJVtE,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,SAAU,kBASvCpR,SAEQ,OAAA,EACI,EAAA,GAAA,MAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,wBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,SACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,wBACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,QACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,qBACP,EAAA,EAAA,GAAA,OAAA,CAAM,GAAG,gBAAsB,MAAA,4BAC3B,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAW,IAAA,QAAQ6Q,EAAKO,KAAAA,EAAE,QAD9B,OAEI,EAAA,EAAA,GAAA,QAAA,CACI,KAAK,OACL,KAAK,OACL,UAAU,IACV,UAAU,MACV,YAAaP,EAAKO,KAAAA,EAAE,cACpB,MAAO,KAAKjR,MAAMtC,KACZ,MAAA,eACN,UAAQ,MAGhB,EAAA,EAAA,GAAA,SAAA,CAAQ,QAAS,KAAK6pB,eAAsB,MAAA,6BAA6B7W,EAAKO,KAAAA,EAAE,mBAEpF,EAAA,EAAA,GAAA,OAAA,CAAY,MAAA,4BACR,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAW,IAAA,aAAaP,EAAKO,KAAAA,EAAE,mBADnC,OAEI,EAAA,EAAA,GAAA,QAAA,CACI,KAAK,OACL,KAAK,YACL,MACIsB,SAASqW,SACH,KAAOrW,SAASsW,SAChB,eACA,KAAK7oB,MAAMkmB,UAEf,MAAA,4BACN,SAAS,eAGjB,EAAA,EAAA,GAAA,SAAA,CAAc,MAAA,4BAA4B,QAAS,KAAKwC,gBACnDhY,EAAKO,KAAAA,EAAE,4BAGhB,EACI,EAAA,GAAA,OAAA,MAAA,EAAA,EAAA,GAAA,SAAA,CACI,QAAStS,GAAK,KAAK6pB,WAAW7pB,GACxB,MAAA,0BAEL+R,EAAKO,KAAAA,EAAE,uBASxC,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,mBACP,EAAKP,EAAAA,GAAAA,KAAAA,KAAAA,EAAKO,KAAAA,EAAE,UACV,KAAKnZ,MAAMgxB,MAAM7f,IAAIqL,GAAQA,IAC3B,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cACP,EAAA,EAAA,GAAA,MAAA,CACU,MAAA,yBACN,IAAKA,EAAKiH,OAAS5H,EAAKgD,KAAAA,KAAKrC,EAAKiH,OAAL,GAAmB,IAAK,KAAO5H,EAAKiD,KAAAA,cACjE,QAASjY,GAAKA,EAAEoc,cAAcS,IAAM7H,EAAKiD,KAAAA,iBAE7C,EAAOtC,EAAAA,GAAAA,OAAAA,KAAAA,EAAI,WAhIc,QAAA,QAAA;;ACEL,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EANhD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,uCACA,EAAA,EAAA,QAAA,iCACA,EAAA,EAAA,QAAA,kCAEgD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAjC,MAAMyU,UAAiBvvB,EAAvB,UAEXH,YAAYvB,GACFA,MAAAA,GACDkI,KAAAA,MAAQ,GACTlI,EAAM8Z,WACAxG,EAAAA,MAAAA,IAAItT,EAAM8Z,WAAW9N,KAAKkP,GAAO,KAAKvP,SAAS,CAACsO,OAAQiB,KAItEnT,SACQ,GAAC,KAAKG,MAAM+R,QAAWpC,EAAGA,GAAAA,GAI1B,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,aACP,EAAA,EAAA,GAAA,KAAA,CAAU,MAAA,iBACN,EAAA,EAAA,GAAA,KAAA,CAAU,MAAA,aACN,EAAA,EAAA,GAAA,IAAA,CACY,MAAA,YAAiD,QAAnC,KAAK3P,MAAM+R,OAAX,WAA4C,UAAY,IAC9E,KAAMP,EAAOc,OAAAA,MAAM,UAAY3C,EAAGA,GAAAA,GAAGb,GAAK,aAC1C,QAASnQ,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAC/B+R,EAAKO,KAAAA,EAAE,aAEXtB,EAAGA,GAAAA,GAAG4E,OAAO/b,OAAS,IACpB,EAAA,EAAA,GAAA,KAAA,CACU,MAAA,+BAA+B,SAAS,KAC9C,OAAQmG,KAAOA,EAAEmc,gBAAkBnc,EAAEmc,cAAc3G,OAASxV,EAAEyR,OAAOb,UAAUV,OAAO,UACtF,QAASlQ,GAAKA,EAAEoc,cAAcxL,UAAUyL,OAAO,YAE/C,EAAA,EAAA,GAAA,MAAA,CAAY,MAAA,YAAiD,SAAnC,KAAKhb,MAAM+R,OAAX,WAA6C,UAAY,KAAOrB,EAAKO,KAAAA,EAAE,YACjG,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,iBACLtB,EAAGA,GAAAA,GAAG4E,OAAOtL,IACXtK,IACI,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,gBACN,KAAM6S,EAAOc,OAAAA,MAAM,WAAa3T,EAAEmQ,GAAK,aACvC,QAASnQ,GAAK6S,EAAOiD,OAAAA,QAAQ9V,IAC/BA,EAAEjB,UAOU,SAApC,KAAKsC,MAAM+R,OAAX,aACE,EAAC,EAAA,GAAA,EAAD,QACQ,KAAK/R,MAAM+R,QAGe,UAApC,KAAK/R,MAAM+R,OAAX,aACE,EAAC,EAAA,GAAA,EAAD,QACQ,KAAK/R,MAAM+R,UApDS,QAAA,QAAA;;ACDH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAL7C,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,2BACA,EAAA,EAAA,QAAA,iCAE6C,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA9B,MAAMiX,UAAcxvB,EAApB,UAEXH,cACI,QACI4vB,IAAAA,EAAa,IAAI/W,IAAIrK,OAAO0K,UAC3B0W,EAAWnW,aAAa1H,IAAI,WAUxBA,EAAAA,KAAAA,IAAI,iBAAmB6d,EAAWnW,aAAa1H,IAAI,YAAYtH,KAAKkgB,IAChEvgB,KAAAA,SAAS,CACVmU,QAAQ,EACR/D,MAAO,KACP4M,MAAQuD,GAAKA,EAAEniB,KAAK4e,OAAU,GAC9BvR,KAAO8U,GAAKA,EAAEniB,KAAKqN,MAAS,GAC5B+C,IAAK,GACLyL,MAAQsG,GAAKA,EAAEtG,OAAU,SAhB5B1d,KAAAA,MAAQ,CACT4X,QAAQ,EACR/D,MAAO,KACP4M,MAAOwI,EAAWnW,aAAa1H,IAAI,UAAY,GAC/C8D,KAAM+Z,EAAWnW,aAAa1H,IAAI,SAAW,GAC7C6G,IAAKgX,EAAWnW,aAAa1H,IAAI,QAAU,GAC3CsS,MAAO,MAcZtS,EAAAA,GAAAA,MAAMtH,KAAKwQ,IACgB,GAAtBA,EAAKC,OAAO/b,SACPiL,KAAAA,SAAS,CAACoQ,MAAOS,EAAKC,OAAO,GAAZ,KACf7C,EAAAA,OAAAA,QAAU,WAAa4C,EAAKC,OAAO,MAG7C2U,KAAAA,YAAc,KAAKA,YAAYnlB,KAAK,MAG7CmlB,YAAYvqB,GACH8E,KAAAA,SAAS,CAACoQ,MAAOlV,EAAEyR,OAAO1T,QACxBgV,EAAAA,OAAAA,QAAU/S,EAAEyR,OAAO1T,MAAMwB,MAAM,GAG1C2B,SACQ,GAAC,KAAKG,MAAL,OAID,OAAA,EAAA,EAAA,GAAA,UAAA,CAAe,MAAA,SACX,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,aACL2P,EAAGA,GAAAA,IAAMA,EAAGA,GAAAA,GAAG4E,OAAO/b,OAAS,IAC7B,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,SACP,EAAA,EAAA,GAAA,QAAA,CAAW,IAAA,sBAAsBkY,EAAKO,KAAAA,EAAE,wBACxC,EAAA,EAAA,GAAA,SAAA,CACI,cAAc,KACR,MAAA,eACN,KAAK,qBACL,SAAUtS,GAAK,KAAKuqB,YAAYvqB,GAChC,UAAQ,GAENgR,EAAGA,GAAAA,GAAG4E,OAAOtL,IAAItK,IAAK,EAAA,EAAA,GAAA,SAAA,CAAQ,MAAOA,EAAC,IAASA,EAAEjB,UAI/D,EAAC,EAAA,GAAA,EAAD,QAAA,CACI,OAAO,EACP,MAAO,KAAKsC,MAAM6T,MAClB,MAAO,KAAK7T,MAAMygB,MAClB,KAAM,KAAKzgB,MAAMkP,MAAQ,KAAKlP,MAAMiS,IAAM,KAAKjS,MAAMkP,KAAO,KAAO,KAAKlP,MAAMiS,IAAM,GACpF,MAAO,KAAKjS,MAAM0d,WAlEG,QAAA,QAAA;;ACMM,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAXnD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,gCACA,EAAA,EAAA,QAAA,gCACA,EAAA,EAAA,QAAA,+BACA,EAAA,EAAA,QAAA,2BACA,EAAA,EAAA,QAAA,iCACA,EAAA,EAAA,QAAA,oCACA,EAAA,EAAA,QAAA,yBAEmD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAApC,MAAMyL,UAAoB3vB,EAA1B,UAEXqG,SACQ,GAAqB,YAArB,KAAK/H,MAAM2N,OAEP,OAAA,EAAA,EAAA,GAAA,UAAA,CAAe,MAAA,uCACX,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cACP,EAAC,EAAA,GAAA,EAAD,QAAA,CAAU,IAAK,KAAK3N,MAAM8Z,UAAW,UAAW,KAAK9Z,MAAM8Z,cAKnE,OAAA,KAAK9Z,MAAM2Z,OACV,IAAA,eACM,OAAA,EAAC,EAAA,GAAA,EAAD,QAAP,MACC,IAAA,QAEG,OAAA,EAAC,EAAA,GAAA,EAAD,QADJ,MAGC,IAAA,WAEG,OAAA,EAAA,EAAA,GAAA,UAAA,CAAe,MAAA,uCACX,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,mBACP,EAAC,EAAA,GAAA,EAAD,cAAA,CACI,QAASD,EAAOoB,OAAAA,SAAS,QAASpB,EAAOM,OAAAA,QACzC,IAAK,KAAKha,MAAMgX,GAChB,IAAK,KAAKhX,MAAM8Z,cAK/B,IAAA,SACG,MAAqB,SAArB,KAAK9Z,MAAM2N,QAEP,EAAA,EAAA,GAAA,UAAA,CAAe,MAAA,SACX,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cACP,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAO,EAAM,MAAO,KAAK3N,MAAMgX,OAKnD0C,EAAOoB,OAAAA,SAAS,WAAapB,EAAOoB,OAAAA,SAAS,aAEzC,EACI,EAAA,GAAA,MAAA,MAAA,EAAC,EAAA,GAAA,EAAD,QAAA,CAAa,IAAK,KAAK9a,MAAMgX,OAKrC,EACI,EAAA,GAAA,MAAA,MAAA,EAAC,EAAA,GAAA,EAAD,QAAA,CAAY,IAAK,KAAKhX,MAAMgX,MAC5B,EAAA,EAAA,GAAA,IAAA,CACU,MAAA,6CACN,KAAM0C,EAAOc,OAAAA,MAAM,WAAa,KAAKxa,MAAMgX,GAAK,UAChD,QAASnQ,GAAK6S,EAAOiD,OAAAA,QAAQ9V,KAE7B,EAAC,EAAA,GAAA,EAAD,QAAA,CAAQ,OAAQ,QAAS,KAAM,mBAxDR,QAAA,QAAA;;;;ACPN,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJ7C,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,2BAE6C,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA9B,MAAMyqB,UAAc5vB,EAApB,UAEXH,cACI,QACK2G,KAAAA,MAAQ,CACTqpB,WAAW,EACX9lB,MAAO,IAEN+lB,KAAAA,cAAgB,KAAKA,cAAcvlB,KAAK,MACxCwlB,KAAAA,kBAAoB,KAAKA,kBAAkBxlB,KAAK,MAChDylB,KAAAA,kBAAoB,KAAKA,kBAAkBzlB,KAAK,MAE/CqH,EAAAA,MAAAA,IAAI,UAAUtH,KAAKsQ,GAAUA,GAAU5C,EAAO+B,OAAAA,SAAS,MAGjEgW,kBAAkB5qB,GACdA,EAAEgW,iBACEwT,IAAAA,EAAQzmB,SAASqN,eAAe,SAASrS,OAAS,GACtDyrB,EAAMlqB,cACDwF,KAAAA,SAAS,CAACie,SAAS,IACnBrN,EAAAA,KAAAA,KAAK,2BAA4B,CAACoV,KAAMtB,IAAQrkB,KAAKkP,IACjDvP,KAAAA,SAAS,CAACie,SAAS,IACpB1O,IAAQA,EAAI8F,QACN7J,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,6BAEXhC,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE+B,EAAI8F,SAAU,kBAK3CwQ,cAAc3qB,GACVA,EAAEgW,iBACGlR,KAAAA,SAAS,CAAC4lB,WAAW,EAAO3H,SAAS,IACtCyG,IAAAA,EAAQzmB,SAASqN,eAAe,SAASrS,OAAS,GACtDyrB,EAAMlqB,cACAmqB,MAAAA,EAAW1mB,SAASqN,eAAe,YAAYrS,MAChD2X,EAAAA,KAAAA,KAAK,aAAc,CAAC8T,MAAOA,EAAOC,SAAUA,IAAWtkB,KAAKkP,IACxDvP,KAAAA,SAAS,CAACie,SAAS,IACpB1O,GAAOA,EAAI0W,QACLje,EAAAA,MAAAA,IAAI,SAAUuH,EAAI0W,SAAS5lB,KAAK,KAC/BH,EAAAA,GAAAA,SAASG,KAAK,KACbG,WAAW,IAAMuN,EAAO+B,OAAAA,SAAS,KAAM,SAI3CP,EAAI8F,QACE7J,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE+B,EAAI8F,SAAU,gBAEzB7J,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,SAAU,kBAM3CuY,oBACS/lB,KAAAA,SAAS,CAACkmB,mBAAmB,IAGtC9pB,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,UACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,MAAA,CAAK,IAAK+pB,EAAAA,WACP,KAAK5pB,MAAM2pB,oBACV,EACI,EAAA,GAAA,OAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAO,KAAK,QAAc,MAAA,eAAe,UAAzC,EAAkD,GAAG,QAAQ,YAAajZ,EAAKO,KAAAA,EAAE,yBAErF,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAO,KAAK,WAAiB,MAAA,eAAe,UAA5C,EAAqD,GAAG,WAAW,YAAaP,EAAKO,KAAAA,EAAE,4BAE3F,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,oBACP,EAAA,EAAA,GAAA,OAAA,CAAM,QAAStS,GAAK,KAAK6qB,kBAAkB7qB,IACtC+R,EAAKO,KAAAA,EAAE,sBAGhB,EAAA,EAAA,GAAA,SAAA,CACI,KAAK,SACC,MAAA,gBACN,QAAStS,GAAK,KAAK2qB,cAAc3qB,GACjC,SAAU,KAAKqB,MAAM0hB,SAEpBhR,EAAKO,KAAAA,EAAE,eAIhB,KAAKjR,MAAM2pB,oBACX,EACI,EAAA,GAAA,OAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAO,KAAK,QAAc,MAAA,eAAe,UAAzC,EAAkD,GAAG,QAAQ,YAAajZ,EAAKO,KAAAA,EAAE,yBAErF,EAAA,EAAA,GAAA,SAAA,CACI,KAAK,SACC,MAAA,gBACN,QAAStS,GAAK,KAAK4qB,kBAAkB5qB,GACrC,SAAU,KAAKqB,MAAM0hB,SAEpBhR,EAAKO,KAAAA,EAAE,eAjGK,QAAA,QAAA;;ACDQ,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAHrD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SAEe,MAAM4Y,UAAsBrwB,EAA5B,UAEXH,cACI,QACKywB,KAAAA,gBAAkB,KAAKA,gBAAgB/lB,KAAK,MAGrD+lB,gBAAgBnrB,GACZA,EAAEgW,iBACIlJ,EAAAA,MAAAA,IAAI,SAAU,IACd2c,MAAAA,EAAW1mB,SAASqN,eAAe,YAAYrS,OAAS,GACxDqtB,EAAuBroB,SAASqN,eAAe,yBAAyBrS,OAAS,GACjF+sB,EAAOjY,EAAOoB,OAAAA,SAAS,QACvBha,EAAM4Y,EAAOoB,OAAAA,SAAS,OACxB6W,GAAAA,GAAQrB,EAAU,CACdA,GAAAA,GAAY2B,EAEZ,YADM9a,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE,yBAGhBoD,EAAAA,KAAAA,KAAK,oBAAqB,CAACoV,KAAMA,EAAM7wB,IAAKA,EAAKwvB,SAAUA,IAAWtkB,KAAKkP,IACxEA,EAAI0W,SACEje,EAAAA,MAAAA,IAAI,SAAUuH,EAAI0W,SACxBzlB,WAAW,IAAMuN,EAAO+B,OAAAA,SAAS,KAAM,MAEjCtE,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE+B,EAAI8F,YAE1BhF,MAAMd,GAAOS,QAAQC,KAAKV,KAIrCnT,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,UACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,KAAA,CAAU,MAAA,SAAS6Q,EAAKO,KAAAA,EAAE,0BAC1B,EACI,EAAA,GAAA,OAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAO,KAAK,WAAiB,MAAA,eAAe,UAA5C,EAAqD,GAAG,WAAW,YAAaP,EAAKO,KAAAA,EAAE,gCAE3F,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAO,KAAK,WAAiB,MAAA,eAAe,UAA5C,EAAqD,GAAG,wBAAwB,YAAaP,EAAKO,KAAAA,EAAE,oCAExG,EAAA,EAAA,GAAA,SAAA,CACI,KAAK,SACC,MAAA,gBACN,QAAStS,GAAK,KAAKmrB,gBAAgBnrB,IAElC+R,EAAKO,KAAAA,EAAE,eA/CiB,QAAA,QAAA;;ACCP,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJ9C,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,2BAE8C,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA/B,MAAM+Y,UAAexwB,EAArB,UAEXH,cACI,QACK2G,KAAAA,MAAQ,CACTqpB,WAAW,EACX9lB,MAAO,GACP0mB,UAAWzY,EAAOoB,OAAAA,SAAS,cAE1BsX,KAAAA,eAAiB,KAAKA,eAAenmB,KAAK,MAGnDmmB,eAAevrB,GACXA,EAAEgW,iBACGlR,KAAAA,SAAS,CAAC4lB,WAAW,IACtBlB,IAAAA,EAAQzmB,SAASqN,eAAe,SAASrS,OAAS,GACtDyrB,EAAMlqB,cACAmqB,MAAAA,EAAW1mB,SAASqN,eAAe,YAAYrS,MAC/C+O,EAAAA,MAAAA,IAAI,SAAU,IACf4I,EAAAA,KAAAA,KAAK,cAAe,CAAC8T,MAAOA,EAAOC,SAAUA,EAAU+B,WAAY,KAAKnqB,MAAMiqB,YAAYnmB,KAAKkP,IAC5FA,IAAQA,EAAI8F,SACNrN,EAAAA,MAAAA,IAAI,SAAUuH,EAAI0W,SACxBzlB,WAAW,IAAMuN,EAAO+B,OAAAA,SAAS,KAAM,MAEjCtE,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAE+B,EAAI8F,YAKjCjZ,SAEQ,OAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,WACP,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gBACP,EAAA,EAAA,GAAA,MAAA,CAAK,IAAK+pB,EAAAA,WACV,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,gBAAgBlZ,EAAKO,KAAAA,EAAE,wBAClC,EACI,EAAA,GAAA,OAAA,MAAA,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAO,KAAK,QAAc,MAAA,eAAe,UAAzC,EAAkD,GAAG,QAAQ,YAAaP,EAAKO,KAAAA,EAAE,yBAErF,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,eACP,EAAA,EAAA,GAAA,QAAA,CAAO,KAAK,WAAiB,MAAA,eAAe,UAA5C,EAAqD,GAAG,WAAW,YAAaP,EAAKO,KAAAA,EAAE,4BAE3F,EAAA,EAAA,GAAA,SAAA,CACI,KAAK,SACC,MAAA,gBACN,QAAStS,GAAK,KAAKurB,eAAevrB,IAEjC+R,EAAKO,KAAAA,EAAE,eA/CU,QAAA,QAAA;;ACDgB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAH9D,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SAEe,MAAMmZ,UAA+B5wB,EAArC,UAEXH,cACI,QACK+R,EAAAA,KAAAA,IAAI,OAASvD,OAAO0K,SAASF,UAAUvO,KAAKkP,IACxCvP,KAAAA,SAAS,CAACqV,QAASpI,EAAKO,KAAAA,EAAE,mCAChC6C,MAAMiE,IACLtE,QAAQC,KAAKqE,GACRtU,KAAAA,SAAS,CAACqV,QAASpI,EAAKO,KAAAA,EAAE,aAIvCpR,SACW,OAAA,EAAM,EAAA,GAAA,MAAA,KAAA,KAAKG,MAAM8Y,SAAW,KAbmB,QAAA,QAAA;;ACChB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAJ9C,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,SACA,EAAA,QAAA,YAEe,MAAMuR,UAAe7wB,EAArB,UAEXH,cACI,QACK2G,KAAAA,MAAQ,GACTwR,EAAO1C,OAAAA,IACF1D,EAAAA,KAAAA,IAAI,eAAiBoG,EAAO1C,OAAAA,IAAIhL,KAAKkP,GAAO,KAAKvP,SAAS,CAACqV,QAAS9F,KAIjFnT,SACQ,GAAC,KAAKG,MAAM8Y,QAIZ,OAAA,EAAA,EAAA,GAAA,UAAA,CAAe,MAAA,kCACX,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,cACP,EAAC,EAAA,GAAA,EAAD,QAAA,CAAS,UAAU,EAAM,IAAK,KAAK9Y,MAAM8Y,QAAQhK,GAAI,QAAS,KAAK9O,MAAM8Y,aAjB/C,QAAA,QAAA;;ACMvC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,uBAAA,QAAA,OAAA,QAAA,cAAA,QAAA,WAAA,EAVP,IAAA,EAAA,EAAA,QAAA,yBACA,EAAA,EAAA,QAAA,kCACA,EAAA,EAAA,QAAA,0BACA,EAAA,EAAA,QAAA,4CACA,EAAA,EAAA,QAAA,0BAMO,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAJA,MAAMsQ,EAAQkB,EAAd,QAIA,QAAA,MAAA,EAHA,MAAMT,EAAgBU,EAAtB,QAGA,QAAA,cAAA,EAFA,MAAMP,EAASQ,EAAf,QAEA,QAAA,OAAA,EADA,MAAMJ,EAAyBK,EAA/B,QACA,QAAA,uBAAA,EAAA,MAAMJ,EAASK,EAAf,QAAA,QAAA,OAAA;;ACgGN,aA1GD,IAAA,EAAA,QAAA,UACA,EAAA,QAAA,iBACA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,qCACA,EAAA,EAAA,QAAA,2CACA,EAAA,QAAA,YAqGC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAnGD,MAAMC,UAAYnxB,EAAlB,UAEIH,cACI,QACKuxB,KAAAA,oBAAsB,KAAKA,oBAAoB7mB,KAAK,MACzD8D,OAAO1J,iBAAiB,oBAAqB,KAAKysB,qBAClD/iB,OAAO1J,iBAAiB,gBAAiBqS,GAAK,KAAK/M,SAAS,CAACkM,GAAIA,EAAGA,GAAAA,MACpE9H,OAAO1J,iBAAiB,iBAAkBqS,GAAK,KAAK/M,SAAS,KAC7DoE,OAAO1J,iBAAiB,WAAYqT,EAAOgD,OAAAA,MACtCzE,EAAAA,KAAAA,YACC3E,EAAAA,MAAAA,IAAI,UAAUtH,KAAKsQ,IACjB5C,EAAO4B,OAAAA,aAAegB,EACfI,EAAAA,OAAAA,OAGAjB,EAAAA,OAAAA,SAAS,YAGnBvT,KAAAA,MAAQ,CACTyF,OAAQ+L,EAAO/L,OAAAA,OACfgM,MAAOD,EAAOC,OAAAA,MACd3C,GAAI0C,EAAO1C,OAAAA,GACX8C,UAAWJ,EAAOI,OAAAA,WAI1BgZ,sBACSnnB,KAAAA,SAAS,CACVgC,OAAQ+L,EAAO/L,OAAAA,OACfgM,MAAOD,EAAOC,OAAAA,MACd3C,GAAI0C,EAAO1C,OAAAA,GACX8C,UAAWJ,EAAOI,OAAAA,YAEtB3N,WAAW,IAAM4D,OAAOwb,SAAS,EAAG,IAC9BjY,EAAAA,MAAAA,IAAI,UAAUtH,KAAKsQ,IACjBA,EACGhJ,EAAAA,GAAAA,MAAMtH,KAAKwQ,IACLA,GAAS9C,EAAO4B,OAAAA,YAGZ3P,KAAAA,SAAS,CACVgC,OAAQ+L,EAAO/L,OAAAA,OACfgM,MAAOD,EAAOC,OAAAA,MACd3C,GAAI0C,EAAO1C,OAAAA,GACXa,GAAI2E,EACJ1C,UAAWJ,EAAOI,OAAAA,YAPhBnG,EAAAA,MAAAA,IAAI,SAAU,IAAI3H,KAAK0M,GAAKgB,EAAO+B,OAAAA,SAAS,aAYrD/B,EAAO4B,OAAAA,aACDG,EAAAA,OAAAA,SAAS,YAItBtE,EAAAA,MAAAA,IAAIyB,EAAKO,KAAAA,EAAEO,EAAOoB,OAAAA,SAAS,QAASpB,EAAOM,OAAAA,UAGrDjS,SAEY,OAAA,KAAKG,MAAMyR,OACV,IAAA,SACM,OAAA,EAAC,EAAA,GAAA,EAAD,OAAP,MAEC,IAAA,2BACM,OAAA,EAAC,EAAA,GAAA,EAAD,uBAAP,MAEC,IAAA,SACM,OAAA,EAAC,EAAA,GAAA,EAAD,OAAP,MAEC,IAAA,iBACM,OAAA,EAAC,EAAA,GAAA,EAAD,cAAP,MAEC,IAAA,QACM,OAAA,EAAC,EAAA,GAAA,EAAD,MAAP,MAMJ,GAAC,KAAKzR,MAAM2P,IAAO,KAAK3P,MAAM2P,GAAG4E,OAKjC,OAAA,EACI,EAAA,GAAA,OAAA,MAAA,EAAC,EAAA,GAAA,EAAD,QADJ,OAEI,EAAA,EAAA,GAAA,MAAA,CAAW,MAAA,YACP,EAAC,EAAA,GAAA,EAAD,QAAiB,KAAKvU,WAO1C,EAAO,EAAA,SAAA,EAAC,EAAA,GAAA,EAAR,MAAe0B,SAAS8N,MAEpB,kBAAmBqb,WACnBA,UAAUC,cAAc7R,SAAS,uCAAsBnF,MAAMiE,GAAOtE,QAAQC,KAAKqE;;ACzGrFiF,OAAO9S,QAAU,SAAsBgT,GAC9B,OAAA,IAAIrZ,QAAQ,SAAUG,EAAS+U,GAChC4G,IAAAA,EAASje,SAASvJ,cAAc,UACpCwnB,EAAOC,OAAQ,EACfD,EAAOvnB,KAAO,kBACdunB,EAAOoL,QAAU,QACjBpL,EAAOnE,IAAM0B,EACbyC,EAAOqL,QAAU,SAAUrsB,GACzBghB,EAAOqL,QAAUrL,EAAO+H,OAAS,KACjC3O,EAAOpa,IAGTghB,EAAO+H,OAAS,WACd/H,EAAOqL,QAAUrL,EAAO+H,OAAS,KACjC1jB,KAGFtC,SAASse,qBAAqB,QAAQ,GAAGzjB,YAAYojB","file":"app.68026932.js","sourceRoot":"../src","sourcesContent":["import { _catchError } from './diff/catch-error';\n\n/** @type {import('./internal').Options}  */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\ti;\n\tfor (i in props) {\n\t\tif (i !== 'key' && i !== 'ref') normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type === 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(\n\t\ttype,\n\t\tnormalizedProps,\n\t\tprops && props.key,\n\t\tprops && props.ref\n\t);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_lastDomChild: null,\n\t\t_component: null,\n\t\tconstructor: undefined\n\t};\n\n\tif (options.vnode) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn {};\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\tupdate = update(s, this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tthis._force = false;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type === 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tlet newDom = diff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\tassign({}, vnode),\n\t\t\tcomponent._context,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tnull,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (newDom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet q = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty && (c._dirty = true) && q.push(c) === 1) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet p;\n\tq.sort((a, b) => b._vnode._depth - a._vnode._depth);\n\twhile ((p = q.pop())) {\n\t\t// forceUpdate's callback argument is reused here to indicate a non-forced update.\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\n\nconst IS_HYDRATE = EMPTY_OBJ;\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {Element | Text} [replaceNode] Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\tlet isHydrating = replaceNode === IS_HYDRATE;\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\tvnode = createElement(Fragment, null, [vnode]);\n\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t((isHydrating ? parentDom : replaceNode || parentDom)._children = vnode),\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\treplaceNode && !isHydrating\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: EMPTY_ARR.slice.call(parentDom.childNodes),\n\t\tcommitQueue,\n\t\treplaceNode || EMPTY_OBJ,\n\t\tisHydrating\n\t);\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, IS_HYDRATE);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tconst ctx = {};\n\n\tconst context = {\n\t\t_id: '__cC' + i++,\n\t\t_defaultValue: defaultValue,\n\t\tConsumer(props, context) {\n\t\t\treturn props.children(context);\n\t\t},\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tconst subs = [];\n\t\t\t\tthis.getChildContext = () => {\n\t\t\t\t\tctx[context._id] = this;\n\t\t\t\t\treturn ctx;\n\t\t\t\t};\n\t\t\t\tthis.shouldComponentUpdate = _props => {\n\t\t\t\t\tif (props.value !== _props.value) {\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc.context = _props.value;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\told && old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\tcontext.Consumer.contextType = context;\n\n\treturn context;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { removeNode } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Node | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\tnewParentVNode,\n\toldParentVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, newDom, sibDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\t// Only in very specific places should this logic be invoked (top level `render` and `diffElementNodes`).\n\t// I'm using `EMPTY_OBJ` to signal when `diffChildren` is invoked in these situations. I can't use `null`\n\t// for this purpose, because `null` is a valid value for `oldDom` which can mean to skip to this logic\n\t// (e.g. if mounting a new tree in which the old DOM should be ignored (usually for Fragments).\n\tif (oldDom == EMPTY_OBJ) {\n\t\tif (excessDomChildren != null) {\n\t\t\toldDom = excessDomChildren[0];\n\t\t} else if (oldChildrenLength) {\n\t\t\toldDom = getDomSibling(oldParentVNode, 0);\n\t\t} else {\n\t\t\toldDom = null;\n\t\t}\n\t}\n\n\ti = 0;\n\tnewParentVNode._children = toChildArray(\n\t\tnewParentVNode._children,\n\t\tchildVNode => {\n\t\t\tif (childVNode != null) {\n\t\t\t\tchildVNode._parent = newParentVNode;\n\t\t\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t\t\t// Check if we find a corresponding element in oldChildren.\n\t\t\t\t// If found, delete the array item by setting to `undefined`.\n\t\t\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t\t\t// (holes).\n\t\t\t\toldVNode = oldChildren[i];\n\n\t\t\t\tif (\n\t\t\t\t\toldVNode === null ||\n\t\t\t\t\t(oldVNode &&\n\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t\t\t) {\n\t\t\t\t\toldChildren[i] = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t\t\t// We always match by type (in either case).\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toldVNode &&\n\t\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toldVNode = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\t\t\tnewDom = diff(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\tcontext,\n\t\t\t\t\tisSvg,\n\t\t\t\t\texcessDomChildren,\n\t\t\t\t\tcommitQueue,\n\t\t\t\t\toldDom,\n\t\t\t\t\tisHydrating\n\t\t\t\t);\n\n\t\t\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\t\t\tif (!refs) refs = [];\n\t\t\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t\t\t}\n\n\t\t\t\t// Only proceed if the vnode has not been unmounted by `diff()` above.\n\t\t\t\tif (newDom != null) {\n\t\t\t\t\tif (firstChildDom == null) {\n\t\t\t\t\t\tfirstChildDom = newDom;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (childVNode._lastDomChild != null) {\n\t\t\t\t\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t\t\t\t\t// have a non-null _lastDomChild. Continue the diff from the end of\n\t\t\t\t\t\t// this Fragment's DOM tree.\n\t\t\t\t\t\tnewDom = childVNode._lastDomChild;\n\n\t\t\t\t\t\t// Eagerly cleanup _lastDomChild. We don't need to persist the value because\n\t\t\t\t\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t\t\t\t\t// diffing Components and Fragments.\n\t\t\t\t\t\tchildVNode._lastDomChild = null;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\texcessDomChildren == oldVNode ||\n\t\t\t\t\t\tnewDom != oldDom ||\n\t\t\t\t\t\tnewDom.parentNode == null\n\t\t\t\t\t) {\n\t\t\t\t\t\t// NOTE: excessDomChildren==oldVNode above:\n\t\t\t\t\t\t// This is a compression of excessDomChildren==null && oldVNode==null!\n\t\t\t\t\t\t// The values only have the same type when `null`.\n\n\t\t\t\t\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\t\t\t\t\tparentDom.appendChild(newDom);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\tsibDom = oldDom, j = 0;\n\t\t\t\t\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildrenLength;\n\t\t\t\t\t\t\t\tj += 2\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t\t\t\t// there are probably some internal data structures that aren't\n\t\t\t\t\t\t// updated properly.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t\t\t\t// value check in `diff()` won't be skipped.\n\t\t\t\t\t\tif (newParentVNode.type == 'option') {\n\t\t\t\t\t\t\tparentDom.value = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toldDom = newDom.nextSibling;\n\n\t\t\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t\t\t// At this point, if childVNode._lastDomChild existed, then\n\t\t\t\t\t\t// newDom = childVNode._lastDomChild per line 101. Else it is\n\t\t\t\t\t\t// the same as childVNode._dom, meaning this component returned\n\t\t\t\t\t\t// only a single DOM node\n\t\t\t\t\t\tnewParentVNode._lastDomChild = newDom;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti++;\n\t\t\treturn childVNode;\n\t\t}\n\t);\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove children that are not part of any vnode.\n\tif (excessDomChildren != null && typeof newParentVNode.type !== 'function') {\n\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) unmount(oldChildren[i], oldChildren[i]);\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @param {(vnode: import('../internal').VNode) => import('../internal').VNode} [callback]\n * A function to invoke for each child before it is added to the flattened list.\n * @param {Array<import('../internal').VNode | string | number>} [flattened] An flat array of children to modify\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, callback, flattened) {\n\tif (flattened == null) flattened = [];\n\n\tif (children == null || typeof children === 'boolean') {\n\t\tif (callback) flattened.push(callback(null));\n\t} else if (Array.isArray(children)) {\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\ttoChildArray(children[i], callback, flattened);\n\t\t}\n\t} else if (!callback) {\n\t\tflattened.push(children);\n\t} else if (typeof children === 'string' || typeof children === 'number') {\n\t\tflattened.push(callback(createVNode(null, children, null, null)));\n\t} else if (children._dom != null || children._component != null) {\n\t\tflattened.push(\n\t\t\tcallback(createVNode(children.type, children.props, children.key, null))\n\t\t);\n\t} else {\n\t\tflattened.push(callback(children));\n\t}\n\n\treturn flattened;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (!(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (\n\t\ttypeof value === 'number' &&\n\t\tIS_NON_DIMENSIONAL.test(key) === false\n\t) {\n\t\tstyle[key] = value + 'px';\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else {\n\t\tstyle[key] = value;\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nfunction setProperty(dom, name, value, oldValue, isSvg) {\n\tif (isSvg) {\n\t\tif (name === 'className') {\n\t\t\tname = 'class';\n\t\t}\n\t} else if (name === 'class') {\n\t\tname = 'className';\n\t}\n\n\tif (name === 'key' || name === 'children') {\n\t} else if (name === 'style') {\n\t\tconst s = dom.style;\n\n\t\tif (typeof value === 'string') {\n\t\t\ts.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue === 'string') {\n\t\t\t\ts.cssText = '';\n\t\t\t\toldValue = null;\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (let i in oldValue) {\n\t\t\t\t\tif (!(value && i in value)) {\n\t\t\t\t\t\tsetStyle(s, i, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (let i in value) {\n\t\t\t\t\tif (!oldValue || value[i] !== oldValue[i]) {\n\t\t\t\t\t\tsetStyle(s, i, value[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tlet useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tlet nameLower = name.toLowerCase();\n\t\tname = (nameLower in dom ? nameLower : name).slice(2);\n\n\t\tif (value) {\n\t\t\tif (!oldValue) dom.addEventListener(name, eventProxy, useCapture);\n\t\t\t(dom._listeners || (dom._listeners = {}))[name] = value;\n\t\t} else {\n\t\t\tdom.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t} else if (\n\t\tname !== 'list' &&\n\t\tname !== 'tagName' &&\n\t\t// HTMLButtonElement.form and HTMLInputElement.form are read-only but can be set using\n\t\t// setAttribute\n\t\tname !== 'form' &&\n\t\tname !== 'type' &&\n\t\t!isSvg &&\n\t\tname in dom\n\t) {\n\t\tdom[name] = value == null ? '' : value;\n\t} else if (\n\t\ttypeof value !== 'function' &&\n\t\tname !== 'dangerouslySetInnerHTML'\n\t) {\n\t\tif (name !== (name = name.replace(/^xlink:?/, ''))) {\n\t\t\tif (value == null || value === false) {\n\t\t\t\tdom.removeAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdom.setAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase(),\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (value == null || value === false) {\n\t\t\tdom.removeAttribute(name);\n\t\t} else {\n\t\t\tdom.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren, toChildArray } from './children';\nimport { diffProps } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Element | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType === 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && context[tmp._id];\n\t\t\tlet cctx = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: context;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, cctx); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, cctx);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = cctx;\n\t\t\t\tc._context = context;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\tc.shouldComponentUpdate(newProps, c._nextState, cctx) === false\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\t\t\t\t\tfor (tmp = 0; tmp < newVNode._children.length; tmp++) {\n\t\t\t\t\t\tif (newVNode._children[tmp]) {\n\t\t\t\t\t\t\tnewVNode._children[tmp]._parent = newVNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = cctx;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type == Fragment && tmp.key == null;\n\t\t\tnewVNode._children = toChildArray(\n\t\t\t\tisTopLevelFragment ? tmp.props.children : tmp\n\t\t\t);\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tcontext = assign(assign({}, context), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = null;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n\n\treturn newVNode._dom;\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet i;\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvg = newVNode.type === 'svg' || isSvg;\n\n\tif (dom == null && excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\tif (\n\t\t\t\tchild != null &&\n\t\t\t\t(newVNode.type === null\n\t\t\t\t\t? child.nodeType === 3\n\t\t\t\t\t: child.localName === newVNode.type)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (newVNode.type === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\t\tdom = isSvg\n\t\t\t? document.createElementNS('http://www.w3.org/2000/svg', newVNode.type)\n\t\t\t: document.createElement(newVNode.type);\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t}\n\n\tif (newVNode.type === null) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren[excessDomChildren.indexOf(dom)] = null;\n\t\t}\n\n\t\tif (oldProps !== newProps) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else if (newVNode !== oldVNode) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren = EMPTY_ARR.slice.call(dom.childNodes);\n\t\t}\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\tif (oldProps === EMPTY_OBJ) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (!newHtml || !oldHtml || newHtml.__html != oldHtml.__html) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\tnewVNode._children = newVNode.props.children;\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (!newHtml) {\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tnewVNode.type === 'foreignObject' ? false : isSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tEMPTY_OBJ,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\tnewProps.value !== undefined &&\n\t\t\t\tnewProps.value !== dom.value\n\t\t\t) {\n\t\t\t\tdom.value = newProps.value == null ? '' : newProps.value;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\tnewProps.checked !== undefined &&\n\t\t\t\tnewProps.checked !== dom.checked\n\t\t\t) {\n\t\t\t\tdom.checked = newProps.checked;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tapplyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type !== 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\tvnode._dom = vnode._lastDomChild = null;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { assign } from './util';\nimport { EMPTY_ARR } from './constants';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./index').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n */\nexport function cloneElement(vnode, props) {\n\tprops = assign(assign({}, vnode.props), props);\n\tif (arguments.length > 2) props.children = EMPTY_ARR.slice.call(arguments, 2);\n\treturn createVNode(\n\t\tvnode.type,\n\t\tprops,\n\t\tprops.key || vnode.key,\n\t\tprops.ref || vnode.ref\n\t);\n}\n","import { enqueueRender } from '../component';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tif (\n\t\t\t\t\tcomponent.constructor &&\n\t\t\t\t\tcomponent.constructor.getDerivedStateFromError != null\n\t\t\t\t) {\n\t\t\t\t\tcomponent.setState(\n\t\t\t\t\t\tcomponent.constructor.getDerivedStateFromError(error)\n\t\t\t\t\t);\n\t\t\t\t} else if (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn enqueueRender((component._pendingError = component));\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tif (currentComponent.__hooks) {\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\tcurrentComponent.__hooks._pendingEffects = [];\n\t}\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\tif (hooks._pendingEffects.length) {\n\t\t\tafterPaint(afterPaintEffects.push(c));\n\t\t}\n\t}\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t);\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\thooks._list.forEach(hook => hook._cleanup && hook._cleanup());\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @returns {import('./internal').HookState}\n */\nfunction getHookState(index) {\n\tif (options._hook) options._hook(currentComponent);\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = { _list: [], _pendingEffects: [] });\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} initialState\n */\nexport function useState(initialState) {\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++);\n\tif (!hookState._component) {\n\t\thookState._component = currentComponent;\n\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value[0] = nextValue;\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\treturn hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref === 'function') ref(createHandle());\n\t\t\telse if (ref) ref.current = createHandle();\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t\treturn (state._value = factory());\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\tif (!provider) return context._defaultValue;\n\tconst state = getHookState(currentIndex++);\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tafterPaintEffects.some(component => {\n\t\tif (component._parentDom) {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t}\n\t});\n\tafterPaintEffects = [];\n}\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tcancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (typeof window !== 'undefined') {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\n\t\t/* istanbul ignore next */\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\tif (hook._cleanup) hook._cleanup();\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\tconst result = hook._value();\n\tif (typeof result === 'function') hook._cleanup = result;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn !oldArgs || newArgs.some((arg, index) => arg !== oldArgs[index]);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f === 'function' ? f(arg) : f;\n}\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport class PureComponent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// Some third-party libraries check if this property is present\n\t\tthis.isPureReactComponent = true;\n\t}\n\n\tshouldComponentUpdate(props, state) {\n\t\treturn (\n\t\t\tshallowDiffers(this.props, props) || shallowDiffers(this.state, state)\n\t\t);\n\t}\n}\n","import { createElement } from 'preact';\nimport { shallowDiffers, assign } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionalComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, assign({}, props));\n\t}\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref);\n\t}\n\tForwarded.prototype.isReactComponent = true;\n\tForwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (!children) return null;\n\treturn toChildArray(children).map(fn);\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tchildren = toChildArray(children);\n\t\tif (children.length !== 1) {\n\t\t\tthrow new Error('Children.only() expects only one child.');\n\t\t}\n\t\treturn children[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { Component, createElement, options } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function(error, newVNode, oldVNode) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode._component);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode);\n};\n\nfunction detachedClone(vnode) {\n\tif (vnode) {\n\t\tvnode = assign({}, vnode);\n\t\tvnode._component = null;\n\t\tvnode._children = vnode._children && vnode._children.map(detachedClone);\n\t}\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense(props) {\n\t// we do not call super here to golf some bytes...\n\tthis._suspensions = 0;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @param {Promise} promise The thrown promise\n * @param {Component<any, any>} suspendingComponent The suspending component\n */\nSuspense.prototype._childDidSuspend = function(promise, suspendingComponent) {\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._suspendedComponentWillUnmount =\n\t\tsuspendingComponent.componentWillUnmount;\n\tsuspendingComponent.componentWillUnmount = () => {\n\t\tonResolved();\n\n\t\tif (suspendingComponent._suspendedComponentWillUnmount) {\n\t\t\tsuspendingComponent._suspendedComponentWillUnmount();\n\t\t}\n\t};\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._suspensions) {\n\t\t\tc._vnode._children[0] = c.state._suspended;\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\t\t}\n\t};\n\n\tif (!c._suspensions++) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.render = function(props, state) {\n\tif (this._detachOnNextRender) {\n\t\tthis._vnode._children[0] = detachedClone(this._detachOnNextRender);\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\treturn [\n\t\tcreateElement(Component, null, state._suspended ? null : props.children),\n\t\tstate._suspended && props.fallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('../src/internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function(child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function(props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate = SuspenseList.prototype.componentDidMount = function() {\n\t// Iterate through all children after mounting for two reasons:\n\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t//    The nodes can now be completely consumed from the linked list.\n\t// 2. Handle nodes that might have gotten resolved between render and\n\t//    componentDidMount.\n\tconst list = this;\n\tlist._map.forEach((node, child) => {\n\t\tresolve(list, child, node);\n\t});\n};\n","import { createElement, hydrate, render, _unmount } from 'preact';\n\nclass ContextProvider {\n\tgetChildContext() {\n\t\treturn this.props.context;\n\t}\n\trender(props) {\n\t\treturn props.children;\n\t}\n}\n\n/**\n * Portal component\n * @param {object | null | undefined} props\n */\nfunction Portal(props) {\n\tlet _this = this;\n\tlet container = props.container;\n\tlet wrap = createElement(\n\t\tContextProvider,\n\t\t{ context: _this.context },\n\t\tprops.vnode\n\t);\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t\t_this._hasMounted = false;\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props.vnode) {\n\t\tif (!_this._hasMounted) {\n\t\t\t// Create a placeholder that we can use to insert into.\n\t\t\t_this._temp = document.createTextNode('');\n\t\t\t// Hydrate existing nodes to keep the dom intact, when rendering\n\t\t\t// wrap into the container.\n\t\t\thydrate('', container);\n\t\t\t// Append to the container (this matches React's behavior)\n\t\t\tcontainer.appendChild(_this._temp);\n\t\t\t// At this point we have mounted and should set our container.\n\t\t\t_this._hasMounted = true;\n\t\t\t_this._container = container;\n\t\t\t// Render our wrapping element into temp.\n\t\t\trender(wrap, container, _this._temp);\n\t\t\t_this._children = this._temp._children;\n\t\t} else {\n\t\t\t// When we have mounted and the vnode is present it means the\n\t\t\t// props have changed or a parent is triggering a rerender.\n\t\t\t// This implies we only need to call render. But we need to keep\n\t\t\t// the old tree around, otherwise will treat the vnodes as new and\n\t\t\t// will wrongly call `componentDidMount` on them\n\t\t\tcontainer._children = _this._children;\n\t\t\trender(wrap, container);\n\t\t\t_this._children = container._children;\n\t\t}\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._hasMounted) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t}\n\t// Set the wrapping element for future unmounting.\n\t_this._wrap = wrap;\n\n\t_this.componentWillUnmount = () => {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t};\n\n\treturn null;\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\treturn createElement(Portal, { vnode, container });\n}\n","/**\n * Normalize event handlers like react does. Most famously it uses `onChange` for any input element.\n * @param {import('./internal').VNode} vnode The vnode to normalize events on\n */\nexport function applyEventNormalization({ type, props }) {\n\tif (!props || typeof type != 'string') return;\n\tlet newProps = {};\n\n\tfor (let i in props) {\n\t\tif (/^on(Ani|Tra|Tou)/.test(i)) {\n\t\t\tprops[i.toLowerCase()] = props[i];\n\t\t\tdelete props[i];\n\t\t}\n\t\tnewProps[i.toLowerCase()] = i;\n\t}\n\tif (newProps.ondoubleclick) {\n\t\tprops.ondblclick = props[newProps.ondoubleclick];\n\t\tdelete props[newProps.ondoubleclick];\n\t}\n\tif (newProps.onbeforeinput) {\n\t\tprops.onbeforeinput = props[newProps.onbeforeinput];\n\t\tdelete props[newProps.onbeforeinput];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (\n\t\tnewProps.onchange &&\n\t\t(type === 'textarea' ||\n\t\t\t(type.toLowerCase() === 'input' && !/^fil|che|ra/i.test(props.type)))\n\t) {\n\t\tlet normalized = newProps.oninput || 'oninput';\n\t\tif (!props[normalized]) {\n\t\t\tprops[normalized] = props[newProps.onchange];\n\t\t\tdelete props[newProps.onchange];\n\t\t}\n\t}\n}\n","const alert = {\n    remove: id => document.getElementById(id).outerHTML = \"\",\n    add: (text, alertStyle = \"alert-success\", countdown = 5000) => {\n        if (!text) {\n            return;\n        }\n        let alertNode = document.createElement(\"DIV\");\n        alertNode.id = alert.hash(text);\n        alertNode.innerHTML = text;\n        alertNode.classList.add(\"global-alert\", \"alert\", alertStyle);\n        document.body.appendChild(alertNode);\n        setTimeout(() => alert.remove(alertNode.id), countdown);\n    },\n    hash: (str) => {\n        let hash = 0;\n        if (str.length == 0) {\n            return hash;\n        }\n        for (let i = 0; i < str.length; i++) {\n            let char = str.charCodeAt(i);\n            hash = ((hash<<5)-hash)+char;\n            hash = hash & hash; // Convert to 32bit integer\n        }\n        return hash;\n    }\n};\nexport default alert;\n","import http from \"./http.js\";\nimport lang from \"./lang.js\";\n\nconst me = {\n    me: {},\n    get: () => me.me.id ? Promise.resolve(me.me) : me.update(),\n    update: () => http.get(\"/api/me\", true).then(r => {\n        if (!r) {\n            return;\n        }\n        me.me = Object.assign({notifications: []}, r);\n        me.loadNotifications();\n        lang.fetchDict();\n        window.dispatchEvent(new CustomEvent(\"meStateChange\"));\n        return r;\n    }),\n    loadNotifications: () => http.get(\"/api/users/\" + me.me.id + \"/notifications\").then(r => {\n        me.me.notifications = r;\n        window.dispatchEvent(new CustomEvent(\"meStateChange\"));\n    }),\n    matchNotification: (notif, id) => {\n        if (notif.id === id) {\n            return true;\n        }\n        if (notif.target === id) {\n            return true;\n        }\n        if (\n            notif.type === \"new_comment\"\n            && notif.fromMessage.id === id\n        ) {\n            return true;\n        }\n        return false;\n    },\n    isNew: id => me.me.notifications.some(n => me.matchNotification(n, id)),\n    removeMatchingNotifications: id => {\n        return me.loadNotifications().then(_ => {\n            return Promise.all(me.me.notifications.filter(n => me.matchNotification(n, id)).map(\n                n => http.delete('/api/notifications/' + n.id).then(r => {\n                    me.me.notifications = me.me.notifications.filter(e => !me.matchNotification(e, id));\n                    window.dispatchEvent(new CustomEvent(\"meStateChange\"));\n                })\n            ));\n        });\n    },\n}\nexport default me;\n","import me from \"./me.js\";\nimport http from \"./http.js\";\n\nconst lang = {\n    dict: [], // dicts loaded for the current session\n    possibleLang: {\n        \"en\": \"English\",\n        \"es\": \"Español\",\n        \"fr\": \"Français\",\n        \"sk\": \"Slovenský\",\n    }, // possible dicts names to load\n    getDefaultLang: () => (document.querySelector(\"meta[name='zusam:default-lang']\") || {}).content || \"en\",\n    getCurrentLang: () => me.me && me.me[\"data\"] ? me.me.data[\"lang\"] || lang.getDefaultLang() : lang.getDefaultLang(),\n    fetchDict: (dict = lang.getCurrentLang()) => !lang.dict[dict] && http.get(\"/lang/\" + dict + \".json\").then(r => {\n        lang.dict[dict] = r;\n        window.dispatchEvent(new CustomEvent(\"fetchedNewDict\"));\n    }),\n    t: (id, params = {}) => {\n\n        // prepare default values\n        params.dict = params[\"dict\"] || lang.getCurrentLang();\n        params.count = params[\"count\"] || 0;\n\n        // quick validity checks\n        if (!id || !lang.dict[params.dict]) {\n            return \"\";\n        }\n\n        // select translation string corresponding to count\n        // We treat the list of translation keys like ranges\n        // So if we have the keys 0, 1, 5; we have the ranges [0], [1, 4], [5, +inf]\n        let str = lang.dict[params.dict][id] || \"\";\n        if (typeof str == \"object\") {\n            let keys = Object.getOwnPropertyNames(str).map(e => +e).filter(e => !isNaN(e) && e <= params.count).sort((a, b) => a-b);\n            str = keys.length ? str[keys.slice(-1)[0]] : \"\";\n        }\n\n        // replace parameters\n        Object.assign([], str.match(/{{\\w+}}/g)).forEach(s => {\n            let rid = s.replace(/[\\{\\}]/g,'');\n            if (params[rid]) {\n                str = str.replace(s, params[rid]);\n            }\n        });\n\n        return str;\n    },\n};\nexport default lang;\n","import cache from \"./cache.js\";\nimport http from \"./http.js\";\nimport me from \"./me.js\";\nimport util from \"./util.js\";\nimport lang from \"./lang.js\";\n\nconst router = {\n    route: \"\",\n    id: \"\",\n    action: \"\",\n    backUrl: \"\",\n    backUrlPrompt: \"\",\n    entityUrl: \"\",\n    entityType: \"\",\n    search: \"\",\n    entity: {},\n    isValidUrl: url => {\n        try {\n            new URL(url);\n            return true;\n        } catch (_) {\n            return false;\n        }\n    },\n    getSubpath: () => (new URL(document.baseURI)).pathname.replace(/\\/$/, ''),\n    toApp: url => {\n        if (!url || typeof(url) != \"string\") {\n            return \"\";\n        }\n        if (router.isValidUrl(url)) {\n            return url;\n        }\n        return location.origin + router.getSubpath() + url;\n    },\n    removeSubpath: path => path ? path.replace(new RegExp('^' + router.getSubpath()), '') : \"\",\n    getParam: (param, searchParams = window.location.search.substring(1)) => {\n        let res = searchParams.split(\"&\").find(e => e.split(\"=\")[0] === param);\n        return res ? res.split(\"=\")[1] : \"\";\n    },\n    getSegments: () => window.location.pathname.slice(1).split(\"?\")[0].split(\"/\"),\n    // check if route is \"outside\": accessible to non connected user\n    isOutside: () => [\n        \"login\",\n        \"password-reset\",\n        \"signup\",\n        \"invitation\",\n        \"stop-notification-emails\",\n        \"public\",\n    ].includes(router.route || router.getSegments()[0]),\n    isEntity: name => [\n        \"messages\",\n        \"groups\",\n        \"users\",\n        \"links\",\n        \"files\"\n    ].includes(name),\n    navigate: async (url = \"/\", options = {}) => {\n        if (!url.match(/^http/) && !options[\"raw_url\"]) {\n            url = router.toApp(url);\n        }\n        router.url = new URL(url);\n        router.path = router.url.pathname;\n        router.search = router.url.search.slice(1);\n        [router.route, router.id, router.action] = router.removeSubpath(router.path).slice(1).split(\"/\");\n        router.entityUrl = \"\";\n        router.entityType = \"\";\n        router.backUrl = \"\";\n        router.backUrlPrompt = \"\";\n\n        // set url, backUrl and entityUrl\n        if (router.route && router.id && router.isEntity(router.route)) {\n            router.entityUrl = \"/api/\" + router.route + \"/\" + router.id;\n            router.entityType = router.route;\n\n            await cache.get(router.entityUrl).then(res => {\n                if (!res) {\n                    console.warn(\"Unknown entity\");\n                    router.navigate();\n                    return;\n                }\n                router.entity = res;\n                switch(router.route) {\n                    case \"groups\":\n                        if (router.action == \"write\") {\n                            router.backUrl = \"/\" + router.route + \"/\" + router.id;\n                            router.backUrlPrompt = lang.t(\"cancel_write\");\n                        }\n                        break;\n                    case \"messages\":\n                        if (res[\"parent\"] && !res[\"isInFront\"]) {\n                            router.backUrl = \"/messages/\" + res[\"parent\"].id;\n                        } else {\n                            router.backUrl = \"/groups/\" + util.getId(res.group);\n                        }\n                        break;\n                    case \"users\":\n                        router.backUrl = \"/\";\n                        break;\n                    default:\n                        if (router.action) {\n                            router.backUrl = \"/\";\n                        }\n                }\n            }).catch(e => console.warn(e));\n        }\n\n        switch (router.route) {\n            case \"password-reset\":\n            case \"stop-notification-emails\":\n            case \"signup\":\n            case \"login\":\n            case \"share\":\n            case \"public\":\n            case \"messages\":\n            case \"groups\":\n            case \"users\":\n            case \"create-group\":\n                if (options.replace) {\n                    history.replaceState(null, \"\", url);\n                } else {\n                    history.pushState(null, \"\", url);\n                }\n                window.dispatchEvent(new CustomEvent(\"routerStateChange\"));\n                break;\n            case \"logout\":\n                cache.reset();\n                window.location.href = window.location.origin;\n                break;\n            case \"invitation\":\n                cache.get(\"apiKey\").then(apiKey => {\n                    if (apiKey) {\n                        http.post(\"/api/groups/invitation/\" + router.id, {}).then(res => {\n                            window.location.href = window.location.origin;\n                        });\n                    } else {\n                        router.navigate(\"/signup?inviteKey=\" + router.id);\n                    }\n                });\n                break;\n            default:\n                me.get().then(user => {\n                    if (!user) {\n                        router.navigate(\"/login\");\n                        return;\n                    }\n                    if (user.data[\"default_group\"]) {\n                        router.navigate(\"/groups/\" + user.data[\"default_group\"]);\n                    } else {\n                        if (user.groups[0]) {\n                            router.navigate(\"/groups/\" + user.groups[0].id);\n                        } else {\n                            window.location = \"/create-group\";\n                        }\n                    }\n                });\n        }\n    },\n    sync: () => router.navigate(location.pathname + location.search + location.hash, {replace: true}),\n    onClick: (e, newTab = false, url = null) => {\n        // stop propagation\n        e.preventDefault();\n        e.stopPropagation();\n\n        // if url is not given, try to guess it\n        if (!url) {\n            const t = e.target.closest(\"a\");\n            if (t) {\n                if(t.target == \"_blank\") {\n                    newTab = true;\n                }\n                url = t.getAttribute(\"href\");\n            }\n        }\n\n        if (!url) {\n            return;\n        }\n\n        // check if it's an external url\n        if (url.startsWith('http')) {\n            let targetUrl = new URL(url);\n            if (targetUrl.host != location.host) {\n                if (e.ctrlKey || newTab) {\n                    open(url, \"_blank\");\n                } else {\n                    location.href = url;\n                }\n                return;\n            }\n        }\n\n        // disable active stances (dropdowns...)\n        for (let e of document.getElementsByClassName(\"active\")) {\n            e.classList.remove(\"active\");\n        }\n\n        // go to target url\n        if (e.ctrlKey || newTab) {\n            open(url, \"_blank\");\n        } else {\n            router.navigate(url);\n        }\n    },\n};\nexport default router;\n","import lang from './lang.js';\nimport router from './router.js';\n\nconst util = {\n    urlRegExp: (new RegExp('(\\\\([^()]*)?https?:\\\\/\\\\/[-A-Za-z0-9+&@#/%?=~_()|!:,.;*]*[-A-Za-z0-9+&@#/%=~_()|]', 'i')),\n    getUrl: txt => {\n        let url = txt.match(util.urlRegExp);\n        if (url && url[0].startsWith(\"(\")) {\n            let link = url[0].match(/https?:\\/\\//i);\n            url[\"index\"] += link[\"index\"];\n            url[0] = url[0].slice(link[\"index\"]);\n            if (url[0].endsWith(\")\")) {\n                url[0] = url[0].slice(0, -1);\n            }\n        }\n        return url;\n    },\n    // full datetime as a string adapted to the users timezone\n    humanFullDate: timestamp => {\n        let d = new Date(timestamp*1000);\n        d = new Date(d.getTime() + (d.getTimezoneOffset()*60000*-1));\n        return d.toISOString().replace(\"T\", \" \").replace(/\\..*$/, \"\");\n    },\n    // duration relative to event\n    humanTime: timestamp => {\n        if (!timestamp) {\n            return null;\n        }\n        const duration = Math.abs(Math.round((Date.now()/1000 - timestamp)/60));\n        if (duration < 1) {\n            return lang.t(\"just_now\");\n        }\n        if (duration < 60) {\n            return lang.t(\"ago\", {duration:duration + \"mn\"});\n        }\n        if (duration < 60 * 24) {\n            return lang.t(\"ago\", {duration:Math.floor(duration/60) + \"h\"});\n        }\n        let date = new Date(timestamp*1000);\n        return util.humanFullDate(timestamp).split(\" \")[0];\n    },\n    // get the id of an object from an url\n    getId: e => {\n        switch (typeof(e)) {\n            case \"object\":\n                return e ? e.id : null;\n            case \"string\":\n                return e.split(\"/\").pop().replace(/\\?.*$/, \"\").replace(/\\.\\w+$/, \"\");\n        }\n        console.warn(e);\n        throw \"Could not extract id !\";\n    },\n    // get the url to a thubmnail\n    thumbnail: (id, width, height) => id ? router.toApp(\"/api/images/thumbnail/\" + width + \"/\" + height + \"/\" + id) : null,\n    // same as http.thumbnail but for a crop\n    crop: (id, width, height) => id ? router.toApp(\"/api/images/crop/\" + width + \"/\" + height + \"/\" + id) : null,\n    // default avatar in base64\n    defaultAvatar: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAACOCAYAAADn/TAIAAAFIklEQVR4nO2dQW4UVxCGuQcnyA04QS6QnIBcILlAOEFOkOwRSNmwgQ0bIgErb0IkViwwG28SJUIKnrE9zN922208tqd/7K6qfl9J39rdrm9e1Xv9+vWd/x/eXQGM5U70BUBNEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsEAcsSoiz//z71cHu09Xh3svV8u2vq0+/fxN+Ta2TXhxJ82Uc/v0GeYJJL87Rx/cXxFEcvHsUfm0tk1qcxR8/bJTmdORZly6NSNHX2SKpxVm+/e1KcfrQqKTeZ//5d+HX7KDrFosX91fLP3/pUE+ne9KPJ/r6yolzWZm6LvomevH6x+OkPPt2WhHWf2+jDOvyqmsTY+4tY1lOK46a39sIJaxPnlBS+sRexzDxQ472/72Vax1GtpEnrTibZlMth2aS0TlBnKLx6cm98LwgTsFYvP4pPC+IUzDUZ0XnJb04gjgfWp6IzkkJcY4W/0XnKlUc7r0Kz0kJcQ4+PIvOVapAnC257pFDa0GpGgHl6ixojkegfxZxHEzHR3L4z1/ROUsRUz9zKy+O/mGtlyzdf3QeyomDPHpC/jg8ByXFOZXn4250DkMi24a1UuIIbbfYdoPXXEI9XvT/vbw4pwI9udcN33MPledMTXF5cYYCLXcezHLmpXvKKM0sxDkn0bqMabVZpUzL85Wbad1D5leAZiXOZaixFFpAu2xbqEQ7R9AI1pWmZI1ws+KMFq2bvXkb5b8m9FA38yiDOFcQ8YhDo4z6tOh7RxwDjTLaED51ZG6AEecaljs/T/KKy5eRaZsE4oxAU3m9FzV1VGmAEWcDmrZHjDKVGmDEGaCk6Y3MqaNiA4w4J4Q1wHuvUr1MhzgjUAM8dcxtlGlKnK407T6dXJo5jjLNiKOZy9QN8JxHmSbE0fk4U0fVxTzEeRjXAGd6dQVxRhKxAtzSKDM7caIa4MqPDJoXJ2IFWA1wtqPVEGdLjjetxzTAc55mz1qcqI1WLZem8uJEbbTK9N52BsqIE7nRitJUVJywjVaNrc3MRpyoafYcNlo1K07Ec6ZOmnXTrWP0+yP1L6P18pVSnIqHKan/Gh7xL/nmLFcqcbo9wAEN8G2GRs3uSzDrPm1OIqURp1ubCShNU4d+GPqqTfV9xynE0T+xBWmGofutPGtLIU7FnuamQs14xafrKcRpbbTZFNVWpsPF4WMfZ1FJnnBxWi5Tm6LKwmO4OHobgDgL9TwVZlzh4kRsj8geFd6SCBeHuBj6MUXnBXGKRvZeB3GSRvbFQcRJGjoOJTo3iFMwMn0NL6U4czzY+qYiOjepxWnhWH03onOTWhwtsxMXg1K1BZmOzlfpzHCcP+Jswdd+7VffsOqP0lfpGx61rxGtP5K/4wa2MGgn36Zj/jUTuqlHKNk+bJZSnF6e4UfM9IvvZdAblF1ydh6cJiz7NkxdX/dBkpPvRIwdwbK/m55GnBbQaCeRtvnKX/YHnYgTxFWTguyLfwJxAtm0F0klLXsZFogTTFe6TvoflbAq+48RJwlVhOlBHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLBAHLD4DOVazhHAxfyaAAAAAElFTkSuQmCC\",\n}\nexport default util;\n","import util from \"./util.js\";\nimport alert from \"./alert.js\";\nimport cache from \"./cache.js\";\nimport router from \"./router.js\";\n\nconst http = {\n    sendFile: (formData, loadFn, progressFn = null, errorFn = null) => {\n        return cache.get(\"apiKey\").then(apiKey => {\n            let xhr = new XMLHttpRequest();\n            xhr.open(\"POST\", \"/api/files\", true);\n            xhr.setRequestHeader(\"X-AUTH-TOKEN\", apiKey)\n            xhr.addEventListener(\"load\", e => {\n                if (e.target.status > 199 && e.target.status < 300) {\n                    loadFn(JSON.parse(e.target.response));\n                } else {\n                    if (errorFn) {\n                        errorFn(e.target.statusText);\n                    } else {\n                        console.error(e.target.statusText);\n                    }\n                }\n            });\n            if (progressFn) {\n                xhr.upload.onprogress = e => progressFn({loaded: e.loaded, total: e.total});\n            }\n            if (errorFn) {\n                xhr.addEventListener(\"error\", e => errorFn(e));\n            }\n            xhr.send(formData);\n        }).catch(err => {\n            err => console.warn(\"ERROR for \" + url, err)\n        }).catch(error => alert.add(error, \"alert-danger\"));\n    },\n    get: (url, nocache = false) => {\n        return cache.get(\"apiKey\").then(apiKey => {\n            url = router.toApp(url);\n            if (!url) {\n                return;\n            }\n            let h = {};\n            if (apiKey) {\n                h[\"X-AUTH-TOKEN\"] = apiKey;\n            }\n            if (nocache) {\n                h[\"X-NOCACHE\"] = \"nocache\";\n            }\n            return fetch(url, {\n                method: \"GET\",\n                headers: new Headers(h),\n            }).then(\n                res => res.ok && res.json()\n            ).catch(\n                err => console.warn(\"ERROR for \" + url, err)\n            )\n        }).catch(error => alert.add(error, \"alert-danger\"));\n    },\n    post: (url, data, contentType = \"application/json\") => http.request(url, data, \"POST\", contentType),\n    put: (url, data, contentType = \"application/json\") => http.request(url, data, \"PUT\", contentType),\n    delete: (url, data, contentType = \"application/json\") => http.request(url, null, \"DELETE\", contentType),\n    request: (url, data, method, contentType = \"application/json\") => {\n        return cache.get(\"apiKey\").then(apiKey => {\n            url = router.toApp(url);\n            if (!url) {\n                return;\n            }\n            let h = {};\n            if (apiKey) {\n                h[\"X-AUTH-TOKEN\"] = apiKey;\n            }\n            if (contentType) {\n                h[\"Content-type\"] = contentType;\n            }\n            let fetchOptions = {\n                method: method,\n                headers: new Headers(h),\n            }\n            if (data) {\n                fetchOptions.body = (typeof(data) == \"object\" && data.constructor.name == \"Object\") ? JSON.stringify(data) : data;\n            }\n            return fetch(url, fetchOptions).then(\n                res => {\n                    if (method == \"DELETE\") {\n                        return res;\n                    }\n                    try {\n                        return res.json();\n                    } catch (exception) {\n                        console.warn(exception.message);\n                        return Promise.reject(exception.message);\n                    }\n                }\n            ).catch(\n                err => console.warn(\"ERROR for \" + url, err)\n            )\n        }).catch(error => alert.add(error, \"alert-danger\"));\n    },\n};\nexport default http;\n","import http from \"./http.js\";\n\nconst cache = {\n    // reactive data store AND cache\n    data: {},\n    events: {},\n    register: (event, resolve) => {\n        if (typeof cache.events[event] === \"undefined\") {\n            cache.events[event] = [];\n        }\n        cache.events[event].push(resolve);\n    },\n    remove: id => {\n        Object.keys(cache.data).forEach(key => {\n            if (key.startsWith(id)) {\n                delete(cache.data[key]);\n                window.localStorage.removeItem(key);\n            }\n        });\n    },\n    set: (id, data, cacheDuration = null, persistant = true) => {\n        const storageBox = {\n            data: data,\n            timestamp: Date.now(),\n            cacheDuration: cacheDuration\n        };\n        if (persistant) {\n            window.localStorage.setItem(id, JSON.stringify(storageBox));\n        } else {\n            cache.data[id] = storageBox;\n        }\n        return Promise.resolve(id);\n    },\n    get: (id, nocache = false) => {\n        if (!id) {\n            return new Promise(r => null);\n        }\n        // if nocache is false, try to load from the cache\n        if (!nocache) {\n            let data = null;\n            data = cache.data[id];\n            if (!data) {\n                data = window.localStorage.getItem(id);\n                data = data ? JSON.parse(data) : null;\n            }\n            if (data) {\n                let c = data.cacheDuration || 1000*60*60*24*365; // 1 year when not specified\n                if (data.timestamp < Date.now() - c) {\n                    cache.remove(id);\n                    data = null;\n                }\n            }\n            if (data) {\n                if (data.status == \"pending\") {\n                    // a request for the resource was made. Let's wait for it\n                    return new Promise(r => cache.register(id, r));\n                }\n                return new Promise(r => r(data.data));\n            }\n        }\n        // if it's an api resource, refresh it\n        if (/^\\/api/.test(id)) {\n            let cacheDuration = 10000; // short cache by default to avoid double calls (10s)\n            //if (/^\\/api\\/messages/.test(id)) {\n            //    cacheDuration = 10 * 60 * 1000; // 10mn for a message (not likely to be changed often)\n            //}\n            //if (/^\\/api\\/(users|links|groups|me)/.test(id)) {\n            //    cacheDuration = 60 * 60 * 1000; // 60mn for a user/group/link\n            //}\n            if (/^\\/api\\/(links)/.test(id)) {\n                cacheDuration = 6 * 60 * 60 * 1000; // 6h for a link\n            }\n            cache.data[id] = {status: \"pending\"};\n            return cache.update(id, cacheDuration, false);\n        }\n        return new Promise(r => r(null));\n    },\n    update: (url, cacheDuration = 60*1000, persistant = false) => {\n        cache.data[url] = Object.assign({status: \"pending\"}, cache.data[url]);\n        return http.get(url).then(res => {\n            cache.set(url, res, cacheDuration, persistant);\n            cache.data[url] = Object.assign({status: \"ready\"}, cache.data[url]);\n            if (Array.isArray(cache.events[url])) {\n                cache.events[url].forEach(r => r.call(null, cache.data[url].data));\n            }\n            delete(cache.events[url]);\n            return new Promise(r => r(res));\n        });\n    },\n    resetCache: () => {\n        cache.data = {};\n        cache.events = {};\n        window.dispatchEvent(new CustomEvent(\"resetCache\"));\n    },\n    reset: () => window.localStorage.clear() && cache.resetCache(),\n};\nexport default cache;\n","import _alert from \"./alert.js\";\nimport _cache from \"./cache.js\";\nimport _http from \"./http.js\";\nimport _me from \"./me.js\";\nimport _router from \"./router.js\";\nimport _util from \"./util.js\";\nimport _lang from \"./lang.js\";\n\nexport const alert = _alert;\nexport const cache = _cache;\nexport const http = _http;\nexport const me = _me;\nexport const router = _router;\nexport const util = _util;\nexport const lang = _lang;\n","import { h, render, Component } from \"preact\";\n\n// Fontawesome icons taken from https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/js/all.js\n\nexport default class FaIcon extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"regular\": {\n                \"comment\": [512, 512, [], \"f075\", \"M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z\"],\n                \"images\": [576, 512, [], \"f302\", \"M480 416v16c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V176c0-26.51 21.49-48 48-48h16v48H54a6 6 0 0 0-6 6v244a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6v-10h48zm42-336H150a6 6 0 0 0-6 6v244a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6V86a6 6 0 0 0-6-6zm6-48c26.51 0 48 21.49 48 48v256c0 26.51-21.49 48-48 48H144c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h384zM264 144c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.909-40 40-40 40 17.909 40 40zm-72 96l39.515-39.515c4.686-4.686 12.284-4.686 16.971 0L288 240l103.515-103.515c4.686-4.686 12.284-4.686 16.971 0L480 208v80H192v-48z\"],\n                \"check-circle\": [512, 512, [], \"f058\", \"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z\"],\n                 \"file-pdf\": [384, 512, [], \"f1c1\", \"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm250.2-143.7c-12.2-12-47-8.7-64.4-6.5-17.2-10.5-28.7-25-36.8-46.3 3.9-16.1 10.1-40.6 5.4-56-4.2-26.2-37.8-23.6-42.6-5.9-4.4 16.1-.4 38.5 7 67.1-10 23.9-24.9 56-35.4 74.4-20 10.3-47 26.2-51 46.2-3.3 15.8 26 55.2 76.1-31.2 22.4-7.4 46.8-16.5 68.4-20.1 18.9 10.2 41 17 55.8 17 25.5 0 28-28.2 17.5-38.7zm-198.1 77.8c5.1-13.7 24.5-29.5 30.4-35-19 30.3-30.4 35.7-30.4 35zm81.6-190.6c7.4 0 6.7 32.1 1.8 40.8-4.4-13.9-4.3-40.8-1.8-40.8zm-24.4 136.6c9.7-16.9 18-37 24.7-54.7 8.3 15.1 18.9 27.2 30.1 35.5-20.8 4.3-38.9 13.1-54.8 19.2zm131.6-5s-5 6-37.3-7.8c35.1-2.6 40.9 5.4 37.3 7.8z\"],\n                 \"bell\": [448, 512, [], \"f0f3\", \"M439.39 362.29c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71zM67.53 368c21.22-27.97 44.42-74.33 44.53-159.42 0-.2-.06-.38-.06-.58 0-61.86 50.14-112 112-112s112 50.14 112 112c0 .2-.06.38-.06.58.11 85.1 23.31 131.46 44.53 159.42H67.53zM224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64z\"],\n            },\n            \"solid\": {\n                \"comment\": [512, 512, [], \"f075\", \"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z\"],\n                \"pencil-alt\": [512, 512, [], \"f303\", \"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z\"],\n                \"arrow-left\": [448, 512, [], \"f060\", \"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z\"],\n                \"caret-down\": [320, 512, [], \"f0d7\", \"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\"],\n                \"film\": [512, 512, [], \"f008\", \"M488 64h-8v20c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V64H96v20c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12V64h-8C10.7 64 0 74.7 0 88v336c0 13.3 10.7 24 24 24h8v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h320v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h8c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24zM96 372c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm272 208c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm0-168c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm112 152c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z\"],\n                \"times\": [352, 512, [], \"f00d\", \"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\"],\n                 \"bell\": [448, 512, [], \"f0f3\", \"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z\"],\n                 \"ellipsis-h\": [512, 512, [], \"f141\", \"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z\"],\n                \"search\": [512, 512, [], \"f002\", \"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z\"],\n            }\n        };\n    }\n\n    render() {\n        const icon = this.state[this.props.family][this.props.icon];\n        return icon && <svg className={\"fa-icon \" + this.props.family + \" \" + this.props.icon} viewBox={\"0 0 \" + icon[0] + \" \" + icon[1]}><path fill=\"currentColor\" d={icon[4]}></path></svg>;\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, router, util } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\n\nexport default class Search extends Component {\n\n    constructor(props) {\n        super(props);\n        this.search = this.search.bind(this);\n    }\n\n    search(evt) {\n        evt.preventDefault();\n        // https://stackoverflow.com/a/37511463\n        let searchTerms = document.getElementById('search').value.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\").split(\" \");\n        let group_id = router.route == \"messages\" ? router.entity.group.id : router.entity.id;\n        router.navigate(\"/groups/\" + group_id + \"?search=\" + searchTerms.map(e => encodeURIComponent(e)).join('+'));\n    }\n\n    render() {\n        return (\n            <form class=\"navbar-block search-block\">\n                <div class=\"input-group\">\n                    <input\n                        class=\"form-control\"\n                        type=\"text\"\n                        id=\"search\"\n                        placeholder={lang.t(\"search_in_group\")}\n                        value={decodeURIComponent(router.getParam('search').replace(/\\+/g,\" \"))}\n                    ></input>\n                    <div class=\"input-group-append\">\n                        <button\n                            onClick={e => this.search(e)}\n                            class=\"btn btn-secondary\"\n                            type=\"submit\"\n                        >\n                            <FaIcon family={\"solid\"} icon={\"search\"}/>\n                        </button>\n                    </div>\n                </div>\n            </form>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, router } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\n\nexport default class GroupsDropdownNavbar extends Component {\n\n    constructor(props) {\n        super(props);\n        // force update the navbar when me gets updated\n        addEventListener(\"meStateChange\", _ => this.setState({}));\n    }\n\n    render() {\n        return (\n            <div class=\"navbar-block\">\n                { me.me.groups && (\n                    <div\n                        class=\"nav-link dropdown groups unselectable\" tabindex=\"-1\"\n                        onBlur={e => (!e.relatedTarget || !e.relatedTarget.href) && e.target.classList.remove(\"active\")}\n                        onClick={e => e.currentTarget.classList.toggle(\"active\")}\n                    >\n                        <div class=\"unselectable pr-5px\">\n                            { lang.t(\"groups\") } <FaIcon family={\"solid\"} icon={\"caret-down\"}/>\n                        </div>\n                        <div class=\"dropdown-menu dropdown-left\">\n                            { me.me.groups.map(\n                                e => (\n                                    <a\n                                        class=\"d-block seamless-link unselectable\"\n                                        href={router.toApp(\"/groups/\" + e.id)}\n                                        onClick={e => router.onClick(e)}\n                                    >\n                                        {e.name}\n                                    </a>\n                                )\n                            )}\n                            <a\n                                class=\"seamless-link unselectable\"\n                                href={router.toApp(\"/create-group\")}\n                                onClick={e => router.onClick(e)}\n                            >\n                                {\"+ \" + lang.t(\"create_a_group\")}\n                            </a>\n                        </div>\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n","import { h, render, Component, Fragment } from \"preact\";\nimport { lang, me, router, util } from \"/core\";\n\nexport default class Notification extends Component {\n\n    constructor(props) {\n        super(props);\n        this.getMiniatureSrc = this.getMiniatureSrc.bind(this);\n        this.setMiniatureOnError = this.setMiniatureOnError.bind(this);\n        this.getAction = this.getAction.bind(this);\n        this.getTarget = this.getTarget.bind(this);\n        this.state = {\n            target: this.getTarget(),\n            action: this.getAction(),\n        };\n    }\n\n    getMiniatureSrc() {\n        if (this.props.type == \"global_notification\") {\n            return util.defaultAvatar;\n        }\n        return this.props.fromUser.avatar ? util.crop(this.props.fromUser.avatar[\"id\"], 80, 80) : util.defaultAvatar;\n    }\n\n    setMiniatureOnError(event) {\n        event.currentTarget.src = util.defaultAvatar;\n    }\n\n    getAction() {\n        switch (this.props.type) {\n            case \"new_message\":\n                return lang.t(\"has_posted_in\");\n            case \"new_comment\":\n                return lang.t(\"has_commented_on\");\n            case \"user_joined_group\":\n                return lang.t(\"has_joined\");\n            case \"global_notification\":\n                return lang.t(\"global_notification\");\n            default:\n                return \"\";\n        }\n    }\n\n    getObject() {\n        switch (this.props.type) {\n            case \"new_message\":\n                return (\n                    <a\n                        href={router.toApp(\"/groups/\" + this.props.fromGroup.id)}\n                        onClick={e => router.onClick(e)}\n                    >\n                        {this.props.fromGroup.name}\n                    </a>\n                );\n            case \"new_comment\":\n                return (\n                    <span>\n                        {lang.t(\"the_message_from\") + \" \"}\n                        <strong>{this.props.fromMessage.author[\"name\"]}</strong>\n                        {\" \" + lang.t(\"in\") + \" \"}\n                        <a\n                            href={router.toApp(\"/groups/\" + this.props.fromGroup.id)}\n                            onClick={e => router.onClick(e)}\n                        >\n                            {this.props.fromGroup.name}\n                        </a>\n                    </span>\n                );\n            case \"user_joined_group\":\n                return (\n                    <a\n                        href={router.toApp(\"/groups/\" + this.props.fromGroup.id)}\n                        onClick={e => router.onClick(e)}\n                    >\n                        {this.props.fromGroup.name}\n                    </a>\n                );\n            case \"global_notification\":\n                return this.props.data[\"text\"];\n            default:\n                return \"\";\n        }\n    }\n\n    getTarget() {\n        switch (this.props.type) {\n            case \"user_joined_group\":\n                return \"/groups/\" + this.props.fromGroup.id;\n            case \"new_message\":\n                return \"/messages/\" + this.props.target;\n            case \"new_comment\":\n                return \"/messages/\" + this.props.fromMessage.id;\n            case \"global_notification\":\n                return this.props.target;\n            default:\n                return \"\";\n        }\n    }\n\n    render() {\n        return (\n            <a\n                class=\"notification seamless-link unselectable\"\n                href={router.toApp(this.state.target)}\n                onClick={e => {\n                    e.preventDefault();\n                    me.removeMatchingNotifications(this.props.id).then(_ => router.onClick(e, false, this.state.target));\n                }}\n            >\n                <div class=\"miniature unselectable\">\n                    <img\n                        src={this.getMiniatureSrc()}\n                        onError={e => this.setMiniatureOnError(e)}\n                    />\n                </div>\n                <div class=\"infos\">\n                    <div class=\"description\">\n                        { this.props.type != \"global_notification\" && (\n                            <Fragment>\n                                <strong>{this.props.fromUser.name}</strong>\n                                <span>{\" \" + this.state.action + \" \"}</span>\n                            </Fragment>\n                        )}\n                        {this.getObject()}\n                    </div>\n                    <div class=\"date\" title={util.humanFullDate(this.props.createdAt)}>\n                        {util.humanTime(this.props.createdAt)}\n                    </div>\n                </div>\n            </a>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, router } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\nimport Notification from \"./notification.component.js\";\n\nexport default class NotificationsDropdownNavbar extends Component {\n\n    constructor(props) {\n        super(props);\n        // force update the navbar when me gets updated\n        addEventListener(\"meStateChange\", _ => this.setState({}));\n    }\n\n    render() {\n        return (\n            <div\n                className={\n                    \"menu dropdown\" + (me.me.notifications.length ? \" cursor-pointer\" : \"\")\n                }\n                tabindex=\"-1\"\n                onBlur={e => (!e.relatedTarget || !e.relatedTarget.href) && e.target.classList.remove(\"active\")}\n                onClick={e => me.me.notifications.length && e.currentTarget.classList.toggle(\"active\")}\n            >\n                <div class=\"unselectable notification-button\">\n                    <FaIcon family={me.me.notifications.length ? \"solid\" : \"regular\"} icon={\"bell\"}/>\n                </div>\n                <div class=\"dropdown-menu dropdown-right notifications-menu\">\n                    {\n                        me.me.notifications\n                            ?  me.me.notifications.sort(\n                                   (a, b) => b.createdAt - a.createdAt\n                               ).map(e => <Notification key={e.id} {...e}/>)\n                            : null\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, router, util } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\nimport Search from \"./search.component.js\";\nimport GroupsDropdownNavbar from \"./groups-dropdown-navbar.component.js\";\nimport NotificationsDropdownNavbar from \"./notifications-dropdown-navbar.component.js\";\n\nexport default class Navbar extends Component {\n\n    constructor(props) {\n        super(props);\n        this.clickBackButton = this.clickBackButton.bind(this);\n        // force update the navbar when me gets updated\n        addEventListener(\"meStateChange\", _ => this.setState({}));\n    }\n\n    clickBackButton(evt) {\n        evt.preventDefault();\n        if (router.backUrlPrompt && !confirm(router.backUrlPrompt)) {\n            return false;\n        }\n        router.onClick(evt);\n    }\n\n    render() {\n        return (\n            <div class=\"main-nav nav align-items-center z-index-100\">\n                <div class=\"navbar-block\">\n                    { !router.backUrl && (\n                        <div\n                            class=\"menu dropdown cursor-pointer\" tabindex=\"-1\"\n                            onBlur={e => (!e.relatedTarget || !e.relatedTarget.href) && e.target.classList.remove(\"active\")}\n                            onClick={e => e.currentTarget.classList.toggle(\"active\")}\n                        >\n                            <div class=\"rounded-circle avatar unselectable\">\n                                <img\n                                    class=\"rounded-circle\"\n                                    src={me.me.avatar ? util.crop(me.me.avatar[\"id\"], 80, 80) : util.defaultAvatar}\n                                    onError={e => e.currentTarget.src = util.defaultAvatar}\n                                />\n                            </div>\n                            <div class=\"dropdown-menu dropdown-right\">\n                                <a\n                                    class=\"d-block seamless-link\"\n                                    href={router.toApp(\"/users/\" + me.me.id + \"/settings\")}\n                                    onClick={e => router.onClick(e)}\n                                >\n                                    {lang.t(\"settings\")}\n                                </a>\n                                <a\n                                    class=\"d-block seamless-link\"\n                                    href={router.toApp(\"/logout\")}\n                                    onClick={e => router.onClick(e)}\n                                >\n                                    {lang.t(\"logout\")}\n                                </a>\n                            </div>\n                        </div>\n                    )}\n                    { [\"groups\", \"messages\"].includes(router.route) && router.backUrl && (\n                        <a\n                            class=\"seamless-link back\"\n                            href={router.toApp(router.backUrl)}\n                            onClick={e => this.clickBackButton(e)}\n                        >\n                            <FaIcon family={\"solid\"} icon={\"arrow-left\"}/>\n                        </a>\n                    )}\n                    <NotificationsDropdownNavbar />\n                </div>\n                { !router.backUrl && <Search />}\n                <GroupsDropdownNavbar />\n            </div>\n        );\n    }\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","import { h, render, Component } from \"preact\";\nimport { cache, util, router } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class FileGrid extends Component {\n\n    constructor(props) {\n        super(props);\n        this.toggleFile = this.toggleFile.bind(this);\n        let files = [];\n        if (Array.isArray(props.files)) {\n            props.files.forEach((e,i) => {\n                if (e.fileIndex == null) {\n                    e.fileIndex = i;\n                }\n                files.splice(e.fileIndex, 0, e);\n            });\n        }\n        this.state = {files: files};\n    }\n\n    toggleFile(evt, fileIndex) {\n        evt.stopPropagation();\n        evt.preventDefault();\n        if (typeof(this.props.toggleFile) == \"function\") {\n            this.props.toggleFile(evt.currentTarget.getAttribute(\"fileIndex\"));\n        }\n    }\n\n    renderFile(file, miniature = false) {\n        let filePath = file.contentUrl ? \"/files/\" + file.contentUrl : null;\n        let url = filePath;\n        if (/image/.test(file.type) && file.type != \"image/gif\") {\n            // no limit in height for long format images\n            url = util.thumbnail(file.id, 1366, 999999);\n        }\n        if (miniature == true) {\n            if (file.status == \"ready\") {\n                return (\n                    <a\n                        data-nlg={!this.props.inWriter}\n                        data-origin={filePath}\n                        data-src={util.thumbnail(file.id, 1366, 768)}\n                        href={!this.props.inWriter && router.toApp(url)}\n                        class=\"rounded\"\n                    >\n                        <div\n                            className={\"miniature\" + (file.removed ? \" removed\" : \"\")}\n                            style={\"background-image:url('\" + util.crop(file.id, 160, 160) + \"')\"}\n                        ></div>\n                        <div\n                            class=\"remove-button\"\n                            style={file.removed ? \"color:red\" : \"\"}\n                            fileIndex={file.fileIndex}\n                            onClick={e => this.toggleFile(e)}\n                        >\n                            <FaIcon family={\"solid\"} icon={\"times\"}/>\n                        </div>\n                    </a>\n                );\n            }\n            if (file.status == \"raw\") {\n                return (\n                    <a class=\"rounded\">\n                        <div class=\"miniature\"><FaIcon family={\"regular\"} icon={\"check-circle\"} /></div>\n                    </a>\n                );\n            }\n            return (\n                <a class=\"rounded\">\n                    <div class=\"miniature video-raw\" style={\"background-image:url('\" + util.crop(file.id, 160, 160) + \"')\"}></div>\n                    <div class=\"spinner orange-spinner\"><div></div><div></div><div></div><div></div><div></div></div>\n                </a>\n            );\n        }\n        if (file.contentUrl) {\n            if (/video/.test(file.type)) {\n                if (file.status == \"ready\") {\n                    return <video\n                        poster={util.thumbnail(file.id, 1280, 720)}\n                        class=\"img-fluid contained-height video\"\n                        controls=\"true\"\n                        src={url}\n                    ></video>;\n                }\n                return (\n                    <a class=\"image video-uploaded\">\n                        <img class=\"img-fluid video-raw\" src={util.crop(file.id, 320, 180)}></img>\n                        <div class=\"spinner orange-spinner\"><div></div><div></div><div></div><div></div><div></div></div>\n                    </a>\n                );\n            }\n            if (/image/.test(file.type)) {\n                return (\n                    <a\n                        data-nlg={!this.props.inWriter}\n                        data-origin={filePath}\n                        href={!this.props.inWriter && router.toApp(url)}\n                        className={\"image\" + (file.removed ? \" removed\" : \"\")}\n                    >\n                        <img class=\"img-fluid\" src={url}></img>\n                        <div\n                            class=\"remove-button\"\n                            style={file.removed ? \"color:red\" : \"\"}\n                            fileIndex={file.fileIndex}\n                            onClick={e => this.toggleFile(e)}\n                        >\n                            <FaIcon family={\"solid\"} icon={\"times\"}/>\n                        </div>\n                    </a>\n                );\n            }\n        }\n        return (\n            <div class=\"file-placeholder\">\n                { file[\"error\"] ? <div class=\"orange-error\">&times;</div> : (\n                    <div class=\"spinner orange-spinner\"><div></div><div></div><div></div><div></div><div></div></div>\n                )}\n                <div class=\"progress-bar\"><div style={{width: file.progress + \"%\"}}></div></div>\n            </div>\n        );\n    }\n\n    render() {\n        if (!this.props.files || this.props.files.length === 0) {\n            return null;\n        }\n        if (this.props.files && this.props.files.length > 3) {\n            return (\n                <div class=\"file-grid\">\n                    { this.state.files.sort((a, b) => a.fileIndex > b.fileIndex ? 1 : -1).map(e => this.renderFile(e, true)) }\n                </div>\n            );\n        }\n        return (\n            <div class=\"d-flex justify-content-center flex-wrap\">\n                { this.state.files.sort((a, b) => a.fileIndex > b.fileIndex ? 1 : -1).map(e => this.renderFile(e)) }\n            </div>\n        );\n    }\n\n    componentDidMount() {\n        import(\"/lazy/nlg.js\").then(nlg => nlg.default.start());\n    }\n\n    componentDidUpdate() {\n        import(\"/lazy/nlg.js\").then(nlg => nlg.default.start());\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessageHead extends Component {\n\n    render() {\n        return (\n            <div class=\"message-head d-flex\">\n                <div>\n                    <img\n                        className={\"rounded-circle material-shadow avatar\" + (this.props.author ? \"\" : \" removed-user\")}\n                        src={\n                            this.props.author && this.props.author.avatar ?\n                                util.crop(this.props.author.avatar.id, 100, 100)\n                                : util.defaultAvatar\n                        }\n                        title={ this.props.author ? this.props.author.name : \"\"}\n                    />\n                </div>\n                { !this.props.isChild && (\n                    <div class=\"infos\">\n                        <span class=\"capitalize author\">{this.props.author ? this.props.author.name : \"--\"}</span>\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n","import { Fragment, h, render, Component } from \"preact\";\nimport { router, lang, me, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessageFooter extends Component {\n\n    render() {\n        return (\n            <div class=\"message-footer\">\n                <div class=\"infos\">\n                    { this.props.author && this.props.author.id == me.me.id && (\n                        <Fragment>\n                            <a\n                                class=\"action seamless-link font-size-90 capitalize\"\n                                onClick={e => this.props.editMessage(e)}\n                            >\n                                {lang.t(\"edit\")}\n                            </a>\n                            <div class=\"dot\">&bull;</div>\n                        </Fragment>\n                    )}\n                    { !this.props.isPublic && this.props.isChild && (\n                        <Fragment>\n                            <a\n                                class=\"action seamless-link font-size-90 capitalize\"\n                                href={router.toApp(\n                                    \"/messages/\" + this.props.message.id + (this.props.message.children.length ? \"\" : \"?focus=reply\")\n                                )}\n                                onClick={e => router.onClick(e)}\n                            >\n                                {this.props.message.children.length ?\n                                        lang.t(\"replies\", {count:this.props.message.children.length})\n                                        : lang.t(\"reply\")\n                                }\n                            </a>\n                            <div class=\"dot\">&bull;</div>\n                        </Fragment>\n                    )}\n                    <div class=\"date font-size-90\" title={util.humanFullDate(this.props.message.createdAt)}>\n                        { util.humanTime(this.props.message.createdAt) }\n                    </div>\n                    { this.props.author && (\n                        <Fragment>\n                            <div class=\"dot\">&bull;</div>\n                            <div class=\"font-size-90\">{this.props.author.name}</div>\n                        </Fragment>\n                    )}\n                </div>\n                <div>\n                    { !this.props.isPublic && (\n                        <div\n                            class=\"options dropdown\"\n                            onBlur={e => (!e.relatedTarget || !e.relatedTarget.href) && e.target.classList.remove(\"active\")}\n                            onClick={e => e.currentTarget.classList.toggle(\"active\")}\n                        >\n                            <div class=\"dropdown-menu dropdown-options\">\n                                { this.props.author && this.props.author.id == me.me.id && (\n                                    <a\n                                        class=\"seamless-link capitalize\"\n                                        onClick={e => this.props.deleteMessage(e)}\n                                    >\n                                        {lang.t(\"delete\")}\n                                    </a>\n                                )}\n                                {(\n                                    <a\n                                        class=\"seamless-link capitalize\"\n                                        onClick={e => this.props.openPublicLink(e)}\n                                    >\n                                        {lang.t(\"public_link\")}\n                                    </a>\n                                )}\n                                { me.me.groups.length > 1 && (\n                                    <a\n                                        class=\"seamless-link capitalize\"\n                                        onClick={e => this.props.shareMessage(e)}\n                                    >\n                                        {lang.t(\"share_message\")}\n                                    </a>\n                                )}\n                                { !this.props.message.isInFront && this.props.author.id == me.me.id && (\n                                    <a\n                                        class=\"seamless-link capitalize\"\n                                        onClick={e => this.props.publishInGroup(e)}\n                                    >\n                                        {lang.t(\"publish_in_group\")}\n                                    </a>\n                                )}\n                            </div>\n                            <div class=\"none-if-follows-empty\">\n                                <FaIcon family=\"solid\" icon=\"ellipsis-h\"/>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { router } from \"/core\";\n\nexport default class TwitchEmbed extends Component {\n    render() {\n        let embedUrl = \"\";\n        const splits = this.props.url.split(\"/\");\n        const t = router.getParam(\"t\", this.props.url.split(\"?\")[1]);\n        switch (splits[2]) {\n            case \"www.twitch.tv\":\n                if (splits.length > 5 && splits[4] == \"clip\") {\n                    embedUrl = \"https://clips.twitch.tv/embed?clip=\" + splits[5].replace(/\\?.*$/,\"\") + \"&autoplay=false\";\n                } else {\n                    embedUrl = \"https://player.twitch.tv/?video=\" + splits[4].replace(/\\?.*$/,\"\") + \"&autoplay=false\" + (t ? \"&t=\" + t : \"\");\n                }\n                break;\n            case \"clips.twitch.tv\":\n                embedUrl = \"https://clips.twitch.tv/embed?clip=\" + splits[3].replace(/\\?.*$/,\"\") + \"&autoplay=false\";\n                break;\n        }\n        return <div class=\"embed-responsive embed-responsive-16by9\"><iframe allowfullscreen class=\"embed-responsive-item\" src={embedUrl}></iframe></div>;\n    }\n}\n","import { h, render, Component } from \"preact\";\n\nexport default class BandCampEmbed extends Component {\n    render() {\n        const embedUrl = this.props.url + \"/size=large/bgcol=f5f5f5/linkcol=0687f5/minimal=true/tracklist=false/\";\n        return (\n            <div class=\"bandcamp-embed embed-responsive embed-responsive-1by1\">\n                <iframe class=\"embed-responsive-item\" src={embedUrl}></iframe>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { util } from \"/core\";\n\nexport default class GenericEmbed extends Component {\n    render() {\n        if (this.state.revealed) {\n            return (\n                <div class=\"embed-responsive embed-responsive-16by9\">\n                    <iframe allowfullscreen class=\"embed-responsive-item\" src={this.props.url}>\n                    </iframe>\n                </div>\n            );\n        }\n        return (\n            <div class=\"embed-preview\" onClick={() => this.setState({revealed: true})}>\n                <div className={this.props.playBtnClass}></div>\n                <img src={this.props.preview}/>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { util, router } from \"/core\";\nimport TwitchEmbed from \"./embeds/twitch-embed.component.js\";\nimport BandCampEmbed from \"./embeds/bandcamp-embed.component.js\";\nimport GenericEmbed from \"./embeds/generic-embed.component.js\";\n\nexport default class EmbedBlock extends Component {\n\n    execute(e) {\n        if (e.innerHTML) {\n            eval(e.innerHTML);\n        } else {\n            const url = e.getAttribute(\"src\");\n            if (url) {\n                const script = document.createElement(\"script\");\n                script.async = true;\n                script.src = url;\n                document.head.appendChild(script);\n            }\n        }\n    }\n\n    componentDidMount() {\n        if (this.embedContainer) {\n            Array.from(this.embedContainer.getElementsByTagName(\"script\")).forEach(e => this.execute(e));\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.embedContainer) {\n            Array.from(this.embedContainer.getElementsByTagName(\"script\")).forEach(e => this.execute(e));\n        }\n    }\n\n    getPreview() {\n        if (this.props.data[\"providerUrl\"]) {\n            switch (this.props.data[\"providerUrl\"].toLowerCase().replace(/\\/$/, '').replace(/^https?:\\/\\/(www\\.)?/, '')) {\n                case \"gamerdvr.com\":\n                    if (this.props.data[\"url\"].match(/\\/gamer\\/\\w+\\/video\\//)) {\n                        return (\n                            <GenericEmbed\n                                preview={util.crop(this.props.preview.id, 1024, 270)}\n                                url={this.props.data[\"url\"] + \"/embed\"}\n                                playBtnClass={\"gamerdvr\"}\n                            />\n                        );\n                    }\n                    break;\n                case \"youtube.com\":\n                    if (this.props.data[\"type\"] == \"video\" && this.props.data[\"code\"]) {\n                        return (\n                            <GenericEmbed\n                                preview={util.crop(this.props.preview.id, 1024, 270)}\n                                url={this.props.data[\"code\"].match(/https:\\/\\/[^\\\"\\s]+/)[0] + \"&autoplay=1&controls=2&wmode=opaque\"}\n                                playBtnClass={\"youtube\"}\n                            />\n                        );\n                    }\n                    break;\n                case \"soundcloud.com\":\n                    if (this.props.data[\"code\"]) {\n                        return (\n                            <GenericEmbed\n                                preview={util.crop(this.props.preview.id, 1024, 270)}\n                                url={this.props.data[\"code\"].match(/https:\\/\\/[^\\\"\\s]+/)[0] + \"&auto_play=true\"}\n                                playBtnClass={\"soundcloud\"}\n                            />\n                        );\n                    }\n                case \"twitch.tv\":\n                    return <TwitchEmbed preview={this.props.preview} url={this.props.data[\"url\"]}/>;\n                case \"bandcamp.com\":\n                    if (this.props.data[\"code\"]) {\n                        return <BandCampEmbed url={this.props.data[\"code\"].match(/https:\\/\\/.*album=\\d+/)[0]}/>;\n                    }\n                case \"imgur.com\":\n                    // skip default embed code if it's an imgur image\n                    if (this.props.data[\"type\"] == \"photo\") {\n                        break;\n                    }\n                case \"vimeo.com\":\n                case \"dailymotion.com\":\n                case \"facebook.com\":\n                    // default embed code\n                    if (this.props.data[\"code\"]) {\n                        return (\n                            <div class=\"embed-container\"\n                                ref={e => this.embedContainer = e}\n                                dangerouslySetInnerHTML={{__html: this.props.data[\"code\"]}}\n                            ></div>\n                        );\n                    }\n                default:\n            }\n        }\n        if (this.props.data[\"providerName\"]) {\n            switch (this.props.data[\"providerName\"].toLowerCase()) {\n                case \"peertube\":\n                    // default embed code\n                    if (this.props.data[\"code\"]) {\n                        return (\n                            <div class=\"embed-container\"\n                                ref={e => this.embedContainer = e}\n                                dangerouslySetInnerHTML={{__html: this.props.data[\"code\"]}}\n                            ></div>\n                        );\n                    }\n                default:\n            }\n        }\n        if (/image/.test(this.props.data[\"content-type\"])) {\n            return (\n                <div class=\"container d-flex justify-content-center flex-wrap align-items-center\">\n                    <img\n                        data-nlg={!this.props.inWriter}\n                        href={router.toApp(this.props.url)}\n                        class=\"img-fluid cursor-pointer\"\n                        data-src={this.props.url}\n                        src={ this.props.preview && !/gif/.test(this.props.data[\"content-type\"]) ? util.thumbnail(this.props.preview.id, 1366, 99999) : this.props.url }\n                    />\n                </div>\n            );\n        }\n        if (/video/.test(this.props.data[\"content-type\"])) {\n            return (\n                <div class=\"container d-flex justify-content-center flex-wrap align-items-center\">\n                    <video class=\"img-fluid\" controls src={ this.props.url } />\n                </div>\n            );\n        }\n        if (this.props.data[\"title\"] && (this.props.preview || this.props.data[\"description\"])) {\n            return (\n                <a class=\"preview-card seamless-link d-inline-block\" target=\"_blank\" href={router.toApp(this.props.url)}>\n                    <div class=\"card\" style=\"max-width: 480px\">\n                        { this.props.preview && <img class=\"card-img-top\" src={ util.crop(this.props.preview.id, 320, 180) } /> }\n                        <div class=\"card-body p-1\">\n                            <h5>{ this.props.data[\"title\"] }</h5>\n                            { this.props.data[\"description\"] && (\n                                <p><small>{ this.props.data[\"description\"].slice(0, 500) }</small></p>\n                            )}\n                        </div>\n                    </div>\n                </a>\n            );\n        }\n        return null;\n    }\n\n    render() {\n        if (!this.props.url || !this.props.data) {\n            return null;\n        }\n        let preview = this.getPreview();\n        if (preview) {\n            return (\n                <p class=\"text-center card-text\">\n                    { preview }\n                </p>\n            );\n        }\n        return null;\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, lang, me, util } from \"/core\";\nimport EmbedBlock from \"./embed-block.component.js\";\nimport FileGrid from \"./file-grid.component.js\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessageBody extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {preview: null};\n    }\n\n    displayMessageText() {\n        if (!this.props.message.data) {\n            return \"\";\n        }\n        // escape html a little (just enough to avoid xss I hope)\n        let txt = this.props.message.data[\"text\"].replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").trim();\n        // replace url by real links\n        let shift = 0;\n        let match = null;\n        while (match = util.getUrl(txt.slice(shift))) {\n            let url = match[0];\n            if (url.length >= 50) {\n                url = url.slice(0, 25) + \"...\" + url.slice(-24);\n            }\n            let link = '<a href=\"' + match[0] + '\" target=\"_blank\">' + url + '</a>';\n            txt = txt.slice(0, match[\"index\"] + shift) + link + txt.slice(match[\"index\"] + shift + match[0].length);\n            shift += match[\"index\"] + link.length;\n        }\n        // replace line returns\n        txt = txt.replace(/\\n/g, \"<br/>\");\n        return {__html: txt};\n    }\n\n    componentWillUpdate() {\n        if (!this.state.gotPreview && this.props.message) {\n            if (this.props.message.data) {\n                let previewUrl = util.getUrl(this.props.message.data[\"text\"]);\n                if (previewUrl) {\n                    cache.get(\"/api/links/by_url?url=\" + encodeURIComponent(previewUrl[0])).then(r => {\n                        this.setState(prevState => ({\n                            preview: r,\n                            gotPreview: true,\n                        }));\n                    });\n                } else {\n                    this.setState(prevState => ({\n                        gotPreview: true,\n                    }));\n                }\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div class=\"message-body\">\n                { this.props.message.data && this.props.message.data.title && (\n                    <div class=\"title\">\n                        <span>{ this.props.message.data.title }</span>\n                    </div>\n                )}\n                { this.props.message.data && this.props.message.data.text && this.props.message.data.text.trim() && (\n                    <p class=\"card-text\" dangerouslySetInnerHTML={this.displayMessageText()}></p>\n                )}\n                { this.state.preview && (\n                    <EmbedBlock\n                        key={this.state.preview.url}\n                        url={this.state.preview.url}\n                        preview={this.state.preview.preview}\n                        data={this.state.preview.data}\n                    />\n                )}\n                { this.props.message.files && <FileGrid files={this.props.message.files}/> }\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, alert, cache, http, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\nimport EmbedBlock from \"./embed-block.component.js\";\nimport FileGrid from \"./file-grid.component.js\";\n\nexport default class Writer extends Component {\n\n    constructor(props) {\n        super(props);\n        this.sendMessage = this.sendMessage.bind(this);\n        this.genPreview = this.genPreview.bind(this);\n        this.postMessage = this.postMessage.bind(this);\n        this.putMessage = this.putMessage.bind(this);\n        this.onKeyPress = this.onKeyPress.bind(this);\n        this.toggleFile = this.toggleFile.bind(this);\n        this.inputImages = this.inputImages.bind(this);\n        this.inputVideo = this.inputVideo.bind(this);\n        this.uploadFile = this.uploadFile.bind(this);\n        this.uploadNextImage = this.uploadNextImage.bind(this);\n        this.state = {files: [], writerId: +Date.now()};\n    }\n\n    componentWillMount() {\n        this.setState({\n            files: this.props.files || [],\n            link: null,\n            preview: null\n        });\n    }\n\n    componentDidMount() {\n        if (document.getElementById(\"title\")) {\n            document.getElementById(\"title\").value = this.props.title || \"\";\n        }\n        if (document.getElementById(\"text\")) {\n            document.getElementById(\"text\").value = this.props.text || \"\";\n        }\n    }\n\n    onKeyPress(event, doGenPreview = false) {\n        if (event.ctrlKey && event.key == \"Enter\") {\n            this.sendMessage();\n            return;\n        }\n        if (![\" \", \"Enter\", \"v\"].includes(event.key)) {\n            return;\n        }\n        if (doGenPreview) {\n            this.genPreview(event.currentTarget);\n        }\n    }\n\n    genPreview(t) {\n        t.style.height = \"1px\";\n        t.style.height = (25 + t.scrollHeight) + \"px\";\n        // waiting for the dom to be updated\n        setTimeout(() => {\n            const text = t.value;\n            let links = text.match(/(https?:\\/\\/[^\\s]+)/gi);\n            if (links && links[0] != this.state.link) {\n                cache.get(\"/api/links/by_url?url=\" + encodeURIComponent(links[0])).then(r => {\n                    if (r && t.value.indexOf(links[0]) >= 0) {\n                        this.setState({link: links[0], preview: r});\n                    }\n                });\n            }\n        }, 0);\n    }\n\n    // toggle state (removed or not) of a file\n    toggleFile(fileIndex) {\n        let files = this.state.files;\n        let f = files.find(f => f.fileIndex == fileIndex);\n        f.removed = f.removed ? false : true;\n        this.setState({files: files});\n    }\n\n    sendMessage() {\n        if (this.props.messageId) {\n            this.putMessage();\n        } else {\n            this.postMessage();\n        }\n    }\n\n    putMessage() {\n        let msg = {\n            files: this.state.files.filter(e => !e.removed).map(e => e[\"id\"]).filter(e => !!e),\n            data: {\n                text: document.getElementById(\"text\").value\n            },\n        };\n        if (document.getElementById(\"title\")) {\n            msg.data.title = document.getElementById(\"title\").value || \"\";\n        }\n        http.put(\"/api/messages/\" + this.props.messageId, msg).then(res => {\n            this.setState({sending: false});\n            if (!res) {\n                alert.add(lang.t(\"error_new_message\"), \"alert-danger\");\n                return;\n            }\n            window.dispatchEvent(new CustomEvent(\"editMessage\", {detail : res}));\n        });\n        this.setState({sending: true});\n    }\n\n    postMessage() {\n        let msg = {\n            createdAt: Math.floor(Date.now()/1000),\n            author: me.me[\"id\"],\n            group: util.getId(this.props.group),\n            children: [],\n            files: this.state.files.filter(e => !e.removed).map(e => e[\"id\"]).filter(e => !!e),\n            data: {\n                text: document.getElementById(\"text\").value\n            },\n            lastActivityDate: Math.floor(Date.now()/1000)\n        };\n        if (this.props.parent) {\n            msg.parent = util.getId(this.props.parent);\n        }\n        if (document.getElementById(\"title\")) {\n            msg.data.title = document.getElementById(\"title\").value || \"\";\n        }\n        // don't post if there is nothing to post\n        if (!msg.files.length && !msg.data.text && !msg.data.title) {\n            alert.add(lang.t(\"empty_message\"), \"alert-danger\");\n            return;\n        }\n        http.post(\"/api/messages\", msg).then(res => {\n            if (!res) {\n                alert.add(lang.t(\"error_new_message\"), \"alert-danger\");\n                this.setState({sending: false});\n                return;\n            }\n            if (this.props.isChild) {\n                cache.remove(\"/api/messages/\" + this.props.parent)\n                window.dispatchEvent(new CustomEvent(\"newChild\", {detail : res}));\n            } else {\n                cache.remove(this.props.group)\n                router.navigate(router.backUrl || msg.group.slice(4));\n                window.dispatchEvent(new CustomEvent(\"newMessage\", {detail : res}));\n            }\n            this.setState({\n                sending: false,\n                files: [],\n                link: null,\n                preview: null,\n                writerId: +Date.now(),\n            });\n            if (document.getElementById(\"text\")) {\n                document.getElementById(\"text\").value = \"\";\n            }\n        });\n        this.setState({sending: true});\n    }\n\n    inputImages(event) {\n        const input = document.createElement(\"input\");\n        document.body.appendChild(input);\n        input.style.display = \"none\";\n        input.type = \"file\";\n        input.multiple = \"multiple\";\n        input.accept = \"image/*\";\n        input.addEventListener(\"change\", event => {\n            let list = Array.from(event.target.files);\n            let files = this.state.files;\n            this.setState({files: [...files, ...Array.apply(null, Array(list.length)).map(_ => new Object({\n                fileIndex: 1000,\n            }))]});\n            this.uploadNextImage(list, list[Symbol.iterator](), files.length);\n        });\n        input.click();\n    }\n\n    inputVideo(event) {\n        const input = document.createElement(\"input\");\n        document.body.appendChild(input);\n        input.style.display = \"none\";\n        input.type = \"file\";\n        input.accept = \"video/*\";\n        input.addEventListener(\"change\", event => {\n            let files = this.state.files;\n            let placeholderIndex = Date.now();\n            this.setState({files: [...files, {\n                fileIndex: placeholderIndex,\n                type: \"video\",\n                progress: 0,\n            }]});\n            this.uploadFile(event.target.files[0], files.length, placeholderIndex);\n        });\n        input.click();\n    }\n\n    uploadNextImage(list, it, n) {\n        let e = null;\n        try {\n            if (!it) {\n                return;\n            }\n            e = it.next();\n            if (!e || !e.value) {\n                return;\n            }\n            let fileSize = e.value.size;\n        } catch (evt) {\n            // this is a fix for firefox mobile\n            // firefox mobile only gets one file on \"input multiple\" and throws on getting the size\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1456557\n            alert.add(lang.t(\"multiple_photos_upload\"), \"alert-danger\");\n            return;\n        }\n        import(\"/lazy/image-service.js\").then(imageService => {\n            imageService.default.handleImage(\n                e.value,\n                res => this.uploadFile(\n                    res,\n                    n + list.indexOf(e.value),\n                    null,\n                    () => this.uploadNextImage(list, it, n)\n                )\n            );\n        });\n    }\n\n    uploadFile(file, fileIndex, placeholderIndex, callback = null) {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        formData.append(\"fileIndex\", fileIndex);\n        let progressFn = placeholderIndex ? e => {\n            if (Array.isArray(this.state.files)) {\n                let a = this.state.files;\n                file = a.find(f => f.fileIndex == placeholderIndex)\n                if (file) {\n                    file.progress = Math.floor(e.loaded/e.total*100);\n                    a.splice(fileIndex, 1, file);\n                    this.setState({files: a})\n                }\n            }\n        } : null;\n        // update state only if it's the good writeId\n        let writerId = this.state.writerId;\n        http.sendFile(formData, file => {\n            if (writerId != this.state.writerId) {\n                return;\n            }\n            let a = this.state.files;\n            if (!file) {\n                alert.add(lang.t(\"error_upload\"), \"alert-danger\");\n            } else {\n                a.splice(fileIndex, 1, file);\n            }\n            this.setState({files: a})\n            if (callback) {\n                callback();\n            }\n        }, progressFn, e => {\n            console.warn(e);\n            alert.add(lang.t(\"error_upload\"), \"alert-danger\");\n            let a = this.state.files;\n            a.splice(fileIndex, 1, {fileIndex: fileIndex, error: e});\n            this.setState({files: a})\n        });\n    }\n\n    render() {\n        if (this.state.sending) {\n            return (\n                <div class=\"message-placeholder\">\n                    <div class=\"spinner orange-spinner\"><div></div><div></div><div></div><div></div><div></div></div>\n                </div>\n            );\n        }\n        return (\n            <div class=\"writer\">\n                { !this.props.isChild && (\n                    <input\n                        type=\"text\" id=\"title\"\n                        onKeyPress={e => this.onKeyPress(e)}\n                        placeholder={lang.t(\"title_placeholder\")}\n                    ></input>\n                )}\n                <textarea\n                    onKeyPress={e => this.onKeyPress(e, true)}\n                    id=\"text\"\n                    rows=\"5\"\n                    autocomplete=\"off\"\n                    autofocus={this.props.focus}\n                    placeholder={lang.t(\"text_placeholder\")}\n                ></textarea>\n                { this.state.preview && <EmbedBlock inWriter={true} {...this.state.preview} /> }\n                { !!this.state.files.length && (\n                    <FileGrid\n                        key={this.state.files.reduce((a,c) => a + c.id + c.fileIndex + c.error, \"\")}\n                        files={this.state.files}\n                        toggleFile={this.toggleFile}\n                        inWriter={true}\n                    />\n                )}\n                <div class=\"options\">\n                    <button\n                        class=\"option\"\n                        onClick={e => this.inputImages(e)}\n                        title={lang.t(\"upload_image\")}\n                    >\n                        <FaIcon family={\"regular\"} icon={\"images\"}/>\n                    </button>\n                        <button\n                            class=\"option\"\n                            onClick={e => this.inputVideo(e)}\n                            title={lang.t(\"upload_video\")}\n                        >\n                            <FaIcon family={\"solid\"} icon={\"film\"}/>\n                        </button>\n                    <div class=\"actions\">\n                        { this.props.cancel && (\n                            <button class=\"cancel\" onClick={e => this.props.cancel(e)}>\n                                {lang.t(\"cancel\")}\n                            </button>\n                        )}\n                        <button\n                            disabled={!this.props.group}\n                            type=\"submit\"\n                            class=\"submit\"\n                            onClick={e => this.sendMessage(e)}\n                        >\n                            {lang.t(\"submit\")}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import { Fragment, h, render, Component } from \"preact\";\nimport { lang, cache, http, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\nimport MessageHead from \"./message-head.component.js\";\nimport MessageFooter from \"./message-footer.component.js\";\nimport MessageBody from \"./message-body.component.js\";\nimport MessageChildren from \"./message-children.component.js\";\nimport Writer from \"./writer.component.js\";\n\nexport default class MessageChild extends Component {\n\n    constructor(props) {\n        super(props);\n        this.loadMessage = this.loadMessage.bind(this);\n        this.deleteMessage = this.deleteMessage.bind(this);\n        this.editMessage = this.editMessage.bind(this);\n        this.shareMessage = this.shareMessage.bind(this);\n        this.cancelEdit = this.cancelEdit.bind(this);\n        this.onEditMessage = this.onEditMessage.bind(this);\n        this.processEmbed = this.processEmbed.bind(this);\n        this.publishInGroup = this.publishInGroup.bind(this);\n\n        window.addEventListener(\"editMessage\", this.onEditMessage);\n\n        let url = router.entityUrl;\n        if (!url && props.message) {\n            url = \"/api/message/\" + props.message.id;\n        }\n\n        this.state = {url: url, preview: null};\n    }\n\n    loadMessage(msg) {\n        me.removeMatchingNotifications(msg.id);\n        this.setState({\n            message: msg,\n            author: msg.author,\n            displayedChildren: msg.children && 5, // display 5 first children\n        });\n        setTimeout(this.processEmbed);\n    }\n\n    cancelEdit(event) {\n        event.preventDefault();\n        this.setState({edit: false});\n    }\n\n    deleteMessage(event) {\n        event.preventDefault();\n        if(confirm(lang.t(\"ask_delete_message\"))) {\n            http.delete(\"/api/messages/\" + this.state.message[\"id\"]);\n            cache.resetCache();\n            // give some time to the cache to delete itself properly\n            setTimeout(() => this.setState({isRemoved: true}), 100);\n        }\n    }\n\n    publishInGroup() {\n        http.put(\"/api/messages/\" + this.state.message.id, {\n            lastActivityDate: Math.floor(Date.now()/1000),\n            isInFront: true\n        }).then(res => {\n            if (!res) {\n                alert.add(lang.t(\"error\"), \"alert-danger\");\n                return;\n            }\n            router.navigate(\"/groups/\" + this.state.message.group.id);\n        });\n    }\n\n    shareMessage(event) {\n        event.preventDefault();\n        router.navigate(\"/share?message=\" + this.state.message.id);\n    }\n\n    editMessage(event) {\n        event.preventDefault();\n        this.setState({edit: true});\n    }\n\n    onEditMessage(event) {\n        if (event.detail.id == this.state.message.id) {\n            this.props.key = +Date.now();\n            let msg = this.state.message;\n            msg.data = event.detail.data;\n            msg.files = event.detail.files;\n            this.setState({\n                message: msg,\n                data: msg.data,\n                gotPreview: false,\n            });\n            setTimeout(_ => this.setState({edit: false}));\n        }\n    }\n\n    displayWriter(isChild) {\n        return (\n            <Writer\n                cancel={this.state.edit ? this.cancelEdit : null}\n                files={this.state.edit ? this.state.message.files : []}\n                focus={!!this.state.edit}\n                group={this.state.message.group}\n                messageId={this.state.edit ? this.state.message.id : null}\n                parent={this.state.edit ? this.state.message[\"parent\"] : this.state.message.id}\n                text={this.state.edit ? this.state.message.data[\"text\"] : \"\"}\n                title={this.state.edit ? this.state.message.data[\"title\"] : \"\"}\n                isChild={isChild}\n            />\n        );\n    }\n\n    componentDidMount() {\n        if (this.props.message) {\n            this.loadMessage(this.props.message);\n        } else {\n            cache.get(url).then(msg => this.loadMessage(msg));\n        }\n        setTimeout(() => window.scrollTo(0, 0));\n    }\n\n    processEmbed() {\n        if (this.state.message && this.state.message.data) {\n            let previewUrl = util.getUrl(this.state.message.data[\"text\"]);\n            if (previewUrl) {\n                cache.get(\"/api/links/by_url?url=\" + encodeURIComponent(previewUrl[0])).then(r => {\n                    this.setState({preview: r, gotPreview: true});\n                });\n            } else {\n                this.setState({gotPreview: true});\n            }\n        }\n    }\n\n    componentWillUpdate() {\n        if (!this.state.gotPreview) {\n            this.processEmbed();\n        }\n        if (this.state.message) {\n            let msgElement = document.getElementById(this.state.message.id);\n            if (this.state.message.id == router.action && msgElement.classList.contains('highlight')) {\n                setTimeout(_ => {\n                    msgElement.scrollIntoView({block: \"start\", behavior: \"smooth\"});\n                    setTimeout(_ => msgElement.classList.remove('highlight'), 1000);\n                }, 1000);\n            }\n        }\n    }\n\n    render() {\n        if (this.props.hidden || !this.state.message || this.state.isRemoved) {\n            return;\n        }\n        return (\n            <div>\n                <div\n                    id={this.state.message && this.state.message.id}\n                    className={\"message child\" + (this.state.message.id == router.action ? \" highlight\" : \"\")}\n                >\n                    { this.state.edit && me.me && (\n                        <div class=\"message-head p-1 d-none d-md-block\">\n                            <img\n                                class=\"rounded-circle w-3 material-shadow avatar\"\n                                src={ me.me.avatar ? util.crop(me.me.avatar[\"id\"], 100, 100) : util.defaultAvatar }\n                            />\n                        </div>\n                    )}\n                    { this.state.edit && this.displayWriter(true) }\n                    { !this.state.edit && (\n                        <Fragment>\n                            <MessageHead\n                                author={this.state.author}\n                                message={this.state.message}\n                                isPublic={this.props.isPublic}\n                                isChild={true}\n                            />\n                            <div class=\"main\">\n                                <MessageBody\n                                    message={this.state.message}\n                                    isPublic={this.props.isPublic}\n                                    isChild={true}\n                                />\n                                <MessageFooter\n                                    author={this.state.author}\n                                    message={this.state.message}\n                                    editMessage={this.editMessage}\n                                    deleteMessage={this.deleteMessage}\n                                    shareMessage={this.shareMessage}\n                                    publishInGroup={this.publishInGroup}\n                                    isPublic={this.props.isPublic}\n                                    isChild={true}\n                                />\n                            </div>\n                        </Fragment>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n","import { h, render, Component, toChildArray } from \"preact\";\nimport { lang } from \"/core\";\nimport MessageChild from \"./message-child.component.js\";\n\nexport default class MessageChildren extends Component {\n    render() {\n        if (!this.props.children || (this.props.lastDisplayedChild - this.props.firstDisplayedChild) < 1) {\n            return null;\n        }\n        return  (\n            <div>\n                { this.props.firstDisplayedChild > 0 && (\n                    <div class=\"d-flex\">\n                        <a\n                            class=\"more-coms unselectable\"\n                            onClick={e => this.props.displayPreviousChildren(e)}\n                        >\n                            {lang.t(\"previous_coms\")}\n                        </a>\n                    </div>\n                )}\n                { toChildArray(this.props.children).map((e,i,m) => {\n                    // bypass empty messages\n                    if (!e.files.length && e.data[\"text\"] == \"\" && !e.children.length) {\n                        return null;\n                    }\n\n                    return (\n                        <MessageChild\n                            message={e}\n                            key={e.id}\n                            hidden={i < this.props.firstDisplayedChild || i > this.props.lastDisplayedChild}\n                            isPublic={this.props.isPublic}\n                        />\n                    );\n                })}\n                { this.props.lastDisplayedChild < toChildArray(this.props.children).length && (\n                    <div class=\"d-flex\">\n                        <a\n                            class=\"more-coms unselectable\"\n                            onClick={e => this.props.displayNextChildren(e)}\n                        >\n                            {lang.t(\"next_coms\")}\n                        </a>\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, cache, http, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\nimport MessageHead from \"./message-head.component.js\";\nimport MessageFooter from \"./message-footer.component.js\";\nimport MessageBody from \"./message-body.component.js\";\nimport MessageChildren from \"./message-children.component.js\";\nimport Writer from \"./writer.component.js\";\n\nexport default class MessageParent extends Component {\n\n    constructor(props) {\n        super(props);\n        this.loadMessage = this.loadMessage.bind(this);\n        this.deleteMessage = this.deleteMessage.bind(this);\n        this.editMessage = this.editMessage.bind(this);\n        this.shareMessage = this.shareMessage.bind(this);\n        this.openPublicLink = this.openPublicLink.bind(this);\n        this.cancelEdit = this.cancelEdit.bind(this);\n        this.onNewChild = this.onNewChild.bind(this);\n        this.onEditMessage = this.onEditMessage.bind(this);\n        this.processEmbed = this.processEmbed.bind(this);\n        this.publishInGroup = this.publishInGroup.bind(this);\n\n        window.addEventListener(\"newChild\", this.onNewChild);\n\n        window.addEventListener(\"editMessage\", this.onEditMessage);\n        let url = router.entityUrl;\n        if (!url && props.message) {\n            url = \"/api/message/\" + props.message.id;\n        }\n\n        this.state = {url: url};\n\n        if (props.message) {\n            this.loadMessage(props.message);\n        } else {\n            cache.get(url).then(msg => this.loadMessage(msg));\n        }\n    }\n\n    publishInGroup() {\n        http.put(\"/api/messages/\" + this.state.message.id, {\n            lastActivityDate: Math.floor(Date.now()/1000),\n            isInFront: true,\n        }).then(res => {\n            if (!res) {\n                alert.add(lang.t(\"error\"), \"alert-danger\");\n                return;\n            }\n            router.navigate(\"/groups/\" + this.state.message.group.id);\n        });\n    }\n\n    loadMessage(msg) {\n        me.removeMatchingNotifications(msg.id);\n        let firstDisplayedChild = null;\n        let lastDisplayedChild = null;\n        if (msg.children.length) {\n            let msgIndex = router.action ? msg.children.findIndex(e => e && e.id === router.action) : -1;\n            if (msgIndex != -1) {\n                firstDisplayedChild = Math.max(0, msgIndex - 1);\n                lastDisplayedChild = Math.min(msg.children.length, msgIndex + 1);\n            } else {\n                firstDisplayedChild = msg.children && msg.children.length - 5; // display the last 5 children\n                lastDisplayedChild = msg.children && msg.children.length;\n            }\n        }\n        this.setState({\n            message: msg,\n            author: msg.author,\n            firstDisplayedChild: firstDisplayedChild,\n            lastDisplayedChild: lastDisplayedChild,\n        });\n        setTimeout(this.processEmbed);\n    }\n\n    processEmbed() {\n        if (this.state.message && this.state.message.data) {\n            let previewUrl = util.getUrl(this.state.message.data[\"text\"]);\n            if (previewUrl) {\n                cache.get(\"/api/links/by_url?url=\" + encodeURIComponent(previewUrl[0])).then(r => {\n                    this.setState({preview: r, gotPreview: true});\n                });\n            } else {\n                this.setState({gotPreview: true});\n            }\n        }\n    }\n\n    componentWillUpdate() {\n        if (!this.state.gotPreview) {\n            this.processEmbed();\n        }\n    }\n\n    cancelEdit(event) {\n        event.preventDefault();\n        this.setState({edit: false});\n    }\n\n    async openPublicLink(event) {\n        event.preventDefault();\n        let newTab = window.open(\"about:blank\", \"_blank\");\n        const res = await http.get(\"/api/messages/\" + this.state.message[\"id\"] + \"/get-public-link\");\n        newTab.location = window.origin + \"/public/\" + res.token;\n    };\n\n    deleteMessage(event) {\n        event.preventDefault();\n        if(confirm(lang.t(\"ask_delete_message\"))) {\n            http.delete(\"/api/messages/\" + this.state.message[\"id\"]);\n            cache.resetCache();\n            // give some time to the cache to delete itself properly\n            setTimeout(() => {\n                router.navigate(\"/groups/\" + this.state.message.group.id, {data: {resetGroupDisplay: true}});\n            }, 100);\n        }\n    }\n\n    shareMessage(event) {\n        event.preventDefault();\n        router.navigate(\"/share?message=\" + this.state.message.id);\n    }\n\n    editMessage(event) {\n        event.preventDefault();\n        this.setState({edit: true});\n    }\n\n    onEditMessage(event) {\n        if (event.detail.id == this.state.message.id) {\n            this.props.key = +Date.now();\n            let msg = this.state.message;\n            msg.data = event.detail.data;\n            msg.files = event.detail.files;\n            this.setState({\n                message: msg,\n                data: msg.data,\n            });\n            setTimeout(_ => this.setState({edit: false}));\n        }\n    }\n\n    onNewChild(event) {\n        const newMsg = event.detail;\n        let msg = this.state.message;\n        if (newMsg.parent && util.getId(newMsg.parent) == msg[\"id\"]) {\n            newMsg.author = me.me;\n            msg.children = [...msg.children, newMsg];\n            this.setState(prevState => ({\n                lastDisplayedChild: prevState.lastDisplayedChild + 1,\n                message: msg,\n            }));\n        }\n    }\n\n    displayWriter(isChild, focus = false) {\n        return (\n            <Writer\n                cancel={this.state.edit ? this.cancelEdit : null}\n                files={this.state.edit ? this.state.message.files : []}\n                focus={focus || !!this.state.edit}\n                group={this.state.message.group}\n                messageId={this.state.edit ? this.state.message.id : null}\n                parent={this.state.edit ? this.state.message[\"parent\"] : this.state.message.id}\n                text={this.state.edit ? this.state.message.data[\"text\"] : \"\"}\n                title={this.state.edit ? this.state.message.data[\"title\"] : \"\"}\n                isChild={isChild}\n            />\n        );\n    }\n\n    componentDidMount() {\n        setTimeout(() => window.scrollTo(0, 0));\n    }\n\n    render() {\n        if (this.props.hidden || !this.state.message || this.state.isRemoved) {\n            return;\n        }\n        return (\n            <div>\n                <div class=\"message\" >\n                    { this.state.edit && this.displayWriter(false) }\n                    { !this.state.edit && (\n                        <div>\n                            <MessageHead\n                                author={this.state.author}\n                                message={this.state.message}\n                                isPublic={this.props.isPublic}\n                                isChild={false}\n                            />\n                            <MessageBody\n                                message={this.state.message}\n                                isPublic={this.props.isPublic}\n                                isChild={false}\n                            />\n                        </div>\n                    )}\n                    { !this.state.edit && (\n                        <MessageFooter\n                            author={this.state.author}\n                            message={this.state.message}\n                            editMessage={this.editMessage}\n                            deleteMessage={this.deleteMessage}\n                            openPublicLink={this.openPublicLink}\n                            publishInGroup={this.publishInGroup}\n                            shareMessage={this.shareMessage}\n                            isPublic={this.props.isPublic}\n                        />\n                    )}\n                </div>\n                <MessageChildren\n                    children={this.state.message.children}\n                    firstDisplayedChild={this.state.firstDisplayedChild}\n                    lastDisplayedChild={this.state.lastDisplayedChild}\n                    displayPreviousChildren={_ => this.setState(prevState => ({\n                        firstDisplayedChild: Math.max(0, prevState.firstDisplayedChild - 10)\n                    }))}\n                    displayNextChildren={_ => this.setState(prevState => ({\n                        lastDisplayedChild: Math.min(this.state.message.children, prevState.lastDisplayedChild + 10)\n                    }))}\n                    isPublic={this.props.isPublic}\n                    key={this.state.message.id}\n                />\n                { !this.state.edit && !this.props.isPublic && (\n                    <div class=\"message child\">\n                        { me.me && (\n                            <div class=\"message-head p-1 d-none d-md-block\">\n                                <img\n                                    class=\"rounded-circle w-3 material-shadow avatar\"\n                                    src={ me.me.avatar ? util.crop(me.me.avatar[\"id\"], 100, 100) : util.defaultAvatar }\n                                />\n                            </div>\n                        )}\n                        { this.displayWriter(true, this.props.focus) }\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessagePreview extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            message: props.message,\n        };\n    }\n\n    componentDidMount() {\n        if (this.state.message && this.state.message.author) {\n            cache.get(\"/api/users/\" + this.state.message.author).then(author => author && this.setState({author: author}));\n        }\n    }\n\n    getAvatar(user) {\n        return (\n            <img\n                title={user ? user.name : \"\"}\n                className={\"avatar material-shadow\" + (user ? \"\" : \" removed-user\")}\n                src={user && user.avatar ? util.crop(user.avatar[\"id\"], 100, 100) : util.defaultAvatar}\n                onError={e => e.currentTarget.src = util.defaultAvatar}\n            />\n        );\n    }\n\n    render() {\n        if (!this.state.message) {\n            return null;\n        }\n        return (\n            <a\n                class=\"d-inline-block seamless-link message-preview unselectable\"\n                href={router.toApp(\"/messages/\" + this.state.message.id)}\n                onClick={e => router.onClick(e)}\n                title={this.state.message.data[\"title\"]}\n            >\n                <div tabindex={this.props.tabindex} class=\"card material-shadow\">\n                    { this.getAvatar(this.state.author) }\n                    { this.state.message.preview ?\n                            <div class=\"card-miniature\" style={\"background-image: url('\" + util.crop(this.state.message.preview, 320, 180) + \"')\" } />\n                            : <div class=\"text-preview\">{this.state.message.data[\"text\"]}</div>\n                    }\n                    <div class=\"card-body border-top d-flex justify-content-between\">\n                        <span class=\"left-buffer\"></span>\n                        <span class=\"title\" title={this.state.message.data[\"title\"] || util.humanFullDate(this.state.message.lastActivityDate)}>\n                            { this.state.message.data[\"title\"] || util.humanTime(this.state.message.lastActivityDate) }\n                        </span>\n                        <span class=\"children\">\n                            { !!this.state.message.children && (\n                                <span>\n                                    { this.state.message.children + \" \" }\n                                    <FaIcon family={me.isNew(this.state.message.id) ? \"solid\" : \"regular\"} icon={\"comment\"} />\n                                </span>\n                            )}\n                        </span>\n                    </div>\n                </div>\n            </a>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessageSearchResult extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            message: props.message,\n            title: props.message.data[\"title\"] || \"\",\n            text: props.message.data[\"text\"] || \"\",\n            preview: props.message[\"preview\"] || null,\n        };\n        this.getMiniature = this.getMiniature.bind(this);\n        this.getLink = this.getLink.bind(this);\n        this.displayMessageTitle = this.displayMessageTitle.bind(this);\n        this.displayMessageText = this.displayMessageText.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.message.author) {\n            cache.get(\"/api/users/\" + this.props.message.author).then(author => author && this.setState({author: author}));\n        }\n    }\n\n    displayMessageTitle() {\n        if (!this.props.message.data || !this.props.message.data[\"title\"]) {\n            return {__html: util.humanTime(this.props.message.lastActivityDate)};\n        }\n        // escape html a little (just enough to avoid xss I hope)\n        let title = this.props.message.data[\"title\"].replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").trim();\n\n        // make the search terms stand out\n        let words = title.split(\" \");\n        for (let j = 0; j < words.length; j++) {\n            if (!words[j].match(util.urlRegExp)) {\n                let searchTerms = this.props.search.split(\" \");\n                for(let k = 0; k < searchTerms.length; k++) {\n                    words[j] = words[j].replace(new RegExp(searchTerms[k], \"gi\"), \"<b>$&</b>\");\n                }\n            }\n        }\n        title = words.join(\" \");\n        return {__html: title};\n    }\n\n    displayMessageText() {\n        if (!this.props.message.data || !this.props.message.data[\"text\"]) {\n            return \"\";\n        }\n\n        // escape html a little (just enough to avoid xss I hope)\n        let txt = this.props.message.data[\"text\"].replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").trim();\n\n        // make the search terms stand out for not url words\n        let lines = txt.split(\"\\n\");\n        for(let i = 0; i < lines.length; i++) {\n            let words = lines[i].split(\" \");\n            for (let j = 0; j < words.length; j++) {\n                if (!words[j].match(util.urlRegExp)) {\n                    let searchTerms = this.props.search.split(\" \");\n                    for(let k = 0; k < searchTerms.length; k++) {\n                        if (!searchTerms[k]) {\n                            continue;\n                        }\n                        words[j] = words[j].replace(new RegExp(searchTerms[k], \"gi\"), \"<b>$&</b>\");\n                    }\n                    let hashtags = this.props.hashtags.split(\" \");\n                    for(let k = 0; k < hashtags.length; k++) {\n                        if (!hashtags[k]) {\n                            continue;\n                        }\n                        words[j] = words[j].replace(new RegExp('#' + hashtags[k], \"gi\"), \"<b>$&</b>\");\n                    }\n                }\n            }\n            lines[i] = words.join(\" \");\n        }\n        txt = lines.join(\"\\n\"); \n\n        // replace url by real links\n        let shift = 0;\n        let match = null;\n        while (match = util.getUrl(txt.slice(shift))) {\n            let url = match[0];\n            if (url.length >= 50) {\n                url = url.slice(0, 25) + \"...\" + url.slice(-24);\n            }\n            let searchTerms = this.props.search.split(\" \");\n            for(let i = 0; i < searchTerms.length; i++) {\n                url = url.replace(new RegExp(searchTerms[i], \"gi\"), \"<b>$&</b>\");\n            }\n            let link = '<a href=\"' + match[0] + '\" target=\"_blank\">' + url + '</a>';\n            txt = txt.slice(0, match[\"index\"] + shift) + link + txt.slice(match[\"index\"] + shift + match[0].length);\n            shift += match[\"index\"] + link.length;\n        }\n\n        // replace line returns\n        txt = txt.replace(/\\n/g, '<br/>');\n\n        return {__html: txt};\n    }\n\n    getMiniature() {\n        if (this.state.preview) {\n            return (\n                <div\n                    class=\"card-miniature\"\n                    style={\"background-image: url('\" + util.crop(this.state.preview, 100, 100) + \"')\"}\n                />\n            );\n        }\n        let avatar = util.defaultAvatar;\n        if (this.state.author && this.state.author.avatar && this.state.author.avatar.id) {\n            avatar = util.crop(this.state.author.avatar[\"id\"], 100, 100);\n        }\n        return (\n            <div\n                class=\"card-miniature\"\n                style={\"background-image: url('\" + avatar + \"')\"}\n            />\n        );\n    }\n\n    getLink() {\n        if (this.state.message.parent && this.state.message.children == 0) {\n            return \"/messages/\" + this.state.message.parent + \"/\" + this.state.message.id;\n        }\n        return \"/messages/\" + this.state.message.id;\n    }\n\n    render() {\n        return (\n            <a\n                class=\"d-inline-block seamless-link message-preview unselectable\"\n                href={router.toApp(this.getLink())}\n                onClick={e => router.onClick(e)}\n                title={this.state.title}\n            >\n                <div tabindex={this.props.tabindex} class=\"card material-shadow\">\n                    <div class=\"card-body border-top\">\n                        { this.getMiniature() }\n                        <div class=\"infos\">\n                            <div class=\"title\">\n                                { this.state.author ? this.state.author.name : \"--\" }\n                            </div>\n                            <div class=\"dot\">&bull;</div>\n                            <div\n                                class=\"title\"\n                                title={ this.state.title || util.humanFullDate(this.state.message.lastActivityDate)}\n                                dangerouslySetInnerHTML={this.displayMessageTitle()}\n                            >\n                            </div>\n                        </div>\n                        <div class=\"text\">\n                            { this.state.text.trim() && (\n                                <p class=\"card-text\" dangerouslySetInnerHTML={this.displayMessageText()}></p>\n                            )}\n                        </div>\n                        <div class=\"children\">\n                            { !!this.state.message.children && (\n                                <span>\n                                    { this.state.message.children + \" \" }\n                                    <FaIcon family={me.isNew(this.state.message.id) ? \"solid\" : \"regular\"} icon={\"comment\"} />\n                                </span>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </a>\n        );\n    }\n}\n","import _FileGrid from \"./file-grid.component.js\";\nimport _MessageParent from \"./message-parent.component.js\";\nimport _MessageChild from \"./message-child.component.js\";\nimport _MessageBody from \"./message-body.component.js\";\nimport _MessageChildren from \"./message-children.component.js\";\nimport _MessageHead from \"./message-head.component.js\";\nimport _MessageFooter from \"./message-footer.component.js\";\nimport _MessagePreview from \"./message-preview.component.js\";\nimport _MessageSearchResult from \"./message-search-result.component.js\";\nimport _EmbedBlock from \"./embed-block.component.js\";\n\nexport const FileGrid = _FileGrid;\nexport const MessageBody = _MessageBody;\nexport const MessageFooter = _MessageFooter;\nexport const MessageParent = _MessageParent;\nexport const MessageChild = _MessageChild;\nexport const MessageChildren = _MessageChildren;\nexport const MessageHead = _MessageHead;\nexport const MessagePreview = _MessagePreview;\nexport const MessageSearchResult = _MessageSearchResult;\nexport const EmbedBlock = _EmbedBlock;\n","import { h, render, Component } from \"preact\";\nimport { lang, http, router } from \"/core\";\n\nexport default class CreateGroup extends Component {\n\n    constructor() {\n        super();\n        this.postNewGroup = this.postNewGroup.bind(this);\n    }\n\n    postNewGroup(event) {\n        event.preventDefault();\n        const name = document.querySelector(\"#create_group_form input[name='name']\").value;\n        let group = {};\n        if (name) {\n            group.name = name;\n        } else {\n            return false;\n        }\n        group.createdAt = Math.floor(Date.now()/1000);\n        http.post(\"/api/groups\", group).then(res => {\n            http.post(\"/api/groups/invitation/\" + res.secretKey, {}).then(res => {\n                window.location = \"/groups/\" + res.id;\n            });\n        });\n    }\n\n    render() {\n        return (\n            <div class=\"container mt-2\">\n                <div class=\"group-settings\">\n                    <div class=\"card\">\n                        <div class=\"card-body\">\n                            <div class=\"container-fluid p-1\">\n                                <div class=\"row\">\n                                    <div class=\"col-12 col-md-10\">\n                                        <form id=\"create_group_form\" class=\"mb-1\">\n                                            <div class=\"form-group\">\n                                                <label for=\"name\">{lang.t(\"name\")}: </label>\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"name\"\n                                                    minlength=\"1\"\n                                                    maxlength=\"128\"\n                                                    placeholder={lang.t(\"name_input\")}\n                                                    class=\"form-control\"\n                                                    required\n                                                ></input>\n                                            </div>\n                                            <button\n                                                onClick={e => this.postNewGroup(e)}\n                                                class=\"btn btn-primary\"\n                                            >\n                                                {lang.t(\"create_the_group\")}\n                                            </button>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, me, router, util, http } from \"/core\";\nimport { MessageSearchResult } from \"/message\";\n\nexport default class GroupSearch extends Component {\n\n    constructor(props) {\n        super(props);\n        let groupId = util.getId(router.id);\n        let loaded = 1 + Math.floor((window.screen.width * window.screen.height) / (320 * 215));\n        this.state = {\n            groupId: groupId,\n            loaded: loaded,\n            messages: [],\n            totalMessages: 0,\n            search: router.getParam('search').replace(/\\+/g, \" \"),\n            hashtags: router.getParam('hashtags').replace(/\\+/g, \" \"),\n        };\n        this.loadMessages = this.loadMessages.bind(this);\n        window.addEventListener(\"routerStateChange\", _ => this.loadMessages());\n    }\n\n    getGroupName() {\n        if (me.me.groups && router.entity.entityType == \"group\") {\n            let group = me.me.groups.find(g => g[\"id\"] == util.getId(router.entity));\n            return group ? group[\"name\"] : \"\";\n        }\n        return \"\";\n    }\n\n    componentDidMount() {\n        this.loadMessages();\n    }\n\n    loadMessages() {\n        let search = router.getParam('search').replace(/\\+/g, \" \");\n        let hashtags = router.getParam('hashtags').split('+').join(\" \");\n        http.post(\"/api/messages/search\", {\n            group: this.state.groupId,\n            search: search,\n            hashtags: hashtags,\n        }).then(res => {\n            if(res && Array.isArray(res[\"messages\"])) {\n                this.setState({\n                    search: search,\n                    messages: res[\"messages\"],\n                    totalMessages: res[\"totalItems\"],\n                    loaded: res.messages.length,\n                });\n            }\n        });\n    }\n\n    render() {\n        return Array.isArray(this.state.messages) && (\n            <div>\n                <div class=\"group-name\">{this.getGroupName()}</div>\n                <article id=\"group\" class=\"justify-content-center d-flex\">\n                    <div class=\"search-results-container container-fluid d-flex justify-content-center flex-wrap\">\n                        { this.state.messages.slice(0, this.state.loaded).map((msg, i) => {\n                            return (\n                                <MessageSearchResult\n                                    tabindex={i + 1}\n                                    key={msg.id}\n                                    message={msg}\n                                    groupId={this.state.groupId}\n                                    search={this.state.search}\n                                    hashtags={this.state.hashtags}\n                                />\n                            );\n                        })}\n                    </div>\n                </article>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, me, router, util } from \"/core\";\nimport { MessagePreview } from \"/message\";\n\nexport default class GroupBoard extends Component {\n\n    constructor(props) {\n        super(props);\n        let groupId = util.getId(router.id);\n        let loaded = 1 + Math.floor((window.screen.width * window.screen.height) / (320 * 215));\n        this.state = {\n            groupId: groupId,\n            loaded: loaded,\n            messages: [],\n            scrollTop: 0,\n            totalMessages: 0,\n            pageYOffset: 0,\n            page: 0,\n        };\n        this.scroll_cooldown = Date.now();\n        this.onScroll = this.onScroll.bind(this);\n        this.loadMessages = this.loadMessages.bind(this);\n        window.addEventListener(\"resetCache\", this.resetGroupDisplay);\n    }\n\n    componentDidMount() {\n        this.loadMessages(0);\n        window.addEventListener(\"scroll\", this.onScroll);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"scroll\", this.onScroll);\n    }\n\n    getGroupName() {\n        if (me.me.groups && router.entity.entityType == \"group\") {\n            let group = me.me.groups.find(g => g[\"id\"] == util.getId(router.entity));\n            return group ? group[\"name\"] : \"\";\n        }\n        return \"\";\n    }\n\n    loadMessages(page) {\n        cache.get(\"/api/groups/\" + this.state.groupId + \"/page/\" + page).then(res => {\n            if(res && Array.isArray(res[\"messages\"])) {\n                let new_loaded = Math.max(this.state.loaded, page * 30);\n                let msgList = this.state.messages;\n                // don't add already added messages\n                res[\"messages\"].map(m => !msgList.find(msg => msg.id == m.id) && msgList.push(m));\n                this.setState({\n                    messages: msgList,\n                    totalMessages: res[\"totalItems\"],\n                    page: page,\n                    loaded: new_loaded,\n                });\n                if ((page + 1) * 30 < new_loaded) {\n                    setTimeout(() => this.loadMessages(page + 1));\n                }\n            }\n        });\n    }\n\n    onScroll() {\n        // prevent loading messages if we are in a post\n        if (window.getComputedStyle(document.getElementById(\"group\").parentNode).display == \"none\") {\n            return;\n        }\n        // don't load if on cooldown\n        if (this.scroll_cooldown + 100 < Date.now()) {\n            this.scroll_cooldown = Date.now();\n            this.setState({pageYOffset: window.pageYOffset});\n            // don't load if unecessary\n            if (\n                Array.isArray(this.state.messages)\n                && document.body.scrollHeight - window.screen.height - 500 < window.pageYOffset\n                && this.state.loaded < this.state.totalMessages\n            ) {\n                this.setState(prevState => ({loaded: prevState.loaded + 10}));\n                if (this.state.loaded + 30 > this.state.messages.length) {\n                    this.loadMessages(this.state.page + 1);\n                    // update page count right away\n                    this.setState(prevState => ({page: prevState.page + 1}));\n                }\n            }\n        }\n    }\n\n    render() {\n        return Array.isArray(this.state.messages) && (\n            <div>\n                <div class=\"group-name\">{ this.getGroupName() }</div>\n                <article id=\"group\" class=\"justify-content-center d-flex\">\n                    <div class=\"message-container container-fluid d-flex justify-content-center flex-wrap\">\n                        { this.state.messages.slice(0, this.state.loaded).map((msg, i) => {\n                            return (\n                                <MessagePreview\n                                    tabindex={i + 1}\n                                    key={msg.id}\n                                    message={msg}\n                                    groupId={util.getId(router.id)}\n                                />\n                            );\n                        })}\n                    </div>\n                </article>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, router, me, alert, cache, http, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class UserSettings extends Component {\n\n    constructor(props) {\n        super(props);\n        this.destroyAccount = this.destroyAccount.bind(this);\n        this.inputAvatar = this.inputAvatar.bind(this);\n        this.updateSettings = this.updateSettings.bind(this);\n        this.state = Object.assign({}, props);\n    }\n\n    inputAvatar(event) {\n        const input = document.createElement(\"input\");\n        input.type = \"file\";\n        input.accept = \"image/*\";\n        input.addEventListener(\"change\", event => {\n            let img = new Image();\n            img.onload = () => {\n                let w = Math.min(img.naturalWidth, 1024);\n                let h = Math.min(img.naturalHeight, 1024);\n                let g = Math.min(w/img.naturalWidth, h/img.naturalHeight);\n                let nw = Math.floor(img.naturalWidth*g);\n                let nh = Math.floor(img.naturalHeight*g);\n                import(\"/lazy/image-service.js\").then(imageService => {\n                    imageService.default.resize(img, nw, nh, blob => {\n                        const formData = new FormData();\n                        formData.append(\"file\", blob);\n                        http.post(\"/api/files\", formData, false).then(file => {\n                            http.put(\"/api/users/\" + this.state.id, {avatar: file[\"id\"]}).then(res => {\n                                this.setState({avatar: file});\n                                cache.resetCache();\n                                alert.add(lang.t(\"settings_updated\"));\n                            });\n                        });\n                    });\n                });\n            }\n            img.src = URL.createObjectURL(event.target.files[0]);\n        });\n        input.click();\n    }\n\n    destroyAccount(event) {\n        event.preventDefault();\n        let confirmDeletion = confirm(lang.t(\"are_you_sure\"));\n        if (confirmDeletion) {\n            http.delete(\"/api/users/\" + this.state.id).then(res => {\n                router.navigate(\"/logout\");\n            });\n        }\n    }\n\n    updateSettings(event) {\n        event.preventDefault();\n        const name = document.querySelector(\"#settings_form input[name='name']\").value;\n        const login = document.querySelector(\"#settings_form input[name='email']\").value;\n        const password = document.querySelector(\"#settings_form input[name='password']\").value;\n        const notification_emails = document.querySelector(\"#settings_form select[name='notification_emails']\").value;\n        const default_group = document.querySelector(\"#settings_form select[name='default_group']\").value;\n        const lang = document.querySelector(\"#settings_form select[name='lang']\").value;\n        let user = {};\n        if (name) {\n            user.name = name;\n        }\n        if (login) {\n            user.login = login;\n        }\n        if (password) {\n            user.password = password;\n        }\n        user.data = {\"notification_emails\": notification_emails, \"default_group\": default_group, \"lang\": lang};\n        http.put(\"/api/users/\" + this.state.id, user).then(res => {\n            if (res[\"error\"]) {\n                alert.add(res[\"error\"], \"alert-danger\");\n            } else {\n                this.setState(prevState => Object.assign(prevState, res));\n                location.href = router.toApp(location.pathname + \"?alert=settings_updated\");\n            }\n        });\n    }\n\n    render() {\n        return (\n            <div class=\"user-settings\">\n                <div class=\"card\">\n                    <div class=\"identite card-body\">\n                        <div class=\"container-fluid p-1\">\n                            <div class=\"row\">\n                                <div class=\"col-12 col-md-2\">\n                                    <img\n                                        class=\"img-fluid rounded-circle material-shadow avatar\"\n                                        src={this.state.avatar ? util.crop(this.state.avatar[\"id\"], 100, 100) : util.defaultAvatar}\n                                        onError={e => e.currentTarget.src = util.defaultAvatar}\n                                        onClick={e => this.inputAvatar(e)}\n                                    />\n                                </div>\n                                <div class=\"col-12 col-md-10\">\n                                    <form id=\"settings_form\" class=\"mb-3\">\n                                        <div class=\"form-group\">\n                                            <label for=\"name\">{lang.t(\"name\")}: </label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"name\"\n                                                minlength=\"1\"\n                                                maxlength=\"128\"\n                                                placeholder={lang.t(\"name_input\")}\n                                                value={this.state.name}\n                                                class=\"form-control\"\n                                            ></input>\n                                        </div>\n                                        <div class=\"form-group\">\n                                            <label for=\"email\">{lang.t(\"email\")}: </label>\n                                            <input\n                                                type=\"email\"\n                                                name=\"email\"\n                                                placeholder={lang.t(\"email_input\")}\n                                                value={this.state.login}\n                                                class=\"form-control\"\n                                            ></input>\n                                        </div>\n                                        <div class=\"form-group\">\n                                            <label for=\"password\">{lang.t(\"password\")}: </label>\n                                            <input\n                                                type=\"password\"\n                                                name=\"password\"\n                                                autocomplete=\"off\"\n                                                minlength=\"8\"\n                                                maxlength=\"128\"\n                                                placeholder={lang.t(\"password_input\")}\n                                                class=\"form-control\"\n                                            ></input>\n                                        </div>\n                                        <div class=\"form-group\">\n                                            <label for=\"notification_emails\">{ lang.t(\"notification_emails\") }:</label>\n                                            <select\n                                                name=\"notification_emails\"\n                                                class=\"form-control\"\n                                                selectedIndex={\n                                                    [\n                                                        \"none\",\n                                                        \"hourly\",\n                                                        \"daily\",\n                                                        \"weekly\",\n                                                        \"monthly\"\n                                                    ].indexOf(this.state.data[\"notification_emails\"])\n                                                }\n                                            >\n                                                <option value=\"none\">{ lang.t(\"none\") }</option>\n                                                <option value=\"hourly\">{ lang.t(\"hourly\") }</option>\n                                                <option value=\"daily\">{ lang.t(\"daily\") }</option>\n                                                <option value=\"weekly\">{ lang.t(\"weekly\") }</option>\n                                                <option value=\"monthly\">{ lang.t(\"monthly\") }</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"form-group\">\n                                            <label for=\"default_group\">{ lang.t(\"default_group\") }:</label>\n                                            <select name=\"default_group\" class=\"form-control\" value={this.state.data[\"default_group\"]}>\n                                                { me.me.groups.map(e => <option value={e.id}>{e.name}</option>)}\n                                            </select>\n                                        </div>\n                                        <div class=\"form-group\">\n                                            <label class=\"capitalize\" for=\"lang\">{lang.t(\"lang\")}:</label>\n                                            <select name=\"lang\" class=\"form-control\" value={this.state.data[\"lang\"]}>\n                                                { Object.keys(lang.possibleLang).map(k => <option value={k}>{lang.possibleLang[k]}</option>)}\n                                            </select>\n                                        </div>\n                                        <button\n                                            onClick={e => this.updateSettings(e)}\n                                            class=\"btn btn-primary\"\n                                        >\n                                            {lang.t(\"save_changes\")}\n                                        </button>\n                                    </form>\n                                    <form id=\"destroy_form\">\n                                        <label class=\"d-block\" for=\"destroy_account\">{ lang.t(\"destroy_account_explain\") }</label>\n                                        <button\n                                            onClick={e => this.destroyAccount(e)}\n                                            name=\"destroy_account\"\n                                            class=\"btn btn-danger\"\n                                        >\n                                            {lang.t(\"destroy_account\")}\n                                        </button>\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                { this.state.alert && (\n                    <div class=\"global-alert alert alert-success\">\n                        { this.state.alert }\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, alert, cache, http, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class GroupSettings extends Component {\n\n    constructor(props) {\n        super(props);\n        this.updateSettings = this.updateSettings.bind(this);\n        this.leaveGroup = this.leaveGroup.bind(this);\n        this.leave = this.leave.bind(this);\n        this.resetSecretKey = this.resetSecretKey.bind(this);\n        this.state = Object.assign({hydratedUsers: []}, props);\n    }\n\n    resetSecretKey(event) {\n        event.preventDefault();\n        http.post(\"/api/groups/\" + this.state.id + \"/reset-invite-key\", {}).then(res => {\n            alert.add(lang.t(\"group_updated\"));\n            cache.resetCache();\n            this.setState({secretKey: res[\"inviteKey\"]});\n        });\n    }\n\n    updateSettings(event) {\n        event.preventDefault();\n        const name = document.querySelector(\"#settings_form input[name='name']\").value;\n        let group = {};\n        if (name) {\n            group.name = name;\n        }\n        http.put(\"/api/groups/\" + this.state.id, group).then(res => {\n            alert.add(lang.t(\"group_updated\"));\n            cache.resetCache();\n            this.setState(prevState => Object.assign(prevState, res));\n        });\n    }\n\n    leaveGroup(event) {\n        event.preventDefault();\n        if (me.me.data[\"default_group\"] == this.state.id) {\n            let user = {};\n            user.data = {\"default_group\": me.me.groups[0].id};\n            http.put(\"/api/users/\" + me.me.id, user).then(res => {\n                me.update();\n                this.leave();\n            });\n        } else {\n            this.leave();\n        }\n    }\n\n    leave() {\n        http.post(\"/api/groups/\" + this.state.id + \"/leave\", {}).then(res => {\n            if (!res || !res[\"entityType\"]) {\n                alert.add(lang.t(\"error\"), \"alert-danger\");\n            } else {\n                me.update();\n                alert.add(lang.t(\"group_left\"));\n                router.navigate(\"/\");\n            }\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <div class=\"group-settings mb-3\">\n                    <div class=\"card\">\n                        <div class=\"card-body\">\n                            <div class=\"container-fluid p-1\">\n                                <div class=\"row\">\n                                    <div class=\"col-12 col-md-10\">\n                                        <form id=\"settings_form\" class=\"mb-1 border-bottom pb-1\">\n                                            <div class=\"form-group\">\n                                                <label for=\"name\">{lang.t(\"name\")}: </label>\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"name\"\n                                                    minlength=\"1\"\n                                                    maxlength=\"128\"\n                                                    placeholder={lang.t(\"name_input\")}\n                                                    value={this.state.name}\n                                                    class=\"form-control\"\n                                                    required\n                                                ></input>\n                                            </div>\n                                            <button onClick={this.updateSettings} class=\"btn btn-outline-secondary\">{lang.t(\"save_changes\")}</button>\n                                        </form>\n                                        <form class=\"mb-1 border-bottom pb-1\">\n                                            <div class=\"form-group\">\n                                                <label for=\"inviteKey\">{lang.t(\"invitation_link\")}: </label>\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"inviteKey\"\n                                                    value={\n                                                        location.protocol\n                                                            + \"//\" + location.hostname\n                                                            + \"/invitation/\"\n                                                            + this.state.secretKey\n                                                    }\n                                                    class=\"form-control font-size-80\"\n                                                    readonly=\"readonly\"\n                                                ></input>\n                                            </div>\n                                            <button class=\"btn btn-outline-secondary\" onClick={this.resetSecretKey}>\n                                                {lang.t(\"reset_invitation_link\")}\n                                            </button>\n                                        </form>\n                                        <form>\n                                            <button\n                                                onClick={e => this.leaveGroup(e)}\n                                                class=\"btn btn-outline-danger\"\n                                            >\n                                                {lang.t(\"quit_group\")}\n                                            </button>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"user-list mb-3\">\n                    <h3>{lang.t(\"users\")}</h3>\n                    { this.props.users.map(user => user && (\n                        <div class=\"user-card\">\n                            <img\n                                class=\"avatar material-shadow\"\n                                src={user.avatar ? util.crop(user.avatar[\"id\"], 200, 200) : util.defaultAvatar}\n                                onError={e => e.currentTarget.src = util.defaultAvatar}\n                            />\n                            <span>{user[\"name\"]}</span>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, cache, me, router } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\nimport UserSettings from \"./user-settings.component.js\";\nimport GroupSettings from \"./group-settings.component.js\";\n\nexport default class Settings extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n        if (props.entityUrl) {\n            cache.get(props.entityUrl).then(res => this.setState({entity: res}));\n        }\n    }\n\n    render() {\n        if (!this.state.entity || !me.me) {\n            return;\n        }\n        return (\n            <div class=\"settings\">\n                <ul class=\"nav nav-tabs\">\n                    <li class=\"nav-item\">\n                        <a\n                            class={ \"nav-link\" + (this.state.entity[\"entityType\"] == \"user\" ? \" active\" : \"\")}\n                            href={router.toApp(\"/users/\" + me.me.id + \"/settings\")}\n                            onClick={e => router.onClick(e)}\n                        >{lang.t(\"account\")}</a>\n                    </li>\n                    { me.me.groups.length > 0 && (\n                        <li\n                            class=\"nav-item dropdown group-list\" tabindex=\"-1\"\n                            onBlur={e => (!e.relatedTarget || !e.relatedTarget.href) && e.target.classList.remove(\"active\")}\n                            onClick={e => e.currentTarget.classList.toggle(\"active\")}\n                        >\n                            <div class={\"nav-link\" + (this.state.entity[\"entityType\"] == \"group\" ? \" active\" : \"\")}>{ lang.t(\"groups\") }</div>\n                            <div class=\"dropdown-menu\">\n                                { me.me.groups.map(\n                                    e => (\n                                        <a\n                                            class=\"seamless-link\"\n                                            href={router.toApp(\"/groups/\" + e.id + \"/settings\")}\n                                            onClick={e => router.onClick(e)}\n                                        >{e.name}</a>\n                                    )\n                                )}\n                            </div>\n                        </li>\n                    )}\n                </ul>\n                { this.state.entity[\"entityType\"] === \"user\" && (\n                    <UserSettings\n                        {...this.state.entity}\n                    />\n                )}\n                { this.state.entity[\"entityType\"] === \"group\" && (\n                    <GroupSettings\n                        {...this.state.entity}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, router, http } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\nimport Writer from \"/message/writer.component.js\";\n\nexport default class Share extends Component {\n\n    constructor() {\n        super();\n        let currentUrl = new URL(window.location);\n        if (!currentUrl.searchParams.get('message')) {\n            this.state = {\n                loaded: true,\n                group: null,\n                title: currentUrl.searchParams.get('title') || \"\",\n                text: currentUrl.searchParams.get('text') || \"\",\n                url: currentUrl.searchParams.get('url') || \"\",\n                files: null,\n            };\n        } else {\n            http.get(\"/api/messages/\" + currentUrl.searchParams.get('message')).then(m => {\n                this.setState({\n                    loaded: true,\n                    group: null,\n                    title: (m && m.data.title) || \"\",\n                    text: (m && m.data.text) || \"\",\n                    url: \"\",\n                    files: (m && m.files) || null,\n                });\n            });\n        }\n        me.get().then(user => {\n            if (user.groups.length == 1) {\n                this.setState({group: user.groups[0][\"id\"]});\n                router.backUrl = \"/groups/\" + user.groups[0];\n            }\n        });\n        this.groupSelect = this.groupSelect.bind(this);\n    }\n\n    groupSelect(e) {\n        this.setState({group: e.target.value});\n        router.backUrl = e.target.value.slice(4);\n    }\n\n    render() {\n        if (!this.state[\"loaded\"]) {\n            return;\n        }\n        return (\n            <article class=\"mt-2\">\n                <div class=\"container\">\n                    { me.me && me.me.groups.length > 1 && (\n                        <div class=\"mb-1\">\n                            <label for=\"group_share_choice\">{lang.t(\"group_share_choice\")}</label>\n                            <select\n                                selectedIndex=\"-1\"\n                                class=\"form-control\"\n                                name=\"group_share_choice\"\n                                onChange={e => this.groupSelect(e)}\n                                required\n                            >\n                                { me.me.groups.map(e => <option value={e[\"id\"]}>{e.name}</option>) }\n                            </select>\n                        </div>\n                    )}\n                    <Writer\n                        focus={true}\n                        group={this.state.group}\n                        title={this.state.title}\n                        text={this.state.text || this.state.url ? this.state.text + \"\\n\" + this.state.url : \"\"}\n                        files={this.state.files}\n                    />\n                </div>\n            </article>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { router } from \"/core\";\nimport { MessageParent } from \"/message\";\nimport CreateGroup from \"./create-group.component.js\";\nimport GroupSearch from \"./group-search.component.js\";\nimport GroupBoard from \"./group-board.component.js\";\nimport FaIcon from \"./fa-icon.component.js\";\nimport Writer from \"/message/writer.component.js\";\nimport Settings from \"/settings/settings.component.js\";\nimport Share from \"./share.component.js\";\n\nexport default class MainContent extends Component {\n\n    render() {\n        if (this.props.action == \"settings\") {\n            return (\n                <article class=\"mt-2 justify-content-center d-flex\">\n                    <div class=\"container\">\n                        <Settings key={this.props.entityUrl} entityUrl={this.props.entityUrl}/>\n                    </div>\n                </article>\n            );\n        }\n        switch (this.props.route) {\n            case \"create-group\":\n                return <CreateGroup/>;\n            case \"share\":\n                return (\n                    <Share/>\n                );\n            case \"messages\":\n                return (\n                    <article class=\"mt-2 justify-content-center d-flex\">\n                        <div class=\"container pb-1\">\n                            <MessageParent\n                                focus={!!router.getParam(\"focus\", router.search)}\n                                key={this.props.id}\n                                url={this.props.entityUrl}\n                            />\n                        </div>\n                    </article>\n                );\n            case \"groups\":\n                if (this.props.action == \"write\") {\n                    return (\n                        <article class=\"mt-2\">\n                            <div class=\"container\">\n                                <Writer focus={true} group={this.props.id} />\n                            </div>\n                        </article>\n                    );\n                }\n                if (router.getParam('search') || router.getParam('hashtags')) {\n                    return (\n                        <div>\n                            <GroupSearch key={this.props.id}/>\n                        </div>\n                    );\n                }\n                return (\n                    <div>\n                        <GroupBoard key={this.props.id}/>\n                        <a\n                            class=\"write-button material-shadow seamless-link\"\n                            href={router.toApp(\"/groups/\" + this.props.id + \"/write\")}\n                            onClick={e => router.onClick(e)}\n                        >\n                            <FaIcon family={\"solid\"} icon={\"pencil-alt\"}/>\n                        </a>\n                    </div>\n                );\n            default:\n        }\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, alert, cache, http, router } from \"/core\";\nimport zusam_logo from \"/assets/zusam_logo.svg\";\n\nexport default class Login extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            showAlert: false,\n            error: \"\"\n        };\n        this.sendLoginForm = this.sendLoginForm.bind(this);\n        this.sendPasswordReset = this.sendPasswordReset.bind(this);\n        this.showPasswordReset = this.showPasswordReset.bind(this);\n        // reroute if already logged in\n        cache.get(\"apiKey\").then(apiKey => apiKey && router.navigate(\"/\"));\n    }\n\n    sendPasswordReset(e) {\n        e.preventDefault();\n        let login = document.getElementById(\"login\").value || \"\";\n        login.toLowerCase();\n        this.setState({sending: true});\n        http.post(\"/api/password-reset-mail\", {mail: login}).then(res => {\n            this.setState({sending: false});\n            if (res && !res.message) {\n                alert.add(lang.t(\"password_reset_mail_sent\"));\n            } else {\n                alert.add(lang.t(res.message), \"alert-danger\");\n            }\n        });\n    }\n\n    sendLoginForm(e) {\n        e.preventDefault();\n        this.setState({showAlert: false, sending: true});\n        let login = document.getElementById(\"login\").value || \"\";\n        login.toLowerCase();\n        const password = document.getElementById(\"password\").value;\n        http.post(\"/api/login\", {login: login, password: password}).then(res => {\n            this.setState({sending: false});\n            if (res && res.api_key) {\n                cache.set(\"apiKey\", res.api_key).then(() => {\n                    me.update().then(() => {\n                        setTimeout(() => router.navigate(\"/\"), 100);\n                    });\n                });\n            } else {\n                if (res.message) {\n                    alert.add(lang.t(res.message), \"alert-danger\");\n                } else {\n                    alert.add(lang.t(\"error\"), \"alert-danger\");\n                }\n            }\n        });\n    }\n\n    showPasswordReset() {\n        this.setState({showResetPassword: true});\n    }\n\n    render() {\n        return (\n            <div class=\"login\">\n                <div class=\"login-form\">\n                    <img src={zusam_logo}/>\n                    { !this.state.showResetPassword && (\n                        <form>\n                            <div class=\"form-group\">\n                                <input type=\"email\" class=\"form-control\" required id=\"login\" placeholder={lang.t(\"login_placeholder\")} />\n                            </div>\n                            <div class=\"form-group\">\n                                <input type=\"password\" class=\"form-control\" required id=\"password\" placeholder={lang.t(\"password_placeholder\")} />\n                            </div>\n                            <div class=\"forgot-password\">\n                                <span onClick={e => this.showPasswordReset(e)}>\n                                    {lang.t(\"forgot_password\")}\n                                </span>\n                            </div>\n                            <button\n                                type=\"submit\"\n                                class=\"btn btn-light\"\n                                onClick={e => this.sendLoginForm(e)}\n                                disabled={this.state.sending}\n                            >\n                                {lang.t(\"connect\")}\n                            </button>\n                        </form>\n                    )}\n                    { !!this.state.showResetPassword && (\n                        <form>\n                            <div class=\"form-group\">\n                                <input type=\"email\" class=\"form-control\" required id=\"login\" placeholder={lang.t(\"login_placeholder\")} />\n                            </div>\n                            <button\n                                type=\"submit\"\n                                class=\"btn btn-light\"\n                                onClick={e => this.sendPasswordReset(e)}\n                                disabled={this.state.sending}\n                            >\n                                {lang.t(\"submit\")}\n                            </button>\n                        </form>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, alert, cache, http, router } from \"/core\";\n\nexport default class ResetPassword extends Component {\n\n    constructor() {\n        super();\n        this.sendNewPassword = this.sendNewPassword.bind(this);\n    }\n\n    sendNewPassword(e) {\n        e.preventDefault();\n        cache.set(\"apiKey\", \"\");\n        const password = document.getElementById(\"password\").value || \"\";\n        const passwordConfirmation = document.getElementById(\"password_confirmation\").value || \"\";\n        const mail = router.getParam(\"mail\");\n        const key = router.getParam(\"key\");\n        if (mail && password) {\n            if (password != passwordConfirmation) {\n                alert.add(lang.t(\"passwords_dont_match\"));\n                return;\n            }\n            http.post(\"/api/new-password\", {mail: mail, key: key, password: password}).then(res => {\n                if (res.api_key) {\n                    cache.set(\"apiKey\", res.api_key);\n                    setTimeout(() => router.navigate(\"/\"), 100);\n                } else {\n                    alert.add(lang.t(res.message));\n                }\n            }).catch(res => console.warn(res));\n        }\n    }\n\n    render() {\n        return (\n            <div class=\"login\">\n                <div class=\"login-form\">\n                    <h2 class=\"title\">{lang.t(\"reset_password_title\")}</h2>\n                    <form>\n                        <div class=\"form-group\">\n                            <input type=\"password\" class=\"form-control\" required id=\"password\" placeholder={lang.t(\"new_password_placeholder\")} />\n                        </div>\n                        <div class=\"form-group\">\n                            <input type=\"password\" class=\"form-control\" required id=\"password_confirmation\" placeholder={lang.t(\"confirm_password_placeholder\")} />\n                        </div>\n                        <button\n                            type=\"submit\"\n                            class=\"btn btn-light\"\n                            onClick={e => this.sendNewPassword(e)}\n                        >\n                            {lang.t(\"submit\")}\n                        </button>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, alert, cache, http, router } from \"/core\";\nimport zusam_logo from \"/assets/zusam_logo.svg\";\n\nexport default class Signup extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            showAlert: false,\n            error: \"\",\n            inviteKey: router.getParam(\"inviteKey\")\n        };\n        this.sendSignupForm = this.sendSignupForm.bind(this);\n    }\n\n    sendSignupForm(e) {\n        e.preventDefault();\n        this.setState({showAlert: false});\n        let login = document.getElementById(\"login\").value || \"\";\n        login.toLowerCase();\n        const password = document.getElementById(\"password\").value;\n        cache.set(\"apiKey\", \"\");\n        http.post(\"/api/signup\", {login: login, password: password, invite_key: this.state.inviteKey}).then(res => {\n            if (res && !res.message) {\n                cache.set(\"apiKey\", res.api_key);\n                setTimeout(() => router.navigate(\"/\"), 100);\n            } else {\n                alert.add(lang.t(res.message));\n            }\n        });\n    }\n\n    render() {\n        return (\n            <div class=\"signup\">\n                <div class=\"signup-form\">\n                    <img src={zusam_logo}/>\n                    <div class=\"welcome lead\">{lang.t(\"invitation_welcome\")}</div>\n                    <form>\n                        <div class=\"form-group\">\n                            <input type=\"email\" class=\"form-control\" required id=\"login\" placeholder={lang.t(\"login_placeholder\")} />\n                        </div>\n                        <div class=\"form-group\">\n                            <input type=\"password\" class=\"form-control\" required id=\"password\" placeholder={lang.t(\"password_placeholder\")} />\n                        </div>\n                        <button\n                            type=\"submit\"\n                            class=\"btn btn-light\"\n                            onClick={e => this.sendSignupForm(e)}\n                        >\n                            {lang.t(\"signup\")}\n                        </button>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, http } from \"/core\";\n\nexport default class StopNotificationEmails extends Component {\n\n    constructor() {\n        super();\n        http.get(\"/api\" + window.location.pathname).then(res => {\n            this.setState({message: lang.t(\"notification_emails_stopped\")});\n        }).catch(err => {\n            console.warn(err);\n            this.setState({message: lang.t(\"error\")});\n        });\n    }\n\n    render() {\n        return <div>{this.state.message || \"\"}</div>;\n    }\n}\n","import { h, render, Component } from \"preact\";\nimport { http, router } from \"/core\";\nimport { Message } from \"/message\";\n\nexport default class Public extends Component {\n\n    constructor() {\n        super();\n        this.state = {};\n        if (router.id) {\n            http.get(\"/api/public/\" + router.id).then(res => this.setState({message: res}));\n        }\n    }\n\n    render() {\n        if (!this.state.message) {\n            return;\n        }\n        return (\n            <article class=\"justify-content-center d-flex\">\n                <div class=\"container\">\n                    <Message isPublic={true} key={this.state.message.id} message={this.state.message} />\n                </div>\n            </article>\n        );\n    }\n}\n","import _Login from \"./login.component.js\";\nimport _ResetPassword from \"./reset-password.component.js\";\nimport _Signup from \"./signup.component.js\";\nimport _StopNotificationEmails from \"./stop-notification-emails.component.js\";\nimport _Public from \"./public.component.js\";\n\nexport const Login = _Login;\nexport const ResetPassword = _ResetPassword;\nexport const Signup = _Signup;\nexport const StopNotificationEmails = _StopNotificationEmails;\nexport const Public = _Public;\n","import { h, render, Component } from \"preact\";\nimport { lazy } from \"preact/compat\";\nimport { alert, lang, cache, router, me } from \"/core\";\nimport Navbar from \"./components/navbar.component.js\";\nimport MainContent from \"./components/main-content.component.js\";\nimport { Login, Public, ResetPassword, Signup, StopNotificationEmails } from \"/outside\";\n\nclass App extends Component {\n\n    constructor() {\n        super();\n        this.onRouterStateChange = this.onRouterStateChange.bind(this);\n        window.addEventListener(\"routerStateChange\", this.onRouterStateChange);\n        window.addEventListener(\"meStateChange\", _ => this.setState({me: me.me}));\n        window.addEventListener(\"fetchedNewDict\", _ => this.setState({}));\n        window.addEventListener(\"popstate\", router.sync);\n        lang.fetchDict();\n        cache.get(\"apiKey\").then(apiKey => {\n            if (router.isOutside() || apiKey) {\n                router.sync();\n            } else {\n                // redirect to login if we don't have an apiKey\n                router.navigate(\"/login\");\n            }\n        });\n        this.state = {\n            action: router.action,\n            route: router.route,\n            id: router.id,\n            entityUrl: router.entityUrl,\n        };\n    }\n\n    onRouterStateChange() {\n        this.setState({\n            action: router.action,\n            route: router.route,\n            id: router.id,\n            entityUrl: router.entityUrl,\n        });\n        setTimeout(() => window.scrollTo(0, 0));\n        cache.get(\"apiKey\").then(apiKey => {\n            if (apiKey) {\n                me.get().then(user => {\n                    if (!user && !router.isOutside()) {\n                        cache.set(\"apiKey\", \"\").then(_ => router.navigate(\"/login\"));\n                    } else {\n                        this.setState({\n                            action: router.action,\n                            route: router.route,\n                            id: router.id,\n                            me: user,\n                            entityUrl: router.entityUrl,\n                        });\n                    }\n                });\n            } else {\n                if (!router.isOutside()) {\n                    router.navigate(\"/login\");\n                }\n            }\n        });\n        alert.add(lang.t(router.getParam(\"alert\", router.search)));\n    }\n\n    render() {\n        // external pages for non connected users\n        switch (this.state.route) {\n            case \"signup\":\n                return <Signup/>;\n                break;\n            case \"stop-notification-emails\":\n                return <StopNotificationEmails/>;\n                break;\n            case \"public\":\n                return <Public/>;\n                break;\n            case \"password-reset\":\n                return <ResetPassword/>;\n                break;\n            case \"login\":\n                return <Login/>;\n                break;\n        }\n\n        // here, we enter the \"connected\" realm of pages.\n        // If the user is not connected, what should we do ?\n        if (!this.state.me || !this.state.me.groups) {\n            return;\n        }\n\n        return (\n            <main>\n                <Navbar/>\n                <div class=\"content\">\n                    <MainContent {...this.state}/>\n                </div>\n            </main>\n        );\n    }\n}\n\nrender(<App/>, document.body);\n\nif ('serviceWorker' in navigator) {\n    navigator.serviceWorker.register('/service-worker.js').catch(err => console.warn(err));\n}\n","module.exports = function loadJSBundle(bundle) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.charset = 'utf-8';\n    script.src = bundle;\n    script.onerror = function (e) {\n      script.onerror = script.onload = null;\n      reject(e);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n};\n"]}